import{Logger,List,Map,ObjectFunction,PropertyAccessor}from"./coreutil_v1.js";import{XmlElement,XmlCdata,DomTree}from"./xmlparser_v1.js";import{InjectionPoint,MindiConfig,SingletonConfig}from"./mindi_v1.js";const LOG=new Logger("ContainerBridge");class ContainerBridge{static getElementById(t){return document.getElementById(t)}static createTextNode(t){return document.createTextNode(t)}static createElement(t){return document.createElement(t)}static createElementNS(t,e){return document.createElementNS(t,e)}static fetch(t,e){return window.fetch(t,e)}static setSessionAttribute(t,e){window.sessionStorage.setItem(t,e)}static removeSessionAttribute(t){window.sessionStorage.removeItem(t)}static getSessionAttribute(t){return window.sessionStorage.getItem(t)}static hasSessionAttribute(t){return null!==window.sessionStorage.getItem(t)}static setLocalAttribute(t,e){window.localStorage.setItem(t,e)}static removeLocalAttribute(t){window.localStorage.removeItem(t)}static hasLocalAttribute(t){return null!==window.localStorage.getItem(t)}static getLocalAttribute(t){return window.localStorage.getItem(t)}static removeElement(t){let e=document.getElementById(t);e.parentNode.removeChild(e)}static addHeaderElement(t){document.getElementsByTagName("head")[0].append(t)}static addBodyElement(t){document.getElementsByTagName("body")[0].append(t)}}class Attribute{constructor(t){this.attribute=t}getValue(){return this.attribute.value}getName(){return this.attribute.name}getNamespace(){return this.attribute.name}}const LOG$1=new Logger("BaseElement");class BaseElement{constructor(t,e){return this.element=null,this.attributeMap=null,this.eventsAttached=new List,t instanceof XmlElement?void(this.element=this.createFromXmlElement(t,e)):"string"==typeof t?void(this.element=ContainerBridge.createElement(t)):t instanceof HTMLElement?void(this.element=t):(LOG$1.error("Unrecognized value for Element"),void LOG$1.error(t))}loadAttributes(){if(null===this.element.attributes||void 0===this.element.attributes)return void(this.attributeMap=new Map);if(null===this.attributeMap||void 0===this.attributeMap){this.attributeMap=new Map;for(var t=0;t<this.element.attributes.length;t++)this.attributeMap.set(this.element.attributes[t].name,new Attribute(this.element.attributes[t]))}}createFromXmlElement(t,e){let n=null;return n=t.getNamespace()?ContainerBridge.createElementNS(t.getNamespaceUri(),t.getFullName()):ContainerBridge.createElement(t.getName()),e&&null!==e.getMappedElement()&&e.getMappedElement().appendChild(n),t.getAttributes().forEach(function(t,e){return n.setAttribute(t,e.getValue()),!0}),n}attachEvent(t,e){this.eventsAttached.contains(t)?LOG$1.warn("Event '"+t+"' allready attached for "+this.element.name):(t.startsWith("on")&&(t=t.substr(2)),this.element.addEventListener(t,e),this.eventsAttached.add(t))}getMappedElement(){return this.element}getFullName(){return this.element.tagName}getTop(){return this.element.getBoundingClientRect().top}getBottom(){return this.element.getBoundingClientRect().bottom}getLeft(){return this.element.getBoundingClientRect().left}getRight(){return this.element.getBoundingClientRect().right}getWidth(){return this.element.offsetWidth}getHeight(){return this.element.offsetHeight}getAttributes(){return this.loadAttributes(),this.attributeMap}setAttributeValue(t,e){this.element.setAttribute(t,e)}getAttributeValue(t){return this.element.getAttribute(t)}containsAttribute(t){return this.element.hasAttribute(t)}removeAttribute(t){this.element.removeAttribute(t)}setStyle(t,e){this.element.style[t]=e}getStyle(t){return this.element.style[t]}removeStyle(t){this.element.style[t]=null}set(t){return null===this.element.parentNode?void console.error("The element has no parent, can not swap it for value"):t.getMappedElement?void this.element.parentNode.replaceChild(t.getMappedElement(),this.element):t&&"function"==typeof t.getRootElement?(this.element.parentNode.replaceChild(t.getRootElement().getMappedElement(),this.element),void(this.element=t.getRootElement().getMappedElement())):"string"==typeof t?void this.element.parentNode.replaceChild(ContainerBridge.createTextNode(t),this.element):t instanceof Text?void this.element.parentNode.replaceChild(t,this.element):t instanceof Element?void this.element.parentNode.replaceChild(t,this.element):void 0}isMounted(){return!!this.element.parentNode}remove(){this.element.parentNode.removeChild(this.element)}clear(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}setChild(t){this.clear(),this.addChild(t)}addChild(t){return t.getMappedElement?void this.element.appendChild(t.getMappedElement()):t&&"function"==typeof t.getRootElement?void this.element.appendChild(t.getRootElement().getMappedElement()):"string"==typeof t?void this.element.appendChild(ContainerBridge.createTextNode(t)):t instanceof Text?void this.element.appendChild(t):t instanceof Element?void this.element.appendChild(t):void 0}prependChild(t){return null===this.element.firstChild&&this.addChild(t),t.getMappedElement?void this.element.insertBefore(t.getMappedElement(),this.element.firstChild):t&&"function"==typeof t.getRootElement?void this.element.insertBefore(t.getRootElement().getMappedElement(),this.element.firstChild):"string"==typeof t?void this.element.insertBefore(ContainerBridge.createTextNode(t),this.element.firstChild):t instanceof Text?void this.element.insertBefore(t,this.element.firstChild):t instanceof Element?void this.element.insertBefore(t,this.element.firstChild):void 0}}class CanvasRoot{static replaceComponent(t,e){var n=ContainerBridge.getElementById(t);n.parentNode.replaceChild(e.getRootElement().getMappedElement(),n)}static setComponent(t,e){var n=ContainerBridge.getElementById(t);n.innerHTML="",n.appendChild(e.getRootElement().getMappedElement(),n)}static addChildComponent(t,e){ContainerBridge.getElementById(t).appendChild(e.getRootElement().getMappedElement())}static addChildElement(t,e){ContainerBridge.getElementById(t).appendChild(e.getMappedElement())}static removeElement(t){ContainerBridge.removeElement(t)}static addHeaderElement(t){ContainerBridge.addHeaderElement(t.getMappedElement())}static addBodyElement(t){ContainerBridge.addBodyElement(t.getMappedElement())}}const LOG$2=new Logger("AbstractInputElement");class AbstractInputElement extends BaseElement{constructor(t,e){super(t,e)}getName(){return this.element.name}setName(t){this.element.name=t}getValue(){return this.getBackingValue()}getBackingValue(){return this.element.value}setValue(t){this.element.value=t}focus(){this.element.focus()}selectAll(){this.element.select()}enable(){this.element.disabled=!1}disable(){this.element.disabled=!0}}class RadioInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}setChecked(t){this.element.checked=t}isChecked(){return this.element.checked}getValue(){return this.isChecked()?super.getValue():null}}class CheckboxInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}setChecked(t){this.element.checked=t}isChecked(){return this.element.checked}getValue(){return this.isChecked()?super.getValue():null}}class TextInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}}class TextareaInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}getInnerHTML(){return this.element.innerHTML}setInnerHTML(t){this.element.innerHTML=t}addChild(t){super.addChild(t),this.setValue(this.getInnerHTML())}prependChild(t){super.prependChild(t),this.setValue(this.getInnerHTML())}}class TextnodeElement{constructor(t,e){t instanceof XmlCdata&&(this.element=this.createFromXmlCdata(t,e)),"string"==typeof t&&(this.element=ContainerBridge.createTextNode(t))}createFromXmlCdata(t,e){let n=document.createTextNode(t.getValue());return null!==e&&null!==e.getMappedElement()&&e.getMappedElement().appendChild(n),n}setValue(t){this.element=t}getValue(){return this.element}getMappedElement(){return this.element}}class SimpleElement extends BaseElement{constructor(t,e){super(t,e)}getInnerHTML(){return this.element.innerHTML}setInnerHTML(t){this.element.innerHTML=t}}class ElementMapper{static map(t,e){return ElementMapper.mapsToRadio(t)?new RadioInputElement(t,e):ElementMapper.mapsToCheckbox(t)?new CheckboxInputElement(t,e):ElementMapper.mapsToSubmit(t)?new TextInputElement(t,e):ElementMapper.mapsToTextarea(t)?new TextareaInputElement(t,e):ElementMapper.mapsToText(t)?new TextInputElement(t,e):ElementMapper.mapsToTextnode(t)?new TextnodeElement(t,e):ElementMapper.mapsToSimple(t)?new SimpleElement(t,e):(console.log("Mapping to simple by default "+t),new SimpleElement(t,e))}static mapsToRadio(t){return t instanceof HTMLInputElement&&"radio"===t.type||t instanceof XmlElement&&"input"===t.getName()&&"radio"===t.getAttribute("type").getValue()}static mapsToCheckbox(t){return t instanceof HTMLInputElement&&"checkbox"===t.type||t instanceof XmlElement&&"input"===t.getName()&&"checkbox"===t.getAttribute("type").getValue()}static mapsToSubmit(t){return t instanceof HTMLInputElement&&"submit"===t.type||t instanceof XmlElement&&"input"===t.getName()&&"submit"===t.getAttribute("type").getValue()}static mapsToText(t){if(t instanceof HTMLInputElement){if("text"===t.type)return!0;if("password"===t.type)return!0;if("email"===t.type)return!0;if("date"===t.type)return!0;if("time"===t.type)return!0}if(t instanceof XmlElement&&"input"===t.getName()){if("text"===t.getAttribute("type").getValue())return!0;if("password"===t.getAttribute("type").getValue())return!0;if("email"===t.getAttribute("type").getValue())return!0;if("date"===t.getAttribute("type").getValue())return!0;if("time"===t.getAttribute("type").getValue())return!0}return!1}static mapsToTextnode(t){return t instanceof Node&&"TEXT_NODE"===t.nodeType||t instanceof XmlCdata}static mapsToTextarea(t){return t instanceof HTMLTextAreaElement||t instanceof XmlElement&&"textarea"===t.getName()}static mapsToSimple(t){return t instanceof HTMLElement||t instanceof XmlElement}}class HTML{static custom(t){var e=new XmlElement(t);return ElementMapper.map(e)}static applyStyles(t,e,n){null!==e&&t.setAttributeValue("class",e),null!==n&&t.setAttributeValue("style",n)}static a(t,e,n,i){var r=HTML.custom("a");return r.addChild(t),r.setAttributeValue("href",e),HTML.applyStyles(r,n,i),r}}const LOG$3=new Logger("CanvasStyles"),styles=new Map,enabledStyles=new List;class CanvasStyles{static setStyle(t,e){if(styles.contains(t))styles.get(t).setChild(new TextnodeElement(e.getStylesSource()));else{let n=HTML.custom("style");n.setAttributeValue("id",t),n.setChild(new TextnodeElement(e.getStylesSource())),styles.set(t,n)}}static removeStyle(t){enabledStyles.contains(t)&&CanvasStyles.disableStyle(t),styles.remove(t)}static disableStyle(t){if(!styles.contains(t))return void LOG$3.error("Style does not exist: "+t);enabledStyles.contains(t)&&(enabledStyles.remove(t),CanvasRoot.removeElement(t))}static enableStyle(t){if(!styles.contains(t))return void LOG$3.error("Style does not exist: "+t);enabledStyles.contains(t)||(enabledStyles.add(t),CanvasRoot.addHeaderElement(styles.get(t)))}}class Client{static get(t){var e={method:"GET",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),e)}static post(t,e){var n={body:JSON.stringify(e),headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"},method:"POST",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),n)}static put(t,e){var n={body:JSON.stringify(e),method:"PUT",mode:"cors",redirect:"follow",headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"}};return ContainerBridge.fetch(t.toString(),n)}static patch(t,e){var n={body:JSON.stringify(e),method:"PATCH",mode:"cors",redirect:"follow",headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"}};return ContainerBridge.fetch(t.toString(),n)}static delete(t){var e={method:"DELETE",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),e)}}class Component{constructor(t,e,n){this.componentIndex=t,this.elementMap=n,this.rootElement=e}remove(){this.rootElement.remove()}getRootElement(){return this.rootElement}getComponentIndex(){return this.componentIndex}get(t){return this.elementMap.get(t)}set(t,e){this.elementMap.get(t).set(e)}clearChildren(t){this.elementMap.get(t).clear()}setChild(t,e){this.elementMap.get(t).setChild(e)}addChild(t,e){this.elementMap.get(t).addChild(e)}prependChild(t,e){this.elementMap.get(t).prependChild(e)}}class Url{constructor(t){if(this.protocol=null,this.host=null,this.port=null,this.pathList=new List,this.parameterMap=new Map,this.bookmark=null,null!==t){var e=this.determineProtocol(t);null!==e&&(null!==this.protocol&&(e=this.determineHost(e)),null!==e&&(null!==this.host&&(e=this.determinePort(e)),null!==e&&null!==(e=this.determinePath(e))&&null!==(e=this.determineParameters(e))&&this.determineBookmark(e)))}}getProtocol(){return this.protocol}getHost(){return this.host}getPort(){return this.port}getPathList(){return this.pathList}getPath(t){return this.pathList.get(t)}clearPathList(){this.pathList=new List}getParameterMap(){return this.parameterMap}clearParameterMAp(){this.parameterMap=new Map}getParameter(t){return this.parameterMap.get(t)}setParameter(t,e){this.parameterMap.set(t,e)}setBookmark(t){this.bookmark=t}setPath(t){this.determinePath(t)}setQueryString(t){this.parameterMap=this.determineParameters(t)}getBookmark(){return this.bookmark}determineProtocol(t){if(-1===t.indexOf("//"))return t;var e=t.split("//");return-1!==e[0].indexOf("/")?t:(this.protocol=e[0],1==e.length?null:t.replace(e[0]+"//",""))}determineHost(t){var e=t.split("/"),n=e[0];return-1!==n.indexOf(":")&&(n=n.split(":")[0]),this.host=n,e.length>1?t.replace(n,""):null}determinePort(t){if(!t.startsWith(":"))return t;var e=t.split("/")[0].substring(1);return this.port=e,t.replace(":"+e,"")}determinePath(t){var e=t;if(-1!==t.indexOf("?"))(n=t.split("?")).length>1&&(e=t.substring(t.indexOf("?"))),t=n[0];else if(-1!==t.indexOf("#")){var n=t.split("#");n.length>1&&(e=t.substring(t.indexOf("#"))),t=n[0]}t.startsWith("/")&&(t=t.substring(1));var i=new List(t.split("/"));return this.pathList=new List,i.forEach(function(t,e){return e.pathList.add(decodeURI(t)),!0},this),e}determineParameters(t){var e=t;if(-1===t.indexOf("?"))return t;-1!==(t=t.substring(t.indexOf("?")+1)).indexOf("#")&&(e=t.substring(t.indexOf("#")),t=t.substring(0,t.indexOf("#")));var n=new List(t.split("&")),i=new Map;return n.forEach(function(t,e){var n=t.split("=");return n.length>=2&&i.set(decodeURI(n[0]),decodeURI(n[1])),!0},this),this.parameterMap=i,e}determineBookmark(t){-1!==t.indexOf("#")&&(this.bookmark=t.substring(t.indexOf("#")+1))}toString(){var t="";null!==this.protocol&&(t=t+this.protocol+"//"),null!==this.host&&(t+=this.host),null!==this.port&&(t=t+":"+this.port),this.pathList.forEach(function(e,n){return t=t+"/"+e,!0},this);var e=!0;return this.parameterMap.forEach(function(n,i,r){e?(e=!1,t+="?"):t+="&",t=t+encodeURI(n)+"="+encodeURI(i)},this),null!==this.bookmark&&(t=t+"#"+this.bookmark),t}}class Styles{constructor(t){this.stylesSource=t}getStylesSource(){return this.stylesSource}}const LOG$4=new Logger("StylesRegistry");class StylesRegistry{constructor(){this.stylesMap=new Map,this.stylesUrlMap=new Map,this.stylesQueueSize=0,this.callback=null}set(t,e,n){void 0!==n&&null!==n&&this.stylesUrlMap.set(t,n),this.stylesMap.set(t,e)}get(t){return this.stylesMap.get(t)}contains(t){return this.stylesMap.contains(t)}done(t){this.callback=t,this.doCallback(this)}doCallback(t){if(null!==tmo.callback&&void 0!==t.callback&&t.stylesQueueSize===t.stylesMap.size()){var e=t.callback;t.callback=null,e.call()}}load(t,e){return this.stylesQueueSize++,new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load styles for "+t+" at "+e;i.text().then(i=>{this.set(t,new Styles(i),e);this.doCallback(this);n()})})})}getStylesLoadedPromise(t){return new Promise((e,n)=>{var i=0;if(!t||0==t.size())return void e();t.forEach((r,s,o)=>{if(this.contains(r))return++i!=t.size()||(e(),!1);this.privateLoad(r,new Url(s)).then(()=>{i++;if(i==t.size())return e(),!1}).catch(t=>{n(t);return!1});return!0},this)})}privateLoad(t,e){return LOG$4.info("Loading styles "+t+" at "+e.toString()),new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load styles for "+t+" at "+e;i.text().then(i=>{this.set(t,new Styles(i),e);n()})})})}}class Template{constructor(t){this.templateSource=t}getTemplateSource(){return this.templateSource}}const LOG$5=new Logger("TemplateRegistry");class TemplateRegistry{constructor(){this.templateMap=new Map,this.templateUrlMap=new Map,this.templateQueueSize=0,this.callback=null,this.languagePrefix=null}setLanguagePrefix(t){this.languagePrefix=t}set(t,e,n){void 0!==n&&null!==n&&this.templateUrlMap.set(t,n),this.templateMap.set(t,e)}get(t){return this.templateMap.get(t)}contains(t){return this.templateMap.contains(t)}done(t){this.callback=t,this.doCallback(this)}doCallback(t){if(null!==tmo.callback&&void 0!==t.callback&&t.templateQueueSize===t.templateMap.size()){var e=t.callback;t.callback=null,e.call()}}load(t,e){return null!==this.languagePrefix&&e.getPathList().setLast(this.languagePrefix+"."+e.getPathList().getLast()),this.templateQueueSize++,new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load template for "+t+" at "+e;i.text().then(i=>{this.set(t,new Template(i),e);this.doCallback(this);n()})})})}getTemplatesLoadedPromise(t){return new Promise((e,n)=>{var i=0;if(!t||0==t.size())return void e();t.forEach((r,s,o)=>{if(this.contains(r))return++i!=t.size()||(e(),!1);this.privateLoad(r,new Url(s)).then(()=>{i++;if(i==t.size())return e(),!1}).catch(t=>{n(t);return!1});return!0},this)})}privateLoad(t,e){return null!==this.languagePrefix&&e.getPathList().setLast(this.languagePrefix+"."+e.getPathList().getLast()),LOG$5.info("Loading template "+t+" at "+e.toString()),new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load template for "+t+" at "+e;i.text().then(i=>{this.set(t,new Template(i),e);n()})})})}}const LOG$6=new Logger("TemplatePostConfig");class TemplatesLoader{constructor(t){this.templateRegistry=t}load(t){let e=new Map;return t.getConfigEntries().forEach((t,n,i)=>{n.getClassReference().TEMPLATE_URL&&n.getClassReference().COMPONENT_NAME&&e.set(n.getClassReference().COMPONENT_NAME,n.getClassReference().TEMPLATE_URL);return!0},this),this.templateRegistry.getTemplatesLoadedPromise(e)}}const LOG$7=new Logger("StylesLoader");class StylesLoader{constructor(t){this.stylesRegistry=t}load(t){let e=new Map;return t.getConfigEntries().forEach((t,n,i)=>{n.getClassReference().STYLES_URL&&n.getClassReference().COMPONENT_NAME&&e.set(n.getClassReference().COMPONENT_NAME,n.getClassReference().STYLES_URL);return!0},this),this.stylesRegistry.getStylesLoadedPromise(e)}}const LOG$8=new Logger("ComponentConfigProcessor");class ComponentConfigProcessor{constructor(){this.templateRegistry=InjectionPoint.instance(TemplateRegistry),this.stylesRegistry=InjectionPoint.instance(StylesRegistry)}postConfig(){this.templatesLoader=new TemplatesLoader(this.templateRegistry),this.stylesLoader=new StylesLoader(this.stylesRegistry)}processConfig(t){return Promise.all([this.templatesLoader.load(t),this.stylesLoader.load(t)])}}class UniqueIdRegistry{idAttributeWithSuffix(t){if(idNames.contains(t)){var e=idNames.get(t);return idNames.set(t,e+1),t+"-"+e}return idNames.set(t,1),t}}var idNames=new Map;class Event{constructor(t){this.event=t,"dragstart"==this.event.type.toLowerCase()&&this.event.dataTransfer.setData("text/plain",null)}preventDefault(){this.event.preventDefault()}getOffsetX(){return this.event.offsetX}getOffsetY(){return this.event.offsetY}getClientX(){return this.event.clientX}getClientY(){return this.event.clientY}getTarget(){return ElementMapper.map(this.event.target)}getKeyCode(){return this.event.keyCode}}const LOG$9=new Logger("EventRegistry");class EventRegistry{constructor(){this.listeners=new Map,this.beforeListeners=new Map,this.afterListeners=new Map}attach(t,e,n,i){const r=n+"_"+i,s=this;t.attachEvent(e,function(t){s.trigger(r,n,t)})}listen(t,e,n){const i=t+"_"+n;this.listeners.exists(i)||this.listeners.set(i,new List),this.listeners.get(i).add(e)}listenBefore(t,e,n){this.beforeListeners.exists(t)||this.beforeListeners.set(t,new List),this.beforeListeners.get(t).add(new ObjectFunction(e,n))}listenAfter(t,e,n){this.afterListeners.exists(t)||this.afterListeners.set(t,new List),this.afterListeners.get(t).add(new ObjectFunction(e,n))}trigger(t,e,n){this.handleBefore(e,n),this.listeners.exists(t)&&this.listeners.get(t).forEach((t,e)=>{t.call(new Event(n));return!0},this),this.handleAfter(e,n)}handleBefore(t,e){this.handleGlobal(this.beforeListeners,t,e)}handleAfter(t,e){this.handleGlobal(this.afterListeners,t,e)}handleGlobal(t,e,n){t.exists(e)&&t.get(e).forEach((t,e)=>{t.call(new Event(n));return!0},this)}}class ElementRegistrator{constructor(t,e,n){this.componentIndex=n,this.uniqueIdRegistry=e,this.eventRegistry=t,this.rootElement=null,this.elementMap=new Map}getRootElement(){return this.rootElement}getElementMap(){return this.elementMap}getComponentIndex(){return this.componentIndex}elementCreated(t,e){var n=ElementMapper.map(t,e);return this.addToElementIdMap(n),this.registerElementEvents(n),null===this.rootElement&&null!==n&&(this.rootElement=n),n}registerElementEvents(t){if(null!==t&&void 0!==t&&t instanceof BaseElement){var e=this.eventRegistry,n=this.componentIndex;t.getAttributes().forEach(function(i,r,s){if(null!==r&&void 0!==r&&r.getValue().startsWith("//event:")){var o=r.getValue(),a=r.getName();e.attach(t,a,o,n)}return!0},this)}}addToElementIdMap(t){if(null!==t&&void 0!==t&&t instanceof BaseElement){var e=null;t.containsAttribute("id")&&(e=t.getAttributeValue("id"),t.setAttributeValue("id",this.uniqueIdRegistry.idAttributeWithSuffix(e))),null!==e&&this.elementMap.set(e,t)}}}const LOG$a=new Logger("ComponentFactory");class ComponentFactory{constructor(){this.eventRegistry=InjectionPoint.instance(EventRegistry),this.stylesRegistry=InjectionPoint.instance(StylesRegistry),this.templateRegistry=InjectionPoint.instance(TemplateRegistry),this.uniqueIdRegistry=InjectionPoint.instance(UniqueIdRegistry)}create(t){var e=this.templateRegistry.get(t);if(!e)throw LOG$a.error(this.templateRegistry),"No template was found with name "+t;var n=new ElementRegistrator(this.eventRegistry,this.uniqueIdRegistry,componentCounter++);return new DomTree(e.getTemplateSource(),n).load(),this.mountStyles(t),new Component(n.getComponentIndex(),n.getRootElement(),n.getElementMap())}mountStyles(t){this.stylesRegistry.contains(t)&&CanvasStyles.setStyle(t,this.stylesRegistry.get(t))}}var componentCounter=0;const LOG$b=new Logger("InputElementDataBinding");class InputElementDataBinding{constructor(t,e){this.model=t,this.validator=e,this.pullers=new List,this.pushers=new List}static link(t,e){return new InputElementDataBinding(t,e)}and(t){return this.to(t)}to(t){const e=()=>{let e=PropertyAccessor.getValue(this.model,t.getName());t.getValue&&e!==t.getValue()&&PropertyAccessor.setValue(this.model,t.getName(),t.getValue());this.validator&&this.validator.validate&&this.validator.validate(t.getValue())};t.attachEvent("onchange",e),t.attachEvent("onkeyup",e),e.call();const n=()=>{var e=PropertyAccessor.getValue(this.model,t.getName());e===t.getValue()?t.setChecked&&!t.getChecked()&&t.setChecked(!0):t.setChecked&&t.getChecked()?t.setChecked(!1):t.setValue&&t.setValue(e)};let i="__changed_"+t.getName().replace(".","_");return this.model[i]||(this.model[i]=(()=>{this.push()})),this.pullers.add(e),this.pushers.add(n),this}pull(){this.pullers.forEach((t,e)=>{t.call(e);return!0},this)}push(){this.pushers.forEach((t,e)=>{t.call(e);return!0},this)}}class ProxyObjectFactory{static createProxyObject(t){return new Proxy(t,{set:(t,e,n)=>{let i=t[e]=n;let r="__changed_"+e;let s=t[r];if(s&&"function"==typeof s){let e=s.bind(t);e()}return i===n}})}}class History{static pushUrl(t,e,n){window.history.pushState(n,e,t.toString())}static getUrl(){return new Url(window.location.href)}static loadUrl(t){window.location=t.toString()}}class State{constructor(){this.stateListenerMap=new Map}recordState(t){var e=History.getUrl();e.getPath(0)!==t&&this.setUrl(e)}setUrl(t){History.pushUrl(t,"",{})}}const LOG$c=new Logger("JustrightConfig");class JustrightConfig{static getInstance(){return justrightConfig}constructor(){this.config=(new MindiConfig).addTypeConfig(SingletonConfig.unnamed(TemplateRegistry)).addTypeConfig(SingletonConfig.unnamed(StylesRegistry)).addTypeConfig(SingletonConfig.unnamed(EventRegistry)).addTypeConfig(SingletonConfig.unnamed(UniqueIdRegistry)).addTypeConfig(SingletonConfig.unnamed(ComponentFactory)).addTypeConfig(SingletonConfig.unnamed(State))}getConfig(){return this.config}}const justrightConfig=new JustrightConfig;class ApplicationStorage{static setLocalAttribute(t,e){ContainerBridge.setLocalAttribute(t,e)}static getLocalAttribute(t){return ContainerBridge.getLocalAttribute(t)}static hasLocalAttribute(t){return ContainerBridge.hasLocalAttribute(t)}static removeLocalAttribute(t){return ContainerBridge.removeLocalAttribute(t)}}class SessionStorage{static setSessionAttribute(t,e){ContainerBridge.setSessionAttribute(t,e)}static hasSessionAttribute(t){return ContainerBridge.hasSessionAttribute(t)}static getSessionAttribute(t){return ContainerBridge.getSessionAttribute(t)}static removeSessionAttribute(t){return ContainerBridge.removeSessionAttribute(t)}}class HttpResponseHandler{constructor(t,e,n){this.code=t,this.objectFunction=e,this.mapperFunction=n}getCode(){return this.code}getObjectFunction(){return this.objectFunction}getMapperFunction(){return this.mapperFunction}}const LOG$d=new Logger("HttpCallBuilder");class HttpCallBuilder{constructor(t,e){this.url=t,this.paramter=e,this.httpCallbackMap=new Map,this.errorCallback=null}static newInstance(t,e,n){return new HttpCallBuilder(t,e,n)}responseMapping(t,e,n,i){return this.httpCallbackMap.set(t,new HttpResponseHandler(t,new ObjectFunction(e,n),i)),this}errorMapping(t,e){return t&&e&&(this.errorCallback=new ObjectFunction(t,e)),this}get(){Client.get(this.url).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}post(){Client.post(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}put(){Client.put(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}patch(){Client.patch(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}delete(){Client.delete(this.url).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}processError(t){LOG$d.error(t),this.errorCallback&&this.errorCallback.call(t)}processResponse(t){var e=this.httpCallbackMap.get(t.status);e&&t.json().then(t=>{var n=e.getMapperFunction();n?e.getObjectFunction().call(n(t)):e.getObjectFunction().call(t)},t=>{})}}const LOG$e=new Logger("AbstractValidator");class AbstractValidator{constructor(t=!1){this.validListenerList=new List,this.invalidListenerList=new List,this.currentlyValid=t}isValid(){return this.iscurrentlyValid}valid(){this.iscurrentlyValid=!0,this.validListenerList.forEach((t,e)=>{t.call();return!0},this)}invalid(){this.iscurrentlyValid=!1,this.invalidListenerList.forEach((t,e)=>{t.call();return!0},this)}withValidListener(t){return this.validListenerList.add(t),this}withInvalidListener(t){return this.invalidListenerList.add(t),this}}class AndValidatorSet extends AbstractValidator{constructor(t=!1){super(t),this.validatorList=new List}withValidator(t){return t.withValidListener(new ObjectFunction(this,this.oneValid)),t.withInvalidListener(new ObjectFunction(this,this.oneInvalid)),this.validatorList.add(t),this}oneValid(){let t=!1;this.validatorList.forEach((e,n)=>{if(!e.isValid())return t=!0,!1;return!0},this),t?super.invalid():super.valid()}oneInvalid(){super.invalid()}}class RegexValidator extends AbstractValidator{constructor(t=!1,e="(.*)"){super(t),this.regex=e}validate(t){t&&"string"==typeof t&&t.match(this.regex)?this.valid():this.invalid()}}const EMAIL_FORMAT=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;class EmailValidator extends RegexValidator{constructor(t=!1){super(t,EMAIL_FORMAT)}}class EqualsValidator extends AbstractValidator{constructor(t=!1,e=null){super(t),this.value=e}setValue(t){this.value=t}validate(t){t&&t===this.value?this.valid():this.invalid()}}class OrValidatorSet extends AbstractValidator{constructor(t=!1){super(t),this.validatorList=new List}withValidator(t){return t.withValidListener(new ObjectFunction(this,this.oneValid)),t.withInvalidListener(new ObjectFunction(this,this.oneInvalid)),this.validatorList.add(t),this}oneValid(){super.valid()}oneInvalid(){let t=!1;this.validatorList.forEach((e,n)=>{if(e.isValid())return t=!0,!1;return!0},this),t?super.valid():super.invalid()}}const PASSWORD_FORMAT=/^(?=.*[A-Za-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/;class PasswordValidator extends RegexValidator{constructor(t=!1){super(t,PASSWORD_FORMAT)}}class RequiredValidator extends AbstractValidator{validate(t){""===t?this.invalid():this.valid()}}export{AbstractInputElement,AbstractValidator,AndValidatorSet,ApplicationStorage,Attribute,BaseElement,CanvasRoot,CanvasStyles,CheckboxInputElement,Client,Component,ComponentConfigProcessor,ComponentFactory,ContainerBridge,ElementMapper,ElementRegistrator,EmailValidator,EqualsValidator,Event,EventRegistry,HTML,History,HttpCallBuilder,HttpResponseHandler,InputElementDataBinding,JustrightConfig,OrValidatorSet,PasswordValidator,ProxyObjectFactory,RadioInputElement,RegexValidator,RequiredValidator,SessionStorage,SimpleElement,State,Styles,StylesLoader,StylesRegistry,Template,TemplateRegistry,TemplatesLoader,TextInputElement,TextareaInputElement,TextnodeElement,UniqueIdRegistry,Url};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianVzdHJpZ2h0X2NvcmVfdjEuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qdXN0cmlnaHQvYnJpZGdlL2NvbnRhaW5lckJyaWRnZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvZWxlbWVudC9hdHRyaWJ1dGUuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvYmFzZUVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NhbnZhcy9jYW52YXNSb290LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L2Fic3RyYWN0SW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3JhZGlvSW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L2NoZWNrYm94SW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3RleHRJbnB1dEVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvdGV4dGFyZWFJbnB1dEVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvdGV4dG5vZGVFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3NpbXBsZUVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvZWxlbWVudE1hcHBlci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvaHRtbC9odG1sLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jYW52YXMvY2FudmFzU3R5bGVzLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jbGllbnQvY2xpZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvY29tcG9uZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC91dGlsL3VybC5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3R5bGVzL3N0eWxlcy5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3R5bGVzL3N0eWxlc1JlZ2lzdHJ5LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC90ZW1wbGF0ZS90ZW1wbGF0ZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdGVtcGxhdGUvdGVtcGxhdGVSZWdpc3RyeS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdGVtcGxhdGUvdGVtcGxhdGVzTG9hZGVyLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9zdHlsZXMvc3R5bGVzTG9hZGVyLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvY29tcG9uZW50Q29uZmlnUHJvY2Vzc29yLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvdW5pcXVlSWRSZWdpc3RyeS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvZXZlbnQvZXZlbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2V2ZW50L2V2ZW50UmVnaXN0cnkuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NvbXBvbmVudC9lbGVtZW50UmVnaXN0cmF0b3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NvbXBvbmVudC9jb21wb25lbnRGYWN0b3J5LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9kYXRhQmluZC9pbnB1dEVsZW1lbnREYXRhQmluZGluZy5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvZGF0YUJpbmQvcHJveHlPYmplY3RGYWN0b3J5LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9uYXZpZ2F0aW9uL2hpc3RvcnkuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L25hdmlnYXRpb24vc3RhdGUuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2p1c3RyaWdodENvbmZpZy5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3RvcmFnZS9hcHBsaWNhdGlvblN0b3JhZ2UuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L3N0b3JhZ2Uvc2Vzc2lvblN0b3JhZ2UuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L3V0aWwvaHR0cFJlc3BvbnNlSGFuZGxlci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdXRpbC9odHRwQ2FsbEJ1aWxkZXIuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L3ZhbGlkYXRvci9hYnN0cmFjdFZhbGlkYXRvci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdmFsaWRhdG9yL2FuZFZhbGlkYXRvclNldC5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdmFsaWRhdG9yL3JlZ2V4VmFsaWRhdG9yLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC92YWxpZGF0b3IvZW1haWxWYWxpZGF0b3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L3ZhbGlkYXRvci9lcXVhbHNWYWxpZGF0b3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L3ZhbGlkYXRvci9vclZhbGlkYXRvclNldC5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdmFsaWRhdG9yL3Bhc3N3b3JkVmFsaWRhdG9yLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC92YWxpZGF0b3IvcmVxdWlyZWRWYWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQ29udGFpbmVyQnJpZGdlXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRhaW5lckJyaWRnZSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEVsZW1lbnRCeUlkKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbGV1IFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlVGV4dE5vZGUodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWUpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlRWxlbWVudChuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVTcGFjZSBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlRWxlbWVudE5TKG5hbWVTcGFjZSwgbmFtZSkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZVNwYWNlLCBuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmZXRjaCh1cmwsIHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuZmV0Y2godXJsLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN0b3JhZ2UgYnJpZGdlXHJcblxyXG4gICAgc3RhdGljIHNldFNlc3Npb25BdHRyaWJ1dGUoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZVNlc3Npb25BdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0U2Vzc2lvbkF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGFzU2Vzc2lvbkF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KSAhPT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0TG9jYWxBdHRyaWJ1dGUoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW1vdmVMb2NhbEF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGFzTG9jYWxBdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpICE9PSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRMb2NhbEF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZUVsZW1lbnQoaWQpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZEhlYWRlckVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbiAgICAgICAgaGVhZGVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYWRkQm9keUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIGxldCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdO1xyXG4gICAgICAgIGJvZHkuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBjbGFzcyBBdHRyaWJ1dGUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmlidXRlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZS52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZS5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE5hbWVzcGFjZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGUubmFtZTtcclxuICAgIH1cclxufSIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHsgWG1sRWxlbWVudCB9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7IE1hcCwgTG9nZ2VyLCBMaXN0IH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XG5pbXBvcnQgeyBBdHRyaWJ1dGUgfSBmcm9tIFwiLi9hdHRyaWJ1dGUuanNcIjtcbmltcG9ydCB7IENvbnRhaW5lckJyaWRnZSB9IGZyb20gXCIuLi9icmlkZ2UvY29udGFpbmVyQnJpZGdlLmpzXCI7XG5cbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJCYXNlRWxlbWVudFwiKTtcblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgZm9yIGVuY2xvc2luZyBhbiBIVE1MRWxlbWVudFxuICovXG5leHBvcnQgY2xhc3MgQmFzZUVsZW1lbnQge1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudHxzdHJpbmd8SFRNTEVsZW1lbnR9IHZhbHVlXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmFsdWUsIHBhcmVudCkge1xuICAgICAgICBcbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi9cbiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVNYXAgPSBudWxsO1xuICAgICAgICB0aGlzLmV2ZW50c0F0dGFjaGVkID0gbmV3IExpc3QoKTtcbiAgICAgICAgXG4gICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgWG1sRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jcmVhdGVGcm9tWG1sRWxlbWVudCh2YWx1ZSwgcGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmNyZWF0ZUVsZW1lbnQodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgTE9HLmVycm9yKFwiVW5yZWNvZ25pemVkIHZhbHVlIGZvciBFbGVtZW50XCIpO1xuICAgICAgICBMT0cuZXJyb3IodmFsdWUpO1xuICAgIH1cblxuICAgIGxvYWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQuYXR0cmlidXRlcyA9PT0gbnVsbCB8fCB0aGlzLmVsZW1lbnQuYXR0cmlidXRlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmF0dHJpYnV0ZU1hcCA9PT0gbnVsbCB8fCB0aGlzLmF0dHJpYnV0ZU1hcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU1hcC5zZXQodGhpcy5lbGVtZW50LmF0dHJpYnV0ZXNbaV0ubmFtZSxuZXcgQXR0cmlidXRlKHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYnJvd3NlciBFbGVtZW50IGZyb20gdGhlIFhtbEVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0geG1sRWxlbWVudFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudEVsZW1lbnRcbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICBjcmVhdGVGcm9tWG1sRWxlbWVudCh4bWxFbGVtZW50LCBwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgaWYoeG1sRWxlbWVudC5nZXROYW1lc3BhY2UoKSl7XG4gICAgICAgICAgICBlbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmNyZWF0ZUVsZW1lbnROUyh4bWxFbGVtZW50LmdldE5hbWVzcGFjZVVyaSgpLHhtbEVsZW1lbnQuZ2V0RnVsbE5hbWUoKSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgZWxlbWVudCA9IENvbnRhaW5lckJyaWRnZS5jcmVhdGVFbGVtZW50KHhtbEVsZW1lbnQuZ2V0TmFtZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZihwYXJlbnRFbGVtZW50ICYmIHBhcmVudEVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50LmdldE1hcHBlZEVsZW1lbnQoKS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB4bWxFbGVtZW50LmdldEF0dHJpYnV0ZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSx2YWx1ZSl7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksdmFsdWUuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBhIGZ1bmN0aW9uIHRvIGFuIGV2ZW50IGluIHRoZSBlbmNsb3NlZCBlbGVtZW50IGlmIG5vbmUgYWxscmVhZHkgZXhpc3RzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY3Rpb25QYXJhbVxuICAgICAqL1xuICAgIGF0dGFjaEV2ZW50KGV2ZW50VHlwZSwgZnVuY3Rpb25QYXJhbSkge1xuICAgICAgICBpZighdGhpcy5ldmVudHNBdHRhY2hlZC5jb250YWlucyhldmVudFR5cGUpKSB7XG4gICAgICAgICAgICBpZihldmVudFR5cGUuc3RhcnRzV2l0aChcIm9uXCIpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gZXZlbnRUeXBlLnN1YnN0cigyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZnVuY3Rpb25QYXJhbSk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50c0F0dGFjaGVkLmFkZChldmVudFR5cGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgTE9HLndhcm4oXCJFdmVudCAnXCIgKyBldmVudFR5cGUgKyBcIicgYWxscmVhZHkgYXR0YWNoZWQgZm9yIFwiICsgdGhpcy5lbGVtZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbmNsb3NlZCBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICBnZXRNYXBwZWRFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxuICAgIGdldEZ1bGxOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnRhZ05hbWU7XG4gICAgfVxuXG4gICAgZ2V0VG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICB9XG5cbiAgICBnZXRCb3R0b20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xuICAgIH1cblxuICAgIGdldExlZnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICB9XG5cbiAgICBnZXRSaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodDtcbiAgICB9XG5cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB9XG5cbiAgICBnZXRIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIH1cblxuICAgIGdldEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHRoaXMubG9hZEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlTWFwO1xuICAgIH1cblxuICAgIHNldEF0dHJpYnV0ZVZhbHVlKGtleSx2YWx1ZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSx2YWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0QXR0cmlidXRlVmFsdWUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgfVxuXG4gICAgY29udGFpbnNBdHRyaWJ1dGUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKGtleSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlQXR0cmlidXRlKGtleSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgfVxuXG4gICAgc2V0U3R5bGUoa2V5LHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZVtrZXldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0U3R5bGUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuc3R5bGVba2V5XTtcbiAgICB9XG5cbiAgICByZW1vdmVTdHlsZShrZXkpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlW2tleV0gPSBudWxsO1xuICAgIH1cblxuICAgIHNldChpbnB1dCkge1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCl7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVGhlIGVsZW1lbnQgaGFzIG5vIHBhcmVudCwgY2FuIG5vdCBzd2FwIGl0IGZvciB2YWx1ZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihpbnB1dC5nZXRNYXBwZWRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoaW5wdXQuZ2V0TWFwcGVkRWxlbWVudCgpLHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYoaW5wdXQgJiYgdHlwZW9mIGlucHV0LmdldFJvb3RFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChpbnB1dC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKSx0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gaW5wdXQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYodHlwZW9mIGlucHV0ID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChDb250YWluZXJCcmlkZ2UuY3JlYXRlVGV4dE5vZGUoaW5wdXQpLHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYoaW5wdXQgaW5zdGFuY2VvZiBUZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoaW5wdXQsdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihpbnB1dCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChpbnB1dCx0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNNb3VudGVkKCkge1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0Q2hpbGQoaW5wdXQpIHtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB0aGlzLmFkZENoaWxkKGlucHV0KTtcbiAgICB9XG5cbiAgICBhZGRDaGlsZChpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZ2V0TWFwcGVkRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGlucHV0LmdldE1hcHBlZEVsZW1lbnQoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0ICYmIHR5cGVvZiBpbnB1dC5nZXRSb290RWxlbWVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKENvbnRhaW5lckJyaWRnZS5jcmVhdGVUZXh0Tm9kZShpbnB1dCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByZXBlbmRDaGlsZChpbnB1dCkge1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0LmdldE1hcHBlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXQuZ2V0TWFwcGVkRWxlbWVudCgpLHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgJiYgdHlwZW9mIGlucHV0LmdldFJvb3RFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCksdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZShDb250YWluZXJCcmlkZ2UuY3JlYXRlVGV4dE5vZGUoaW5wdXQpLHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBUZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGlucHV0LHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGlucHV0LHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRhaW5lckJyaWRnZSB9IGZyb20gXCIuLi9icmlkZ2UvY29udGFpbmVyQnJpZGdlXCI7XHJcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvYmFzZUVsZW1lbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYW52YXNSb290IHtcclxuXHJcbiAgICBzdGF0aWMgcmVwbGFjZUNvbXBvbmVudChpZCwgY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIGJvZHlFbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICBib2R5RWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjb21wb25lbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCksIGJvZHlFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0Q29tcG9uZW50KGlkLCBjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgYm9keUVsZW1lbnQgPSBDb250YWluZXJCcmlkZ2UuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIGJvZHlFbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGJvZHlFbGVtZW50LmFwcGVuZENoaWxkKGNvbXBvbmVudC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKSwgYm9keUVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRDaGlsZENvbXBvbmVudChpZCwgY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIGJvZHlFbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICBib2R5RWxlbWVudC5hcHBlbmRDaGlsZChjb21wb25lbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRDaGlsZEVsZW1lbnQoaWQsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgYm9keUVsZW1lbnQgPSBDb250YWluZXJCcmlkZ2UuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIGJvZHlFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlRWxlbWVudChpZCkge1xyXG4gICAgICAgIENvbnRhaW5lckJyaWRnZS5yZW1vdmVFbGVtZW50KGlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhZGRIZWFkZXJFbGVtZW50KGVsZW1lbnQpIHtcclxuICAgICAgICBDb250YWluZXJCcmlkZ2UuYWRkSGVhZGVyRWxlbWVudChlbGVtZW50LmdldE1hcHBlZEVsZW1lbnQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYWRkQm9keUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIENvbnRhaW5lckJyaWRnZS5hZGRCb2R5RWxlbWVudChlbGVtZW50LmdldE1hcHBlZEVsZW1lbnQoKSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcbmltcG9ydCB7IFhtbEVsZW1lbnQgfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5cblxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIkFic3RyYWN0SW5wdXRFbGVtZW50XCIpO1xuXG4vKipcbiAqIFNoYXJlZCBwcm9wZXJ0aWVzIG9mIGlucHV0IGVsZW1lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBBYnN0cmFjdElucHV0RWxlbWVudCBleHRlbmRzIEJhc2VFbGVtZW50e1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBwYXJlbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgcGFyZW50KSB7XG4gICAgICAgIHN1cGVyKHZhbHVlLCBwYXJlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgdGhlIGlucHV0cyBuYW1lXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5uYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsdWUgb2YgaW5wdXRzIG5hbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHNldE5hbWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm5hbWUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBnaXZlbiBhbnkgcHJvY2Vzc2luZyBydWxlc1xuICAgICAqL1xuICAgIGdldFZhbHVlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEJhY2tpbmdWYWx1ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNvdXJjZSB2YWx1ZVxuICAgICAqL1xuICAgIGdldEJhY2tpbmdWYWx1ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnZhbHVlO1xuICAgIH1cblxuICAgIHNldFZhbHVlKHZhbHVlKXtcbiAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgIH1cblxuICAgIHNlbGVjdEFsbCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdCgpO1xuICAgIH1cblxuICAgIGVuYWJsZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZGlzYWJsZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7WG1sRWxlbWVudH0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHtBYnN0cmFjdElucHV0RWxlbWVudH0gZnJvbSBcIi4vYWJzdHJhY3RJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIFJhZGlvSW5wdXRFbGVtZW50IGV4dGVuZHMgQWJzdHJhY3RJbnB1dEVsZW1lbnR7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fSBlbGVtZW50IFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudCBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBwYXJlbnQpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudCwgcGFyZW50KTtcbiAgICB9XG5cbiAgICBzZXRDaGVja2VkKHZhbHVlKXtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNoZWNrZWQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBpc0NoZWNrZWQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jaGVja2VkO1xuICAgIH1cblxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICBpZih0aGlzLmlzQ2hlY2tlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7IFhtbEVsZW1lbnQgfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQgeyBBYnN0cmFjdElucHV0RWxlbWVudCB9IGZyb20gXCIuL2Fic3RyYWN0SW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDaGVja2JveElucHV0RWxlbWVudCBleHRlbmRzIEFic3RyYWN0SW5wdXRFbGVtZW50e1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0gZWxlbWVudCBcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBwYXJlbnQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgcGFyZW50KSB7XG4gICAgICAgIHN1cGVyKGVsZW1lbnQsIHBhcmVudCk7XG4gICAgfVxuXG4gICAgc2V0Q2hlY2tlZCh2YWx1ZSl7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jaGVja2VkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgaXNDaGVja2VkKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuY2hlY2tlZDtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgaWYodGhpcy5pc0NoZWNrZWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldFZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge1htbEVsZW1lbnR9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7QWJzdHJhY3RJbnB1dEVsZW1lbnR9IGZyb20gXCIuL2Fic3RyYWN0SW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBUZXh0SW5wdXRFbGVtZW50IGV4dGVuZHMgQWJzdHJhY3RJbnB1dEVsZW1lbnR7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fSBlbGVtZW50IFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudCBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBwYXJlbnQpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudCwgcGFyZW50KTtcbiAgICB9XG5cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtYbWxFbGVtZW50fSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQge0Fic3RyYWN0SW5wdXRFbGVtZW50fSBmcm9tIFwiLi9hYnN0cmFjdElucHV0RWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgQmFzZUVsZW1lbnQgfSBmcm9tIFwiLi9iYXNlRWxlbWVudC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgVGV4dGFyZWFJbnB1dEVsZW1lbnQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RWxlbWVudHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbEVsZW1lbnR9IGVsZW1lbnQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHBhcmVudCkge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBwYXJlbnQpO1xuICAgIH1cblxuICAgIGdldElubmVySFRNTCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmlubmVySFRNTDtcbiAgICB9XG5cbiAgICBzZXRJbm5lckhUTUwodmFsdWUpe1xuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgfVxuXG4gICAgYWRkQ2hpbGQoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIuYWRkQ2hpbGQoaW5wdXQpO1xuICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuZ2V0SW5uZXJIVE1MKCkpO1xuICAgIH1cblxuICAgIHByZXBlbmRDaGlsZChpbnB1dCkge1xuICAgICAgICBzdXBlci5wcmVwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICB0aGlzLnNldFZhbHVlKHRoaXMuZ2V0SW5uZXJIVE1MKCkpO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHtYbWxDZGF0YX0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHsgQmFzZUVsZW1lbnQgfSBmcm9tIFwiLi9iYXNlRWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgQ29udGFpbmVyQnJpZGdlIH0gZnJvbSBcIi4uL2JyaWRnZS9jb250YWluZXJCcmlkZ2UuanNcIjtcblxuZXhwb3J0IGNsYXNzIFRleHRub2RlRWxlbWVudCB7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxDZGF0YX0gdmFsdWUgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBwYXJlbnQpIHtcbiAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBYbWxDZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jcmVhdGVGcm9tWG1sQ2RhdGEodmFsdWUsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IENvbnRhaW5lckJyaWRnZS5jcmVhdGVUZXh0Tm9kZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVGcm9tWG1sQ2RhdGEoY2RhdGFFbGVtZW50LCBwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY2RhdGFFbGVtZW50LmdldFZhbHVlKCkpO1xuICAgICAgICBpZihwYXJlbnRFbGVtZW50ICE9PSBudWxsICYmIHBhcmVudEVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50LmdldE1hcHBlZEVsZW1lbnQoKS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgICB9XG5cbiAgICBnZXRNYXBwZWRFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge1htbEVsZW1lbnR9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7QWJzdHJhY3RJbnB1dEVsZW1lbnR9IGZyb20gXCIuL2Fic3RyYWN0SW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBTaW1wbGVFbGVtZW50IGV4dGVuZHMgQmFzZUVsZW1lbnR7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fSBlbGVtZW50IFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudCBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBwYXJlbnQpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudCwgcGFyZW50KTtcbiAgICB9XG5cbiAgICBnZXRJbm5lckhUTUwoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5pbm5lckhUTUw7XG4gICAgfVxuXG4gICAgc2V0SW5uZXJIVE1MKHZhbHVlKXtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IHZhbHVlO1xuICAgIH1cblxufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge1htbENkYXRhLFhtbEVsZW1lbnR9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7UmFkaW9JbnB1dEVsZW1lbnR9IGZyb20gXCIuL3JhZGlvSW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQge0NoZWNrYm94SW5wdXRFbGVtZW50fSBmcm9tIFwiLi9jaGVja2JveElucHV0RWxlbWVudC5qc1wiO1xuaW1wb3J0IHtUZXh0SW5wdXRFbGVtZW50fSBmcm9tIFwiLi90ZXh0SW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQge1RleHRhcmVhSW5wdXRFbGVtZW50fSBmcm9tIFwiLi90ZXh0YXJlYUlucHV0RWxlbWVudC5qc1wiO1xuaW1wb3J0IHtUZXh0bm9kZUVsZW1lbnR9IGZyb20gXCIuL3RleHRub2RlRWxlbWVudC5qc1wiO1xuaW1wb3J0IHtTaW1wbGVFbGVtZW50fSBmcm9tIFwiLi9zaW1wbGVFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBFbGVtZW50TWFwcGVyIHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICogXG4gICAgICogQHBhcmFtIHthbnl9IGlucHV0IFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudCBcbiAgICAgKi9cbiAgICBzdGF0aWMgbWFwKGlucHV0LCBwYXJlbnQpIHtcbiAgICAgICAgaWYgKEVsZW1lbnRNYXBwZXIubWFwc1RvUmFkaW8oaW5wdXQpKXsgcmV0dXJuIG5ldyBSYWRpb0lucHV0RWxlbWVudChpbnB1dCwgcGFyZW50KTsgfVxuICAgICAgICBpZiAoRWxlbWVudE1hcHBlci5tYXBzVG9DaGVja2JveChpbnB1dCkpeyByZXR1cm4gbmV3IENoZWNrYm94SW5wdXRFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb1N1Ym1pdChpbnB1dCkpeyByZXR1cm4gbmV3IFRleHRJbnB1dEVsZW1lbnQoaW5wdXQsIHBhcmVudCk7IH1cbiAgICAgICAgaWYgKEVsZW1lbnRNYXBwZXIubWFwc1RvVGV4dGFyZWEoaW5wdXQpKXsgcmV0dXJuIG5ldyBUZXh0YXJlYUlucHV0RWxlbWVudChpbnB1dCwgcGFyZW50KTsgfVxuICAgICAgICBpZiAoRWxlbWVudE1hcHBlci5tYXBzVG9UZXh0KGlucHV0KSl7IHJldHVybiBuZXcgVGV4dElucHV0RWxlbWVudChpbnB1dCwgcGFyZW50KTsgfVxuICAgICAgICBpZiAoRWxlbWVudE1hcHBlci5tYXBzVG9UZXh0bm9kZShpbnB1dCkpeyByZXR1cm4gbmV3IFRleHRub2RlRWxlbWVudChpbnB1dCwgcGFyZW50KTsgfVxuICAgICAgICBpZiAoRWxlbWVudE1hcHBlci5tYXBzVG9TaW1wbGUoaW5wdXQpKXsgcmV0dXJuIG5ldyBTaW1wbGVFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTWFwcGluZyB0byBzaW1wbGUgYnkgZGVmYXVsdCBcIiArIGlucHV0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVFbGVtZW50KGlucHV0LCBwYXJlbnQpO1xuICAgIH1cblxuICAgIHN0YXRpYyBtYXBzVG9SYWRpbyhpbnB1dCl7XG4gICAgICAgIHJldHVybiAoaW5wdXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50ICYmIGlucHV0LnR5cGUgPT09IFwicmFkaW9cIikgfHxcbiAgICAgICAgICAgIChpbnB1dCBpbnN0YW5jZW9mIFhtbEVsZW1lbnQgJiYgaW5wdXQuZ2V0TmFtZSgpID09PSBcImlucHV0XCIgJiYgaW5wdXQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKS5nZXRWYWx1ZSgpID09PSBcInJhZGlvXCIpO1xuICAgIH1cblxuICAgIHN0YXRpYyBtYXBzVG9DaGVja2JveChpbnB1dCl7XG4gICAgICAgIHJldHVybiAoaW5wdXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50ICYmIGlucHV0LnR5cGUgPT09IFwiY2hlY2tib3hcIikgfHxcbiAgICAgICAgICAgIChpbnB1dCBpbnN0YW5jZW9mIFhtbEVsZW1lbnQgJiYgaW5wdXQuZ2V0TmFtZSgpID09PSBcImlucHV0XCIgJiYgaW5wdXQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKS5nZXRWYWx1ZSgpID09PSBcImNoZWNrYm94XCIpO1xuICAgIH1cblxuICAgIHN0YXRpYyBtYXBzVG9TdWJtaXQoaW5wdXQpe1xuICAgICAgICByZXR1cm4gKGlucHV0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCAmJiBpbnB1dC50eXBlID09PSBcInN1Ym1pdFwiKSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCAmJiBpbnB1dC5nZXROYW1lKCkgPT09IFwiaW5wdXRcIiAmJiBpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwic3VibWl0XCIpO1xuICAgIH1cblxuICAgIHN0YXRpYyBtYXBzVG9UZXh0KGlucHV0KXtcbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT09IFwidGV4dFwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gXCJwYXNzd29yZFwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gXCJlbWFpbFwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gXCJkYXRlXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSBcInRpbWVcIikgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCAmJiBpbnB1dC5nZXROYW1lKCkgPT09IFwiaW5wdXRcIikge1xuICAgICAgICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKS5nZXRWYWx1ZSgpID09PSBcInRleHRcIikgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKS5nZXRWYWx1ZSgpID09PSBcInBhc3N3b3JkXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmKGlucHV0LmdldEF0dHJpYnV0ZShcInR5cGVcIikuZ2V0VmFsdWUoKSA9PT0gXCJlbWFpbFwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwiZGF0ZVwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwidGltZVwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHN0YXRpYyBtYXBzVG9UZXh0bm9kZShpbnB1dCl7XG4gICAgICAgIHJldHVybiAoaW5wdXQgaW5zdGFuY2VvZiBOb2RlICYmIGlucHV0Lm5vZGVUeXBlID09PSBcIlRFWFRfTk9ERVwiKSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sQ2RhdGEpO1xuICAgIH1cblxuICAgIHN0YXRpYyBtYXBzVG9UZXh0YXJlYShpbnB1dCl7XG4gICAgICAgIHJldHVybiAoaW5wdXQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50KSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCAmJiBpbnB1dC5nZXROYW1lKCkgPT09IFwidGV4dGFyZWFcIik7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1NpbXBsZShpbnB1dCl7XG4gICAgICAgIHJldHVybiAoaW5wdXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgfHxcbiAgICAgICAgICAgIChpbnB1dCBpbnN0YW5jZW9mIFhtbEVsZW1lbnQpO1xuICAgIH1cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtYbWxFbGVtZW50fSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQge0VsZW1lbnRNYXBwZXJ9IGZyb20gXCIuLi9lbGVtZW50L2VsZW1lbnRNYXBwZXIuanNcIjtcblxuZXhwb3J0IGNsYXNzIEhUTUx7XG5cbiAgICBzdGF0aWMgY3VzdG9tKGVsZW1lbnROYW1lKXtcbiAgICAgICAgdmFyIHhtbEVsZW1lbnQgPSBuZXcgWG1sRWxlbWVudChlbGVtZW50TmFtZSk7XG4gICAgICAgIHJldHVybiBFbGVtZW50TWFwcGVyLm1hcCh4bWxFbGVtZW50KTtcbiAgICB9XG5cbiAgICBzdGF0aWMgYXBwbHlTdHlsZXMoZWxlbWVudCxjbGFzc1ZhbHVlLHN0eWxlVmFsdWUpe1xuICAgICAgICBpZihjbGFzc1ZhbHVlICE9PSBudWxsKXtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlVmFsdWUoXCJjbGFzc1wiLGNsYXNzVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHN0eWxlVmFsdWUgIT09IG51bGwpe1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVWYWx1ZShcInN0eWxlXCIsc3R5bGVWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgYShuYW1lLGhyZWYsY2xhc3NWYWx1ZSxzdHlsZVZhbHVlKXtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBIVE1MLmN1c3RvbShcImFcIik7XG4gICAgICAgIGVsZW1lbnQuYWRkQ2hpbGQobmFtZSk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlVmFsdWUoXCJocmVmXCIsaHJlZik7XG4gICAgICAgIEhUTUwuYXBwbHlTdHlsZXMoZWxlbWVudCxjbGFzc1ZhbHVlLHN0eWxlVmFsdWUpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBNYXAsIExpc3QsIExvZ2dlciB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBDYW52YXNSb290IH0gZnJvbSBcIi4vY2FudmFzUm9vdFwiO1xyXG5pbXBvcnQgeyBIVE1MIH0gZnJvbSBcIi4uL2h0bWwvaHRtbFwiO1xyXG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50L2Jhc2VFbGVtZW50XCI7XHJcbmltcG9ydCB7IFRleHRub2RlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50L3RleHRub2RlRWxlbWVudFwiO1xyXG5cclxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIkNhbnZhc1N0eWxlc1wiKTtcclxuXHJcbmNvbnN0IHN0eWxlcyA9IG5ldyBNYXAoKTtcclxuY29uc3QgZW5hYmxlZFN0eWxlcyA9IG5ldyBMaXN0KCk7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FudmFzU3R5bGVzIHtcclxuXHJcbiAgICBzdGF0aWMgc2V0U3R5bGUobmFtZSwgc291cmNlKSB7XHJcbiAgICAgICAgaWYoc3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHN0eWxlcy5nZXQobmFtZSkuc2V0Q2hpbGQobmV3IFRleHRub2RlRWxlbWVudChzb3VyY2UuZ2V0U3R5bGVzU291cmNlKCkpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvKiogQHR5cGUge0Jhc2VFbGVtZW50fSAqL1xyXG4gICAgICAgICAgICBsZXQgc3R5bGVFbGVtZW50ID0gSFRNTC5jdXN0b20oXCJzdHlsZVwiKTtcclxuICAgICAgICAgICAgc3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZVZhbHVlKFwiaWRcIixuYW1lKTtcclxuICAgICAgICAgICAgc3R5bGVFbGVtZW50LnNldENoaWxkKG5ldyBUZXh0bm9kZUVsZW1lbnQoc291cmNlLmdldFN0eWxlc1NvdXJjZSgpKSk7XHJcbiAgICAgICAgICAgIHN0eWxlcy5zZXQobmFtZSwgc3R5bGVFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZVN0eWxlKG5hbWUpIHtcclxuICAgICAgICBpZihlbmFibGVkU3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIENhbnZhc1N0eWxlcy5kaXNhYmxlU3R5bGUobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0eWxlcy5yZW1vdmUobmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGRpc2FibGVTdHlsZShuYW1lKSB7XHJcbiAgICAgICAgaWYoIXN0eWxlcy5jb250YWlucyhuYW1lKSkge1xyXG4gICAgICAgICAgICBMT0cuZXJyb3IoXCJTdHlsZSBkb2VzIG5vdCBleGlzdDogXCIgKyBuYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihlbmFibGVkU3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIGVuYWJsZWRTdHlsZXMucmVtb3ZlKG5hbWUpO1xyXG4gICAgICAgICAgICBDYW52YXNSb290LnJlbW92ZUVsZW1lbnQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBlbmFibGVTdHlsZShuYW1lKSB7XHJcbiAgICAgICAgaWYoIXN0eWxlcy5jb250YWlucyhuYW1lKSkge1xyXG4gICAgICAgICAgICBMT0cuZXJyb3IoXCJTdHlsZSBkb2VzIG5vdCBleGlzdDogXCIgKyBuYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighZW5hYmxlZFN0eWxlcy5jb250YWlucyhuYW1lKSkge1xyXG4gICAgICAgICAgICBlbmFibGVkU3R5bGVzLmFkZChuYW1lKTtcclxuICAgICAgICAgICAgQ2FudmFzUm9vdC5hZGRIZWFkZXJFbGVtZW50KHN0eWxlcy5nZXQobmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbnRhaW5lckJyaWRnZSB9IGZyb20gXCIuLi9icmlkZ2UvY29udGFpbmVyQnJpZGdlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2xpZW50IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldCh1cmwpe1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSAge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICBtb2RlOiAnY29ycycsIC8vIG5vLWNvcnMsIGNvcnMsICpzYW1lLW9yaWdpblxyXG4gICAgICAgICAgICByZWRpcmVjdDogJ2ZvbGxvdycgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvclxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmZldGNoKHVybC50b1N0cmluZygpLHBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcG9zdCh1cmwsIGRhdGEpe1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSAge1xyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSwgLy8gbXVzdCBtYXRjaCAnQ29udGVudC1UeXBlJyBoZWFkZXJcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgXCJ1c2VyLWFnZW50XCI6IFwiTW96aWxsYS80LjAgTUROIEV4YW1wbGVcIixcclxuICAgICAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLCAvLyBuby1jb3JzLCBjb3JzLCAqc2FtZS1vcmlnaW5cclxuICAgICAgICAgICAgcmVkaXJlY3Q6IFwiZm9sbG93XCIsIC8vIG1hbnVhbCwgKmZvbGxvdywgZXJyb3JcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5mZXRjaCh1cmwudG9TdHJpbmcoKSwgcGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwdXQodXJsLCBkYXRhKXtcclxuICAgICAgICB2YXIgcGFyYW1zID0gIHtcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksIC8vIG11c3QgbWF0Y2ggJ0NvbnRlbnQtVHlwZScgaGVhZGVyXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsIFxyXG4gICAgICAgICAgICBtb2RlOiAnY29ycycsIC8vIG5vLWNvcnMsIGNvcnMsICpzYW1lLW9yaWdpblxyXG4gICAgICAgICAgICByZWRpcmVjdDogJ2ZvbGxvdycsIC8vIG1hbnVhbCwgKmZvbGxvdywgZXJyb3JcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ3VzZXItYWdlbnQnOiAnTW96aWxsYS80LjAgTUROIEV4YW1wbGUnLFxyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UuZmV0Y2godXJsLnRvU3RyaW5nKCksIHBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcGF0Y2godXJsLCBkYXRhKXtcclxuICAgICAgICB2YXIgcGFyYW1zID0gIHtcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksIC8vIG11c3QgbWF0Y2ggJ0NvbnRlbnQtVHlwZScgaGVhZGVyXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJywgXHJcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJywgLy8gbm8tY29ycywgY29ycywgKnNhbWUtb3JpZ2luXHJcbiAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JywgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvclxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzQuMCBNRE4gRXhhbXBsZScsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5mZXRjaCh1cmwudG9TdHJpbmcoKSwgcGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZGVsZXRlKHVybCl7XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9ICB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJywgLy8gbm8tY29ycywgY29ycywgKnNhbWUtb3JpZ2luXHJcbiAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JyAvLyBtYW51YWwsICpmb2xsb3csIGVycm9yXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UuZmV0Y2godXJsLnRvU3RyaW5nKCksIHBhcmFtcyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBNYXAgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQmFzZUVsZW1lbnQgfSBmcm9tIFwiLi4vZWxlbWVudC9iYXNlRWxlbWVudFwiO1xyXG5cclxuLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb21wb25lbnRJbmRleCBcclxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHJvb3RFbGVtZW50IFxyXG4gICAgICogQHBhcmFtIHtNYXB9IGVsZW1lbnRNYXAgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudEluZGV4LCByb290RWxlbWVudCwgZWxlbWVudE1hcCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SW5kZXggPSBjb21wb25lbnRJbmRleDtcclxuICAgICAgICB0aGlzLmVsZW1lbnRNYXAgPSBlbGVtZW50TWFwO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQgPSByb290RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoKSB7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtCYXNlRWxlbWVudH1cclxuICAgICAqL1xyXG4gICAgZ2V0Um9vdEVsZW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29tcG9uZW50SW5kZXgoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtCYXNlRWxlbWVudH1cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudE1hcC5nZXQoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCAoaWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50TWFwLmdldChpZCkuc2V0KHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhckNoaWxkcmVuKGlkKXtcclxuICAgICAgICB0aGlzLmVsZW1lbnRNYXAuZ2V0KGlkKS5jbGVhcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENoaWxkIChpZCwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRNYXAuZ2V0KGlkKS5zZXRDaGlsZCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2hpbGQgKGlkLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcC5nZXQoaWQpLmFkZENoaWxkKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcmVwZW5kQ2hpbGQgKGlkLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcC5nZXQoaWQpLnByZXBlbmRDaGlsZCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtMaXN0LE1hcH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XG5cbmV4cG9ydCBjbGFzcyBVcmx7XG5cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSl7XG4gICAgICAgIHRoaXMucHJvdG9jb2wgPSBudWxsO1xuICAgICAgICB0aGlzLmhvc3QgPSBudWxsO1xuICAgICAgICB0aGlzLnBvcnQgPSBudWxsO1xuICAgICAgICB0aGlzLnBhdGhMaXN0ID0gbmV3IExpc3QoKTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYm9va21hcmsgPSBudWxsO1xuICAgICAgICBpZih2YWx1ZSA9PT0gbnVsbCl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbWFpbmluZyA9IHRoaXMuZGV0ZXJtaW5lUHJvdG9jb2wodmFsdWUpO1xuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMucHJvdG9jb2wgIT09IG51bGwpe1xuICAgICAgICAgICAgcmVtYWluaW5nID0gdGhpcy5kZXRlcm1pbmVIb3N0KHJlbWFpbmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYocmVtYWluaW5nID09PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmhvc3QgIT09IG51bGwpe1xuICAgICAgICAgICAgcmVtYWluaW5nID0gdGhpcy5kZXRlcm1pbmVQb3J0KHJlbWFpbmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYocmVtYWluaW5nID09PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZW1haW5pbmcgPSB0aGlzLmRldGVybWluZVBhdGgocmVtYWluaW5nKTtcbiAgICAgICAgaWYocmVtYWluaW5nID09PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZW1haW5pbmcgPSB0aGlzLmRldGVybWluZVBhcmFtZXRlcnMocmVtYWluaW5nKTtcbiAgICAgICAgaWYocmVtYWluaW5nID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRldGVybWluZUJvb2ttYXJrKHJlbWFpbmluZyk7XG4gICAgfVxuXG4gICAgZ2V0UHJvdG9jb2woKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvdG9jb2w7XG4gICAgfVxuXG4gICAgZ2V0SG9zdCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0O1xuICAgIH1cblxuICAgIGdldFBvcnQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9ydDtcbiAgICB9XG5cbiAgICBnZXRQYXRoTGlzdCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoTGlzdDtcbiAgICB9XG5cbiAgICBnZXRQYXRoKGluZGV4KXtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aExpc3QuZ2V0KGluZGV4KTtcbiAgICB9XG5cbiAgICBjbGVhclBhdGhMaXN0KCl7XG4gICAgICAgIHRoaXMucGF0aExpc3QgPSBuZXcgTGlzdCgpO1xuICAgIH1cblxuICAgIGdldFBhcmFtZXRlck1hcCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJNYXA7XG4gICAgfVxuXG4gICAgY2xlYXJQYXJhbWV0ZXJNQXAoKXtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuXG4gICAgZ2V0UGFyYW1ldGVyKGtleSl7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlck1hcC5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICBzZXRQYXJhbWV0ZXIoa2V5LHZhbHVlKXtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAuc2V0KGtleSx2YWx1ZSk7XG4gICAgfVxuXG4gICAgc2V0Qm9va21hcmsoYm9va21hcmspe1xuICAgICAgICB0aGlzLmJvb2ttYXJrID0gYm9va21hcms7XG4gICAgfVxuXG4gICAgc2V0UGF0aCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRldGVybWluZVBhdGgodmFsdWUpO1xuICAgIH1cblxuICAgIHNldFF1ZXJ5U3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucGFyYW1ldGVyTWFwID0gdGhpcy5kZXRlcm1pbmVQYXJhbWV0ZXJzKHZhbHVlKTtcbiAgICB9XG5cbiAgICBnZXRCb29rbWFyaygpe1xuICAgICAgICByZXR1cm4gdGhpcy5ib29rbWFyaztcbiAgICB9XG5cbiAgICBkZXRlcm1pbmVQcm90b2NvbCh2YWx1ZSl7XG4gICAgICAgIGlmKHZhbHVlLmluZGV4T2YoXCIvL1wiKSA9PT0gLTEpe1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJ0cyA9IHZhbHVlLnNwbGl0KFwiLy9cIik7XG4gICAgICAgIGlmKHBhcnRzWzBdLmluZGV4T2YoXCIvXCIpICE9PSAtMSl7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IHBhcnRzWzBdO1xuICAgICAgICBpZihwYXJ0cy5sZW5ndGg9PTEpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UocGFydHNbMF0gKyBcIi8vXCIsXCJcIik7XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5lSG9zdCh2YWx1ZSl7XG4gICAgICAgIHZhciBwYXJ0cyA9IHZhbHVlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgdmFyIGhvc3RQYXJ0ID0gcGFydHNbMF07XG4gICAgICAgIGlmKGhvc3RQYXJ0LmluZGV4T2YoXCI6XCIpICE9PSAtMSl7XG4gICAgICAgICAgICBob3N0UGFydCA9IGhvc3RQYXJ0LnNwbGl0KFwiOlwiKVswXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhvc3QgPSBob3N0UGFydDtcbiAgICAgICAgaWYocGFydHMubGVuZ3RoID4gMSl7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShob3N0UGFydCxcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBkZXRlcm1pbmVQb3J0KHZhbHVlKXtcbiAgICAgICAgaWYoIXZhbHVlLnN0YXJ0c1dpdGgoXCI6XCIpKXtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcG9ydFBhcnQgPSB2YWx1ZS5zcGxpdChcIi9cIilbMF0uc3Vic3RyaW5nKDEpO1xuICAgICAgICB0aGlzLnBvcnQgPSBwb3J0UGFydDtcbiAgICAgICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoXCI6XCIgKyBwb3J0UGFydCxcIlwiKTtcbiAgICB9XG5cbiAgICBkZXRlcm1pbmVQYXRoKHZhbHVlKXtcbiAgICAgICAgdmFyIHJlbWFpbmluZyA9IHZhbHVlO1xuICAgICAgICBpZih2YWx1ZS5pbmRleE9mKFwiP1wiKSAhPT0gLTEpe1xuICAgICAgICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoXCI/XCIpO1xuICAgICAgICAgICAgaWYocGFydHMubGVuZ3RoID4gMSl7XG4gICAgICAgICAgICAgICAgcmVtYWluaW5nID0gdmFsdWUuc3Vic3RyaW5nKHZhbHVlLmluZGV4T2YoXCI/XCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlID0gcGFydHNbMF07XG4gICAgICAgIH0gZWxzZSBpZih2YWx1ZS5pbmRleE9mKFwiI1wiKSAhPT0gLTEpe1xuICAgICAgICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoXCIjXCIpO1xuICAgICAgICAgICAgaWYocGFydHMubGVuZ3RoID4gMSl7XG4gICAgICAgICAgICAgICAgcmVtYWluaW5nID0gdmFsdWUuc3Vic3RyaW5nKHZhbHVlLmluZGV4T2YoXCIjXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlID0gcGFydHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYodmFsdWUuc3RhcnRzV2l0aChcIi9cIikpe1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhdGhQYXJ0cyA9IG5ldyBMaXN0KHZhbHVlLnNwbGl0KFwiL1wiKSk7XG4gICAgICAgIHRoaXMucGF0aExpc3QgPSBuZXcgTGlzdCgpO1xuICAgICAgICBwYXRoUGFydHMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSxwYXJlbnQpe1xuICAgICAgICAgICAgcGFyZW50LnBhdGhMaXN0LmFkZChkZWNvZGVVUkkodmFsdWUpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LHRoaXMpO1xuICAgICAgICByZXR1cm4gcmVtYWluaW5nO1xuICAgIH1cblxuICAgIGRldGVybWluZVBhcmFtZXRlcnModmFsdWUpe1xuICAgICAgICB2YXIgcmVtYWluaW5nID0gdmFsdWU7XG4gICAgICAgIGlmKHZhbHVlLmluZGV4T2YoXCI/XCIpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKHZhbHVlLmluZGV4T2YoXCI/XCIpKzEpO1xuICAgICAgICBpZih2YWx1ZS5pbmRleE9mKFwiI1wiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJlbWFpbmluZyA9IHZhbHVlLnN1YnN0cmluZyh2YWx1ZS5pbmRleE9mKFwiI1wiKSk7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygwLHZhbHVlLmluZGV4T2YoXCIjXCIpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFydExpc3QgPSBuZXcgTGlzdCh2YWx1ZS5zcGxpdChcIiZcIikpO1xuICAgICAgICB2YXIgcGFyYW1ldGVyTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBwYXJ0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLHBhcmVudCl7XG4gICAgICAgICAgICB2YXIga2V5VmFsdWUgPSB2YWx1ZS5zcGxpdChcIj1cIik7XG4gICAgICAgICAgICBpZihrZXlWYWx1ZS5sZW5ndGggPj0gMil7XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyTWFwLnNldChkZWNvZGVVUkkoa2V5VmFsdWVbMF0pLGRlY29kZVVSSShrZXlWYWx1ZVsxXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sdGhpcyk7XG4gICAgICAgIHRoaXMucGFyYW1ldGVyTWFwID0gcGFyYW1ldGVyTWFwO1xuICAgICAgICByZXR1cm4gcmVtYWluaW5nO1xuICAgIH1cblxuICAgIGRldGVybWluZUJvb2ttYXJrKHZhbHVlKXtcbiAgICAgICAgaWYodmFsdWUuaW5kZXhPZihcIiNcIikgIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmJvb2ttYXJrID0gdmFsdWUuc3Vic3RyaW5nKHZhbHVlLmluZGV4T2YoXCIjXCIpKzEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9TdHJpbmcoKXtcbiAgICAgICAgdmFyIHZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYodGhpcy5wcm90b2NvbCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgdGhpcy5wcm90b2NvbCArIFwiLy9cIjtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmhvc3QgIT09IG51bGwpe1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSArIHRoaXMuaG9zdDtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLnBvcnQgIT09IG51bGwpe1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSArIFwiOlwiICsgdGhpcy5wb3J0O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXRoTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHBhdGhQYXJ0LHBhcmVudCl7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgXCIvXCIgKyBwYXRoUGFydDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LHRoaXMpO1xuXG4gICAgICAgIHZhciBmaXJzdFBhcmFtZXRlciA9IHRydWU7XG4gICAgICAgIHRoaXMucGFyYW1ldGVyTWFwLmZvckVhY2goZnVuY3Rpb24ocGFyYW1ldGVyS2V5LHBhcmFtZXRlclZhbHVlLHBhcmVudCl7XG4gICAgICAgICAgICBpZihmaXJzdFBhcmFtZXRlcil7XG4gICAgICAgICAgICAgICAgZmlyc3RQYXJhbWV0ZXI9ZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSArIFwiP1wiO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSArIFwiJlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSArIGVuY29kZVVSSShwYXJhbWV0ZXJLZXkpICsgXCI9XCIgKyBlbmNvZGVVUkkocGFyYW1ldGVyVmFsdWUpO1xuICAgICAgICB9LHRoaXMpO1xuICAgICAgICBpZih0aGlzLmJvb2ttYXJrICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgXCIjXCIgKyB0aGlzLmJvb2ttYXJrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbn1cbiIsImV4cG9ydCBjbGFzcyBTdHlsZXN7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHlsZXNTb3VyY2UgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHN0eWxlc1NvdXJjZSl7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xyXG4gICAgICAgIHRoaXMuc3R5bGVzU291cmNlID0gc3R5bGVzU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgZ2V0U3R5bGVzU291cmNlKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzU291cmNlO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXHJcblxyXG5pbXBvcnQge01hcCwgTG9nZ2VyLCBPYmplY3RGdW5jdGlvbn0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IENsaWVudCB9IGZyb20gXCIuLi9jbGllbnQvY2xpZW50LmpzXCI7XHJcbmltcG9ydCB7IFVybCB9IGZyb20gXCIuLi91dGlsL3VybC5qc1wiO1xyXG5pbXBvcnQgeyBTdHlsZXMgfSBmcm9tIFwiLi9zdHlsZXMuanNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJTdHlsZXNSZWdpc3RyeVwiKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdHlsZXNSZWdpc3RyeSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICAvKiogQHR5cGUge01hcH0gKi9cclxuICAgICAgICB0aGlzLnN0eWxlc01hcCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtNYXB9ICovXHJcbiAgICAgICAgdGhpcy5zdHlsZXNVcmxNYXAgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7aW50ZWdlcn0gKi9cclxuICAgICAgICB0aGlzLnN0eWxlc1F1ZXVlU2l6ZSA9IDA7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0RnVuY3Rpb259ICovXHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICogQHBhcmFtIHtTdHlsZXN9IHN0eWxlcyBcclxuICAgICAqIEBwYXJhbSB7VXJsfSB1cmwgXHJcbiAgICAgKi9cclxuICAgIHNldChuYW1lLHN0eWxlcyx1cmwpe1xyXG4gICAgICAgIGlmKHVybCAhPT0gdW5kZWZpbmVkICYmIHVybCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlc1VybE1hcC5zZXQobmFtZSwgdXJsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdHlsZXNNYXAuc2V0KG5hbWUsIHN0eWxlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICovXHJcbiAgICBnZXQobmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzTWFwLmdldChuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKi9cclxuICAgIGNvbnRhaW5zKG5hbWUpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlc01hcC5jb250YWlucyhuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtPYmplY3RGdW5jdGlvbn0gY2FsbGJhY2sgXHJcbiAgICAgKi9cclxuICAgIGRvbmUoY2FsbGJhY2spe1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgICAgICB0aGlzLmRvQ2FsbGJhY2sodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3R5bGVzUmVnaXN0cnl9IHJlZ2lzdHJ5IFxyXG4gICAgICovXHJcbiAgICBkb0NhbGxiYWNrKHJlZ2lzdHJ5KXtcclxuICAgICAgICBpZih0bW8uY2FsbGJhY2sgIT09IG51bGwgJiYgcmVnaXN0cnkuY2FsbGJhY2sgIT09IHVuZGVmaW5lZCAgJiYgcmVnaXN0cnkuc3R5bGVzUXVldWVTaXplID09PSByZWdpc3RyeS5zdHlsZXNNYXAuc2l6ZSgpKXtcclxuICAgICAgICAgICAgdmFyIHRlbXBDYWxsYmFjayA9IHJlZ2lzdHJ5LmNhbGxiYWNrO1xyXG4gICAgICAgICAgICByZWdpc3RyeS5jYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgICAgIHRlbXBDYWxsYmFjay5jYWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqIEBwYXJhbSB7VXJsfSB1cmwgXHJcbiAgICAgKi9cclxuICAgICBsb2FkKG5hbWUsIHVybCkge1xyXG4gICAgICAgIHRoaXMuc3R5bGVzUXVldWVTaXplICsrO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBDbGllbnQuZ2V0KHVybCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKCFyZXNwb25zZS5vayl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJVbmFibGUgdG8gbG9hZCBzdHlsZXMgZm9yIFwiICsgbmFtZSArIFwiIGF0IFwiICsgdXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldChuYW1lLG5ldyBTdHlsZXModGV4dCksdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvQ2FsbGJhY2sodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtNYXB9IG5hbWVVcmxNYXAgXHJcbiAgICAgKi9cclxuICAgIGdldFN0eWxlc0xvYWRlZFByb21pc2UobmFtZVVybE1hcCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdmFyIGxvYWRlZCA9IDA7XHJcbiAgICAgICAgICAgIGlmKCFuYW1lVXJsTWFwIHx8IG5hbWVVcmxNYXAuc2l6ZSgpID09IDApIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuYW1lVXJsTWFwLmZvckVhY2goKGtleSwgdmFsdWUsIHBhcmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5jb250YWlucyhrZXkpKXtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkZWQgKys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobG9hZGVkID09IG5hbWVVcmxNYXAuc2l6ZSgpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmVhayBsb29wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByaXZhdGVMb2FkKGtleSwgbmV3IFVybCh2YWx1ZSkpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkICsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsb2FkZWQgPT0gbmFtZVVybE1hcC5zaXplKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnJlYWsgbG9vcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJyZWFrIGxvb3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sdGhpcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICogQHBhcmFtIHtVcmx9IHVybCBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZUxvYWQobmFtZSwgdXJsKSB7XHJcbiAgICAgICAgTE9HLmluZm8oXCJMb2FkaW5nIHN0eWxlcyBcIiArIG5hbWUgKyBcIiBhdCBcIiArIHVybC50b1N0cmluZygpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIENsaWVudC5nZXQodXJsKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoIXJlc3BvbnNlLm9rKXtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2FkIHN0eWxlcyBmb3IgXCIgKyBuYW1lICsgXCIgYXQgXCIgKyB1cmw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS50ZXh0KCkudGhlbigodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KG5hbWUsbmV3IFN0eWxlcyh0ZXh0KSx1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuZXhwb3J0IGNsYXNzIFRlbXBsYXRle1xuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlU291cmNlIFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlU291cmNlKXtcblxuICAgICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZVNvdXJjZSA9IHRlbXBsYXRlU291cmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0VGVtcGxhdGVTb3VyY2UoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVTb3VyY2U7XG4gICAgfVxuXG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7TWFwLCBMb2dnZXIsIE9iamVjdEZ1bmN0aW9ufSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcbmltcG9ydCB7VGVtcGxhdGV9IGZyb20gXCIuL3RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwiLi4vY2xpZW50L2NsaWVudC5qc1wiO1xuaW1wb3J0IHsgVXJsIH0gZnJvbSBcIi4uL3V0aWwvdXJsLmpzXCI7XG5cbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJUZW1wbGF0ZVJlZ2lzdHJ5XCIpO1xuXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVSZWdpc3RyeSB7XG5cbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICAvKiogQHR5cGUge01hcH0gKi9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZU1hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvKiogQHR5cGUge01hcH0gKi9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZVVybE1hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvKiogQHR5cGUge2ludGVnZXJ9ICovXG4gICAgICAgIHRoaXMudGVtcGxhdGVRdWV1ZVNpemUgPSAwO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0RnVuY3Rpb259ICovXG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBudWxsO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgICAgICB0aGlzLmxhbmd1YWdlUHJlZml4ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2VQcmVmaXggXG4gICAgICovXG4gICAgc2V0TGFuZ3VhZ2VQcmVmaXgobGFuZ3VhZ2VQcmVmaXgpIHtcbiAgICAgICAgdGhpcy5sYW5ndWFnZVByZWZpeCA9IGxhbmd1YWdlUHJlZml4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGV9IHRlbXBsYXRlIFxuICAgICAqIEBwYXJhbSB7VXJsfSB1cmwgXG4gICAgICovXG4gICAgc2V0KG5hbWUsdGVtcGxhdGUsdXJsKXtcbiAgICAgICAgaWYodXJsICE9PSB1bmRlZmluZWQgJiYgdXJsICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlVXJsTWFwLnNldChuYW1lLCB1cmwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGVtcGxhdGVNYXAuc2V0KG5hbWUsIHRlbXBsYXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcbiAgICAgKi9cbiAgICBnZXQobmFtZSl7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlTWFwLmdldChuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcbiAgICAgKi9cbiAgICBjb250YWlucyhuYW1lKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVNYXAuY29udGFpbnMobmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtPYmplY3RGdW5jdGlvbn0gY2FsbGJhY2sgXG4gICAgICovXG4gICAgZG9uZShjYWxsYmFjayl7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5kb0NhbGxiYWNrKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGVSZWdpc3RyeX0gcmVnaXN0cnkgXG4gICAgICovXG4gICAgZG9DYWxsYmFjayhyZWdpc3RyeSl7XG4gICAgICAgIGlmKHRtby5jYWxsYmFjayAhPT0gbnVsbCAmJiByZWdpc3RyeS5jYWxsYmFjayAhPT0gdW5kZWZpbmVkICAmJiByZWdpc3RyeS50ZW1wbGF0ZVF1ZXVlU2l6ZSA9PT0gcmVnaXN0cnkudGVtcGxhdGVNYXAuc2l6ZSgpKXtcbiAgICAgICAgICAgIHZhciB0ZW1wQ2FsbGJhY2sgPSByZWdpc3RyeS5jYWxsYmFjaztcbiAgICAgICAgICAgIHJlZ2lzdHJ5LmNhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgICAgIHRlbXBDYWxsYmFjay5jYWxsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcbiAgICAgKiBAcGFyYW0ge1VybH0gdXJsIFxuICAgICAqL1xuICAgIGxvYWQobmFtZSwgdXJsKSB7XG4gICAgICAgIGlmKHRoaXMubGFuZ3VhZ2VQcmVmaXggIT09IG51bGwpIHtcbiAgICAgICAgICAgIHVybC5nZXRQYXRoTGlzdCgpLnNldExhc3QoXG4gICAgICAgICAgICAgICAgdGhpcy5sYW5ndWFnZVByZWZpeCArIFwiLlwiICtcbiAgICAgICAgICAgICAgICB1cmwuZ2V0UGF0aExpc3QoKS5nZXRMYXN0KClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZW1wbGF0ZVF1ZXVlU2l6ZSArKztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBDbGllbnQuZ2V0KHVybCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZighcmVzcG9uc2Uub2spe1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2FkIHRlbXBsYXRlIGZvciBcIiArIG5hbWUgKyBcIiBhdCBcIiArIHVybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQobmFtZSxuZXcgVGVtcGxhdGUodGV4dCksdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb0NhbGxiYWNrKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtNYXB9IG5hbWVVcmxNYXAgXG4gICAgICovXG4gICAgZ2V0VGVtcGxhdGVzTG9hZGVkUHJvbWlzZShuYW1lVXJsTWFwKSB7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdmFyIGxvYWRlZCA9IDA7XG4gICAgICAgICAgICBpZighbmFtZVVybE1hcCB8fCBuYW1lVXJsTWFwLnNpemUoKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5hbWVVcmxNYXAuZm9yRWFjaCgoa2V5LCB2YWx1ZSwgcGFyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jb250YWlucyhrZXkpKXtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkICsrO1xuICAgICAgICAgICAgICAgICAgICBpZihsb2FkZWQgPT0gbmFtZVVybE1hcC5zaXplKCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnJlYWsgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnByaXZhdGVMb2FkKGtleSwgbmV3IFVybCh2YWx1ZSkpXG5cbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkICsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYobG9hZGVkID09IG5hbWVVcmxNYXAuc2l6ZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnJlYWsgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmVhayBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXG4gICAgICogQHBhcmFtIHtVcmx9IHVybCBcbiAgICAgKi9cbiAgICBwcml2YXRlTG9hZChuYW1lLCB1cmwpIHtcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZVByZWZpeCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdXJsLmdldFBhdGhMaXN0KCkuc2V0TGFzdChcbiAgICAgICAgICAgICAgICB0aGlzLmxhbmd1YWdlUHJlZml4ICsgXCIuXCIgK1xuICAgICAgICAgICAgICAgIHVybC5nZXRQYXRoTGlzdCgpLmdldExhc3QoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBMT0cuaW5mbyhcIkxvYWRpbmcgdGVtcGxhdGUgXCIgKyBuYW1lICsgXCIgYXQgXCIgKyB1cmwudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2xzZSkgPT4ge1xuICAgICAgICAgICAgQ2xpZW50LmdldCh1cmwpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoIXJlc3BvbnNlLm9rKXtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJVbmFibGUgdG8gbG9hZCB0ZW1wbGF0ZSBmb3IgXCIgKyBuYW1lICsgXCIgYXQgXCIgKyB1cmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnRleHQoKS50aGVuKCh0ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KG5hbWUsbmV3IFRlbXBsYXRlKHRleHQpLHVybCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwiaW1wb3J0IHsgTG9nZ2VyLCBNYXAgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIm1pbmRpX3YxXCI7XHJcbmltcG9ydCB7IFRlbXBsYXRlUmVnaXN0cnkgfSBmcm9tIFwiLi90ZW1wbGF0ZVJlZ2lzdHJ5LmpzXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiVGVtcGxhdGVQb3N0Q29uZmlnXCIpO1xyXG5cclxuLyoqXHJcbiAqIFRvIGJlIGFkZGVkIHRvIG1pbmRpIGFzIGEgc2luZ2xldG9uLiBXaWxsIHNjYW4gdGhyb3VnaCBhbGwgY29uZmlndXJlZCBjbGFzc2VzIHRoYXQgaGF2ZSBhIFRFTVBMQVRFX1VSTCBhbmQgQ09NUE9ORU5UX05BTUVcclxuICogc3RhdGljIGdldHRlciBhbmQgd2lsbCBhc3luY3Jvbm91c2x5IGxvYWQgdGhlbS4gUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgdGVtcGxhdGVzIGFyZSBsb2FkZWRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZXNMb2FkZXIge1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZVJlZ2lzdHJ5fSB0ZW1wbGF0ZVJlZ2lzdHJ5IFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZVJlZ2lzdHJ5KSB7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5ID0gdGVtcGxhdGVSZWdpc3RyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZ1xyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgKi9cclxuICAgIGxvYWQoY29uZmlnKSB7XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlTWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGNvbmZpZy5nZXRDb25maWdFbnRyaWVzKCkuZm9yRWFjaCgoa2V5LCBjb25maWdFbnRyeSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGNvbmZpZ0VudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuVEVNUExBVEVfVVJMICYmIGNvbmZpZ0VudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuQ09NUE9ORU5UX05BTUUpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlTWFwLnNldChjb25maWdFbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLkNPTVBPTkVOVF9OQU1FLCBjb25maWdFbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLlRFTVBMQVRFX1VSTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlUmVnaXN0cnkuZ2V0VGVtcGxhdGVzTG9hZGVkUHJvbWlzZSh0ZW1wbGF0ZU1hcCk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgTG9nZ2VyLCBNYXAgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQ29uZmlnIH0gZnJvbSBcIm1pbmRpX3YxXCI7XHJcbmltcG9ydCB7IFN0eWxlc1JlZ2lzdHJ5IH0gZnJvbSBcIi4vc3R5bGVzUmVnaXN0cnkuanNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJTdHlsZXNMb2FkZXJcIik7XHJcblxyXG4vKipcclxuICogVG8gYmUgYWRkZWQgdG8gbWluZGkgYXMgYSBzaW5nbGV0b24uIFdpbGwgc2NhbiB0aHJvdWdoIGFsbCBjb25maWd1cmVkIGNsYXNzZXMgdGhhdCBoYXZlIGEgU1RZTEVTX1VSTCBhbmQgQ09NUE9ORU5UX05BTUVcclxuICogc3RhdGljIGdldHRlciBhbmQgd2lsbCBhc3luY3Jvbm91c2x5IGxvYWQgdGhlbS4gUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgc3R5bGVzIGFyZSBsb2FkZWRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTdHlsZXNMb2FkZXIge1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtTdHlsZXNSZWdpc3RyeX0gc3R5bGVzUmVnaXN0cnkgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHN0eWxlc1JlZ2lzdHJ5KSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZXNSZWdpc3RyeSA9IHN0eWxlc1JlZ2lzdHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAqL1xyXG4gICAgbG9hZChjb25maWcpIHtcclxuICAgICAgICBsZXQgc3R5bGVzTWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGNvbmZpZy5nZXRDb25maWdFbnRyaWVzKCkuZm9yRWFjaCgoa2V5LCBjb25maWdFbnRyeSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGNvbmZpZ0VudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuU1RZTEVTX1VSTCAmJiBjb25maWdFbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLkNPTVBPTkVOVF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZXNNYXAuc2V0KGNvbmZpZ0VudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuQ09NUE9ORU5UX05BTUUsIGNvbmZpZ0VudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuU1RZTEVTX1VSTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlc1JlZ2lzdHJ5LmdldFN0eWxlc0xvYWRlZFByb21pc2Uoc3R5bGVzTWFwKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQ29uZmlnLCBJbmplY3Rpb25Qb2ludCB9IGZyb20gXCJtaW5kaV92MVwiO1xyXG5pbXBvcnQgeyBTdHlsZXNSZWdpc3RyeSB9IGZyb20gXCIuLi9zdHlsZXMvc3R5bGVzUmVnaXN0cnkuanNcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVSZWdpc3RyeSB9IGZyb20gXCIuLi90ZW1wbGF0ZS90ZW1wbGF0ZVJlZ2lzdHJ5LmpzXCI7XHJcbmltcG9ydCB7IFRlbXBsYXRlc0xvYWRlciB9IGZyb20gXCIuLi90ZW1wbGF0ZS90ZW1wbGF0ZXNMb2FkZXIuanNcIjtcclxuaW1wb3J0IHsgU3R5bGVzTG9hZGVyIH0gZnJvbSBcIi4uL3N0eWxlcy9zdHlsZXNMb2FkZXIuanNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJDb21wb25lbnRDb25maWdQcm9jZXNzb3JcIilcclxuXHJcbi8qKlxyXG4gKiBNaW5kaSBjb25maWcgcHJvY2Vzc29yIHdoaWNoIGxvYWRzIGFsbCB0ZW1wbGF0ZXMgYW5kIHN0eWxlcyBmb3IgYWxsIGNvbmZpZ3VyZWQgY29tcG9uZW50c1xyXG4gKiBhbmQgdGhlbiBjYWxscyBhbnkgZXhpc3RpbmcgY29tcG9uZW50TG9hZGVkIGZ1bmN0aW9uIG9uIGVhY2ggY29tcG9uZW50XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50Q29uZmlnUHJvY2Vzc29yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1RlbXBsYXRlUmVnaXN0cnl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5ID0gSW5qZWN0aW9uUG9pbnQuaW5zdGFuY2UoVGVtcGxhdGVSZWdpc3RyeSk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHlsZXNSZWdpc3RyeX1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnN0eWxlc1JlZ2lzdHJ5ID0gSW5qZWN0aW9uUG9pbnQuaW5zdGFuY2UoU3R5bGVzUmVnaXN0cnkpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBwb3N0Q29uZmlnKCl7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZXNMb2FkZXIgPSBuZXcgVGVtcGxhdGVzTG9hZGVyKHRoaXMudGVtcGxhdGVSZWdpc3RyeSk7XHJcbiAgICAgICAgdGhpcy5zdHlsZXNMb2FkZXIgPSBuZXcgU3R5bGVzTG9hZGVyKHRoaXMuc3R5bGVzUmVnaXN0cnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc0NvbmZpZyhjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICAgIFsgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlc0xvYWRlci5sb2FkKGNvbmZpZyksIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXNMb2FkZXIubG9hZChjb25maWcpIFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBNYXAgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBVbmlxdWVJZFJlZ2lzdHJ5IHtcclxuXHJcbiAgICBpZEF0dHJpYnV0ZVdpdGhTdWZmaXggKGlkKSB7XHJcbiAgICAgICAgaWYoaWROYW1lcy5jb250YWlucyhpZCkpIHtcclxuICAgICAgICAgICAgdmFyIG51bWJlciA9IGlkTmFtZXMuZ2V0KGlkKTtcclxuICAgICAgICAgICAgaWROYW1lcy5zZXQoaWQsbnVtYmVyKzEpO1xyXG4gICAgICAgICAgICByZXR1cm4gaWQgKyBcIi1cIiArIG51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWROYW1lcy5zZXQoaWQsMSk7XHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxudmFyIGlkTmFtZXMgPSBuZXcgTWFwKCk7IiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQgeyBFbGVtZW50TWFwcGVyIH0gZnJvbSBcIi4uL2VsZW1lbnQvZWxlbWVudE1hcHBlci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgRXZlbnR7XG5cbiAgICBjb25zdHJ1Y3RvcihldmVudCl7XG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgICAgICAgaWYodGhpcy5ldmVudC50eXBlLnRvTG93ZXJDYXNlKCkgPT0gXCJkcmFnc3RhcnRcIil7XG4gICAgICAgICAgICB0aGlzLmV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmV2ZW50RGVmYXVsdCgpe1xuICAgICAgICB0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGV2ZW50IGFuZCB0aGUgZWRnZSB4IGNvb3JkaW5hdGUgb2YgdGhlIGNvbnRhaW5pbmcgb2JqZWN0XG4gICAgICovXG4gICAgZ2V0T2Zmc2V0WCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudC5vZmZzZXRYO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBldmVudCBhbmQgdGhlIGVkZ2UgeSBjb29yZGluYXRlIG9mIHRoZSBjb250YWluaW5nIG9iamVjdFxuICAgICAqL1xuICAgIGdldE9mZnNldFkoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQub2Zmc2V0WTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbW91c2UgeCBjb29yZGluYXRlIG9mIHRoZSBldmVudCByZWxhdGl2ZSB0byB0aGUgY2xpZW50IHdpbmRvdyB2aWV3XG4gICAgICovXG4gICAgZ2V0Q2xpZW50WCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudC5jbGllbnRYO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtb3VzZSB5IGNvb3JkaW5hdGUgb2YgdGhlIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSBjbGllbnQgd2luZG93IHZpZXdcbiAgICAgKi9cbiAgICBnZXRDbGllbnRZKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50LmNsaWVudFk7XG4gICAgfVxuXG4gICAgZ2V0VGFyZ2V0KCl7XG4gICAgICAgIHJldHVybiBFbGVtZW50TWFwcGVyLm1hcCh0aGlzLmV2ZW50LnRhcmdldCk7XG4gICAgfVxuXG4gICAgZ2V0S2V5Q29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQua2V5Q29kZTtcbiAgICB9XG5cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHsgTGlzdCwgTWFwLCBPYmplY3RGdW5jdGlvbiwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XG5pbXBvcnQgeyBFdmVudCB9IGZyb20gXCIuL2V2ZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50L2Jhc2VFbGVtZW50LmpzXCI7XG5cbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJFdmVudFJlZ2lzdHJ5XCIpO1xuXG5leHBvcnQgY2xhc3MgRXZlbnRSZWdpc3RyeSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYmVmb3JlTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmFmdGVyTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggaXMgdGhlIHNvdXJjZSBvZiB0aGUgZXZlbnQgYW5kIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0b1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgdGhlIGV2ZW50IHR5cGUgYXMgaXQgaXMgZGVmaW5lZCBieSB0aGUgY29udGFpbmluZyB0cmlnZ2VyIChleGFtcGxlIFwib25jbGlja1wiKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUgYXMgaXQgd2lsbCBiZSByZWZlcnJlZCB0byBpbiB0aGUgRXZlbnRSZWdpc3RyeSAoZXhhbXBsZSBcIi8vZXZlbnQ6Y2xpY2tlZFwiKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRJbmRleCB1bmlxdWUgaWQgb2YgdGhlIGNvbXBvbmVudCB3aGljaCBvd25zIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgYXR0YWNoKGVsZW1lbnQsIGV2ZW50VHlwZSwgZXZlbnROYW1lLCBjb21wb25lbnRJbmRleCkge1xuICAgICAgICBjb25zdCB1bmlxdWVFdmVudE5hbWUgPSBldmVudE5hbWUgKyBcIl9cIiArIGNvbXBvbmVudEluZGV4O1xuICAgICAgICBjb25zdCB0aGVFdmVudFJlZ2lzdHJ5ID0gdGhpcztcbiAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudChldmVudFR5cGUsIGZ1bmN0aW9uKGV2ZW50KSB7IHRoZUV2ZW50UmVnaXN0cnkudHJpZ2dlcih1bmlxdWVFdmVudE5hbWUsIGV2ZW50TmFtZSwgZXZlbnQpOyB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIHRoZSBldmVudCBuYW1lIGFzIGl0IHdpbGwgYmUgcmVmZXJyZWQgdG8gaW4gdGhlIEV2ZW50UmVnaXN0cnkgKGV4YW1wbGUgXCIvL2V2ZW50OmNsaWNrZWRcIilcbiAgICAgKiBAcGFyYW0ge09iamVjdEZ1bmN0aW9ufSBsaXN0ZW5lciB0aGUgb2JqZWN0IHdoaWNoIG93bnMgdGhlIGhhbmRsZXIgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pcXVlSW5kZXggYSB1bmlxdWUgaW5kZXggZm9yIHRoZSBldmVudFxuICAgICAqL1xuICAgIGxpc3RlbihldmVudE5hbWUsIGxpc3RlbmVyLCB1bmlxdWVJbmRleCkge1xuICAgICAgICBjb25zdCB1bmlxdWVFdmVudE5hbWUgPSBldmVudE5hbWUgKyBcIl9cIiArIHVuaXF1ZUluZGV4O1xuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzLmV4aXN0cyh1bmlxdWVFdmVudE5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5zZXQodW5pcXVlRXZlbnROYW1lLCBuZXcgTGlzdCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVyc1xuICAgICAgICAgICAgLmdldCh1bmlxdWVFdmVudE5hbWUpXG4gICAgICAgICAgICAuYWRkKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBsaXN0ZW5CZWZvcmUoZXZlbnROYW1lLCBoYW5kbGVyT2JqZWN0LCBoYW5kbGVyRnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLmJlZm9yZUxpc3RlbmVycy5leGlzdHMoZXZlbnROYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5iZWZvcmVMaXN0ZW5lcnMuc2V0KGV2ZW50TmFtZSwgbmV3IExpc3QoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iZWZvcmVMaXN0ZW5lcnNcbiAgICAgICAgICAgIC5nZXQoZXZlbnROYW1lKVxuICAgICAgICAgICAgLmFkZChuZXcgT2JqZWN0RnVuY3Rpb24oaGFuZGxlck9iamVjdCwgaGFuZGxlckZ1bmN0aW9uKSk7XG4gICAgfVxuXG4gICAgbGlzdGVuQWZ0ZXIoZXZlbnROYW1lLCBoYW5kbGVyT2JqZWN0LCBoYW5kbGVyRnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLmFmdGVyTGlzdGVuZXJzLmV4aXN0cyhldmVudE5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmFmdGVyTGlzdGVuZXJzLnNldChldmVudE5hbWUsbmV3IExpc3QoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZnRlckxpc3RlbmVyc1xuICAgICAgICAgICAgLmdldChldmVudE5hbWUpXG4gICAgICAgICAgICAuYWRkKG5ldyBPYmplY3RGdW5jdGlvbihoYW5kbGVyT2JqZWN0LCBoYW5kbGVyRnVuY3Rpb24pKTtcbiAgICB9XG5cbiAgICB0cmlnZ2VyKHN1ZmZpeGVkRXZlbnROYW1lLCBldmVudE5hbWUsIGV2ZW50KSB7XG4gICAgICAgIHRoaXMuaGFuZGxlQmVmb3JlKGV2ZW50TmFtZSwgZXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnMuZXhpc3RzKHN1ZmZpeGVkRXZlbnROYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMuZ2V0KHN1ZmZpeGVkRXZlbnROYW1lKS5mb3JFYWNoKCh2YWx1ZSwgcGFyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFsdWUuY2FsbChuZXcgRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlQWZ0ZXIoZXZlbnROYW1lLCBldmVudCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQmVmb3JlKGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVHbG9iYWwodGhpcy5iZWZvcmVMaXN0ZW5lcnMsIGV2ZW50TmFtZSwgZXZlbnQpO1xuICAgIH1cblxuICAgIGhhbmRsZUFmdGVyKGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVHbG9iYWwodGhpcy5hZnRlckxpc3RlbmVycywgZXZlbnROYW1lLCBldmVudCk7XG4gICAgfVxuXG4gICAgaGFuZGxlR2xvYmFsKGxpc3RlbmVycywgZXZlbnROYW1lLCBldmVudCkge1xuICAgICAgICBpZihsaXN0ZW5lcnMuZXhpc3RzKGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5nZXQoZXZlbnROYW1lKS5mb3JFYWNoKCh2YWx1ZSwgcGFyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFsdWUuY2FsbChuZXcgRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTWFwLCBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgWG1sRWxlbWVudCB9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcclxuaW1wb3J0IHsgRWxlbWVudE1hcHBlciB9IGZyb20gXCIuLi9lbGVtZW50L2VsZW1lbnRNYXBwZXJcIjtcclxuaW1wb3J0IHsgQmFzZUVsZW1lbnQgfSBmcm9tIFwiLi4vZWxlbWVudC9iYXNlRWxlbWVudFwiO1xyXG5pbXBvcnQgeyBFdmVudFJlZ2lzdHJ5IH0gZnJvbSBcIi4uL2V2ZW50L2V2ZW50UmVnaXN0cnlcIjtcclxuXHJcbi8qKlxyXG4gKiBDb2xsZWN0cyBpbmZvcm1hdGlvbiB3aGVuIGVsZW1lbnRzIGFyZSBjcmVhdGVkIGFuZCBmaW5kcyB0aGUgcm9vdCBlbGVtZW50LCBjcmVhdGVzIG1hcCBvZiBlbGVtZW50cyBcclxuICogYW5kIHJlZ2lzdGVycyBldmVudHMgaW4gdGhlIGV2ZW50UmVnaXN0cnlcclxuICovXHJcbmV4cG9ydCBjbGFzcyBFbGVtZW50UmVnaXN0cmF0b3Ige1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50UmVnaXN0cnksIHVuaXF1ZUlkUmVnaXN0cnksIGNvbXBvbmVudEluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJbmRleCA9IGNvbXBvbmVudEluZGV4O1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge01hcH0gKi9cclxuICAgICAgICB0aGlzLnVuaXF1ZUlkUmVnaXN0cnkgPSB1bmlxdWVJZFJlZ2lzdHJ5O1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge0V2ZW50UmVnaXN0cnl9ICovXHJcbiAgICAgICAgdGhpcy5ldmVudFJlZ2lzdHJ5ID0gZXZlbnRSZWdpc3RyeTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtCYXNlRWxlbWVudH0gKi9cclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFJvb3RFbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3RFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVsZW1lbnRNYXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudE1hcDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wb25lbnRJbmRleCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExpc3RlbnMgdG8gZWxlbWVudHMgYmVpbmcgY3JlYXRlZCwgYW5kIHRha2VzIGlubiB0aGUgY3JlYXRlZCBYbWxFbGVtZW50IGFuZCBpdHMgcGFyZW50IFhtbEVsZW1lbnRcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fSB4bWxFbGVtZW50IFxyXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50V3JhcHBlciBcclxuICAgICAqL1xyXG4gICAgZWxlbWVudENyZWF0ZWQgKHhtbEVsZW1lbnQsIHBhcmVudFdyYXBwZXIpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IEVsZW1lbnRNYXBwZXIubWFwKHhtbEVsZW1lbnQsIHBhcmVudFdyYXBwZXIpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFRvRWxlbWVudElkTWFwKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFbGVtZW50RXZlbnRzKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZih0aGlzLnJvb3RFbGVtZW50ID09PSBudWxsICYmIGVsZW1lbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yb290RWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3RlckVsZW1lbnRFdmVudHMoZWxlbWVudCl7XHJcbiAgICAgICAgaWYoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSB1bmRlZmluZWQgfHwgIShlbGVtZW50IGluc3RhbmNlb2YgQmFzZUVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGV2ZW50UmVnaXN0cnkgPSB0aGlzLmV2ZW50UmVnaXN0cnk7XHJcbiAgICAgICAgdmFyIGNvbXBvbmVudEluZGV4ID0gdGhpcy5jb21wb25lbnRJbmRleDtcclxuICAgICAgICBlbGVtZW50LmdldEF0dHJpYnV0ZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyaWJ1dGVLZXksYXR0cmlidXRlLHBhcmVudCl7XHJcbiAgICAgICAgICAgIGlmKGF0dHJpYnV0ZSAhPT0gbnVsbCAmJiBhdHRyaWJ1dGUgIT09IHVuZGVmaW5lZCAmJiBhdHRyaWJ1dGUuZ2V0VmFsdWUoKS5zdGFydHNXaXRoKFwiLy9ldmVudDpcIikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBhdHRyaWJ1dGUuZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBldmVudFR5cGUgPSBhdHRyaWJ1dGUuZ2V0TmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnRSZWdpc3RyeS5hdHRhY2goZWxlbWVudCxldmVudFR5cGUsZXZlbnROYW1lLGNvbXBvbmVudEluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgICAgICAgICBcclxuICAgICAgICB9LHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFRvRWxlbWVudElkTWFwKGVsZW1lbnQpIHtcclxuICAgICAgICBpZihlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHVuZGVmaW5lZCB8fCAhKGVsZW1lbnQgaW5zdGFuY2VvZiBCYXNlRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaWQgPSBudWxsO1xyXG4gICAgICAgIGlmKGVsZW1lbnQuY29udGFpbnNBdHRyaWJ1dGUoXCJpZFwiKSkge1xyXG4gICAgICAgICAgICBpZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlVmFsdWUoXCJpZFwiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVWYWx1ZShcImlkXCIsdGhpcy51bmlxdWVJZFJlZ2lzdHJ5LmlkQXR0cmlidXRlV2l0aFN1ZmZpeChpZCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoaWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50TWFwLnNldChpZCxlbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi9jb21wb25lbnRcIjtcclxuaW1wb3J0IHsgVW5pcXVlSWRSZWdpc3RyeSB9IGZyb20gXCIuL3VuaXF1ZUlkUmVnaXN0cnlcIjtcclxuaW1wb3J0IHsgRWxlbWVudFJlZ2lzdHJhdG9yIH0gZnJvbSBcIi4vZWxlbWVudFJlZ2lzdHJhdG9yXCI7XHJcbmltcG9ydCB7IEV2ZW50UmVnaXN0cnkgfSBmcm9tIFwiLi4vZXZlbnQvZXZlbnRSZWdpc3RyeVwiO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVJlZ2lzdHJ5IH0gZnJvbSBcIi4uL3RlbXBsYXRlL3RlbXBsYXRlUmVnaXN0cnlcIjtcclxuaW1wb3J0IHsgRG9tVHJlZSB9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcclxuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IFN0eWxlc1JlZ2lzdHJ5IH0gZnJvbSBcIi4uL3N0eWxlcy9zdHlsZXNSZWdpc3RyeVwiO1xyXG5pbXBvcnQgeyBDYW52YXNTdHlsZXMgfSBmcm9tIFwiLi4vY2FudmFzL2NhbnZhc1N0eWxlc1wiO1xyXG5pbXBvcnQgeyBJbmplY3Rpb25Qb2ludCB9IGZyb20gXCJtaW5kaV92MVwiO1xyXG5cclxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIkNvbXBvbmVudEZhY3RvcnlcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50RmFjdG9yeSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7RXZlbnRSZWdpc3RyeX0gKi9cclxuICAgICAgICB0aGlzLmV2ZW50UmVnaXN0cnkgPSBJbmplY3Rpb25Qb2ludC5pbnN0YW5jZShFdmVudFJlZ2lzdHJ5KTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtTdHlsZXNSZWdpc3RyeX0gKi9cclxuICAgICAgICB0aGlzLnN0eWxlc1JlZ2lzdHJ5ID0gSW5qZWN0aW9uUG9pbnQuaW5zdGFuY2UoU3R5bGVzUmVnaXN0cnkpO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge1RlbXBsYXRlUmVnaXN0cnl9ICovXHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5ID0gSW5qZWN0aW9uUG9pbnQuaW5zdGFuY2UoVGVtcGxhdGVSZWdpc3RyeSk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7VW5pcXVlSWRSZWdpc3RyeX0gKi9cclxuICAgICAgICB0aGlzLnVuaXF1ZUlkUmVnaXN0cnkgPSBJbmplY3Rpb25Qb2ludC5pbnN0YW5jZShVbmlxdWVJZFJlZ2lzdHJ5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgcmVwcmVzZW50cyB0aGUgdGVtcGxhdGUgYW5kIHRoZSBzdHlsZXMgbmFtZSBpZiB0aGUgc3R5bGUgZm9yIHRoYXQgbmFtZSBpcyBhdmFpbGFibGVcclxuICAgICAqL1xyXG4gICAgY3JlYXRlKG5hbWUpe1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVSZWdpc3RyeS5nZXQobmFtZSk7XHJcbiAgICAgICAgaWYoIXRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcih0aGlzLnRlbXBsYXRlUmVnaXN0cnkpO1xyXG4gICAgICAgICAgICB0aHJvdyBcIk5vIHRlbXBsYXRlIHdhcyBmb3VuZCB3aXRoIG5hbWUgXCIgKyBuYW1lO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVsZW1lbnRSZWdpc3RyYXRvciA9IG5ldyBFbGVtZW50UmVnaXN0cmF0b3IodGhpcy5ldmVudFJlZ2lzdHJ5LCB0aGlzLnVuaXF1ZUlkUmVnaXN0cnksIGNvbXBvbmVudENvdW50ZXIrKyk7XHJcbiAgICAgICAgbmV3IERvbVRyZWUodGVtcGxhdGUuZ2V0VGVtcGxhdGVTb3VyY2UoKSxlbGVtZW50UmVnaXN0cmF0b3IpLmxvYWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VudFN0eWxlcyhuYW1lKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb25lbnQoZWxlbWVudFJlZ2lzdHJhdG9yLmdldENvbXBvbmVudEluZGV4KCksIGVsZW1lbnRSZWdpc3RyYXRvci5nZXRSb290RWxlbWVudCgpLCBlbGVtZW50UmVnaXN0cmF0b3IuZ2V0RWxlbWVudE1hcCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3VudFN0eWxlcyhuYW1lKSB7XHJcbiAgICAgICAgaWYodGhpcy5zdHlsZXNSZWdpc3RyeS5jb250YWlucyhuYW1lKSkge1xyXG4gICAgICAgICAgICBDYW52YXNTdHlsZXMuc2V0U3R5bGUobmFtZSwgdGhpcy5zdHlsZXNSZWdpc3RyeS5nZXQobmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbnZhciBjb21wb25lbnRDb3VudGVyID0gMDsiLCJpbXBvcnQgeyBQcm9wZXJ0eUFjY2Vzc29yLCBMaXN0LCBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvYWJzdHJhY3RJbnB1dEVsZW1lbnRcIjtcblxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIklucHV0RWxlbWVudERhdGFCaW5kaW5nXCIpO1xuXG5leHBvcnQgY2xhc3MgSW5wdXRFbGVtZW50RGF0YUJpbmRpbmcge1xuXG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZhbGlkYXRvcikge1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMudmFsaWRhdG9yID0gdmFsaWRhdG9yO1xuICAgICAgICB0aGlzLnB1bGxlcnMgPSBuZXcgTGlzdCgpO1xuICAgICAgICB0aGlzLnB1c2hlcnMgPSBuZXcgTGlzdCgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBsaW5rKG1vZGVsLCB2YWxpZGF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnB1dEVsZW1lbnREYXRhQmluZGluZyhtb2RlbCwgdmFsaWRhdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0SW5wdXRFbGVtZW50fSBmaWVsZCBcbiAgICAgKi9cbiAgICBhbmQoZmllbGQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG8oZmllbGQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7QWJzdHJhY3RJbnB1dEVsZW1lbnR9IGZpZWxkIFxuICAgICAqL1xuICAgIHRvKGZpZWxkKSB7XG4gICAgICAgIGNvbnN0IHB1bGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGxldCBtb2RlbFZhbHVlID0gUHJvcGVydHlBY2Nlc3Nvci5nZXRWYWx1ZSh0aGlzLm1vZGVsLCBmaWVsZC5nZXROYW1lKCkpO1xuICAgICAgICAgICAgaWYgKGZpZWxkLmdldFZhbHVlICYmIG1vZGVsVmFsdWUgIT09IGZpZWxkLmdldFZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICBQcm9wZXJ0eUFjY2Vzc29yLnNldFZhbHVlKHRoaXMubW9kZWwsIGZpZWxkLmdldE5hbWUoKSwgZmllbGQuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0b3IgJiYgdGhpcy52YWxpZGF0b3IudmFsaWRhdGUpe1xuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdG9yLnZhbGlkYXRlKGZpZWxkLmdldFZhbHVlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmaWVsZC5hdHRhY2hFdmVudChcIm9uY2hhbmdlXCIsIHB1bGxlcik7XG4gICAgICAgIGZpZWxkLmF0dGFjaEV2ZW50KFwib25rZXl1cFwiLCBwdWxsZXIpO1xuICAgICAgICBwdWxsZXIuY2FsbCgpO1xuXG4gICAgICAgIGNvbnN0IHB1c2hlciA9ICgpID0+IHtcbiAgICAgICAgICAgIHZhciBtb2RlbFZhbHVlID0gUHJvcGVydHlBY2Nlc3Nvci5nZXRWYWx1ZSh0aGlzLm1vZGVsLCBmaWVsZC5nZXROYW1lKCkpO1xuICAgICAgICAgICAgaWYgKG1vZGVsVmFsdWUgPT09IGZpZWxkLmdldFZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuc2V0Q2hlY2tlZCAmJiAhZmllbGQuZ2V0Q2hlY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLnNldENoZWNrZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuc2V0Q2hlY2tlZCAmJiBmaWVsZC5nZXRDaGVja2VkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuc2V0Q2hlY2tlZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZC5zZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRWYWx1ZShtb2RlbFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgY2hhbmdlZEZ1bmN0aW9uTmFtZSA9IFwiX19jaGFuZ2VkX1wiICsgZmllbGQuZ2V0TmFtZSgpLnJlcGxhY2UoXCIuXCIsXCJfXCIpO1xuICAgICAgICBpZiAoIXRoaXMubW9kZWxbY2hhbmdlZEZ1bmN0aW9uTmFtZV0pIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWxbY2hhbmdlZEZ1bmN0aW9uTmFtZV0gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnB1bGxlcnMuYWRkKHB1bGxlcik7XG4gICAgICAgIHRoaXMucHVzaGVycy5hZGQocHVzaGVyKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWxsKCkge1xuICAgICAgICB0aGlzLnB1bGxlcnMuZm9yRWFjaCgodmFsdWUsIHBhcmVudCkgPT4ge1xuICAgICAgICAgICAgdmFsdWUuY2FsbChwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIHB1c2goKSB7XG4gICAgICAgIHRoaXMucHVzaGVycy5mb3JFYWNoKCh2YWx1ZSwgcGFyZW50KSA9PiB7XG4gICAgICAgICAgICB2YWx1ZS5jYWxsKHBhcmVudCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFByb3h5T2JqZWN0RmFjdG9yeSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcHJveHkgZm9yIGFuIG9iamVjdCB3aGljaCBhbGxvd3MgZGF0YWJpbmRpbmcgZnJvbSB0aGUgb2JqZWN0IHRvIHRoZSBmb3JtIGVsZW1lbnRcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZVByb3h5T2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkob2JqZWN0LCB7XHJcbiAgICAgICAgICAgIHNldDogKHRhcmdldCwgcHJvcCwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBzdWNjZXNzID0gKHRhcmdldFtwcm9wXSA9IHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlZEZ1bmN0aW9uTmFtZSA9IFwiX19jaGFuZ2VkX1wiICsgcHJvcDtcclxuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VkRnVuY3Rpb24gPSB0YXJnZXRbY2hhbmdlZEZ1bmN0aW9uTmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZihjaGFuZ2VkRnVuY3Rpb24gJiYgdHlwZW9mIGNoYW5nZWRGdW5jdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJvdW5kQ2hhbmdlZEZ1bmN0aW9uID0gY2hhbmdlZEZ1bmN0aW9uLmJpbmQodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBib3VuZENoYW5nZWRGdW5jdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MgPT09IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgVXJsIH0gZnJvbSBcIi4uL3V0aWwvdXJsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlzdG9yeSB7XHJcblxyXG4gICAgc3RhdGljIHB1c2hVcmwodXJsLHRpdGxlLHN0YXRlT2JqZWN0KSB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHN0YXRlT2JqZWN0LCB0aXRsZSwgdXJsLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRVcmwoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVcmwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBsb2FkVXJsKHVybCkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVybC50b1N0cmluZygpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtIaXN0b3J5fSBmcm9tIFwiLi4vbmF2aWdhdGlvbi9oaXN0b3J5LmpzXCI7XHJcbmltcG9ydCB7TWFwfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdGF0ZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGVMaXN0ZW5lck1hcCA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWNvcmRTdGF0ZShuZXdQYXRoKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IEhpc3RvcnkuZ2V0VXJsKCk7XHJcbiAgICAgICAgLy8gUHVzaCBjdXJyZW50IHVybCB0byBicm93c2VyIGhpc3RvcnlcclxuICAgICAgICBpZighKHVybC5nZXRQYXRoKDApID09PSBuZXdQYXRoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFVybCh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgYSBuZXcgc3RhdGVcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHVybCBcclxuICAgICAqL1xyXG4gICAgc2V0VXJsKHVybCkge1xyXG4gICAgICAgIEhpc3RvcnkucHVzaFVybCh1cmwsXCJcIix7fSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIlxyXG5pbXBvcnQgeyBNaW5kaUNvbmZpZywgU2luZ2xldG9uQ29uZmlnIH0gZnJvbSBcIm1pbmRpX3YxXCJcclxuaW1wb3J0IHsgVGVtcGxhdGVSZWdpc3RyeSB9IGZyb20gXCIuL3RlbXBsYXRlL3RlbXBsYXRlUmVnaXN0cnkuanNcIjtcclxuaW1wb3J0IHsgRXZlbnRSZWdpc3RyeSB9IGZyb20gXCIuL2V2ZW50L2V2ZW50UmVnaXN0cnkuanNcIjtcclxuaW1wb3J0IHsgVW5pcXVlSWRSZWdpc3RyeSB9IGZyb20gXCIuL2NvbXBvbmVudC91bmlxdWVJZFJlZ2lzdHJ5LmpzXCI7XHJcbmltcG9ydCB7IENvbXBvbmVudEZhY3RvcnkgfSBmcm9tIFwiLi9jb21wb25lbnQvY29tcG9uZW50RmFjdG9yeS5qc1wiO1xyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gXCIuL25hdmlnYXRpb24vc3RhdGUuanNcIjtcclxuaW1wb3J0IHsgU3R5bGVzUmVnaXN0cnkgfSBmcm9tIFwiLi9zdHlsZXMvc3R5bGVzUmVnaXN0cnkuanNcIjtcclxuXHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiSnVzdHJpZ2h0Q29uZmlnXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEp1c3RyaWdodENvbmZpZyB7XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xyXG4gICAgICAgIHJldHVybiBqdXN0cmlnaHRDb25maWc7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgTWluZGlDb25maWcoKVxyXG4gICAgICAgICAgICAuYWRkVHlwZUNvbmZpZyhTaW5nbGV0b25Db25maWcudW5uYW1lZChUZW1wbGF0ZVJlZ2lzdHJ5KSlcclxuICAgICAgICAgICAgLmFkZFR5cGVDb25maWcoU2luZ2xldG9uQ29uZmlnLnVubmFtZWQoU3R5bGVzUmVnaXN0cnkpKVxyXG4gICAgICAgICAgICAuYWRkVHlwZUNvbmZpZyhTaW5nbGV0b25Db25maWcudW5uYW1lZChFdmVudFJlZ2lzdHJ5KSlcclxuICAgICAgICAgICAgLmFkZFR5cGVDb25maWcoU2luZ2xldG9uQ29uZmlnLnVubmFtZWQoVW5pcXVlSWRSZWdpc3RyeSkpXHJcbiAgICAgICAgICAgIC5hZGRUeXBlQ29uZmlnKFNpbmdsZXRvbkNvbmZpZy51bm5hbWVkKENvbXBvbmVudEZhY3RvcnkpKVxyXG4gICAgICAgICAgICAuYWRkVHlwZUNvbmZpZyhTaW5nbGV0b25Db25maWcudW5uYW1lZChTdGF0ZSkpXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29uZmlnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNvbnN0IGp1c3RyaWdodENvbmZpZyA9IG5ldyBKdXN0cmlnaHRDb25maWcoKTsiLCJpbXBvcnQgeyBDb250YWluZXJCcmlkZ2UgfSBmcm9tIFwiLi4vYnJpZGdlL2NvbnRhaW5lckJyaWRnZS5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcGxpY2F0aW9uU3RvcmFnZSB7XHJcbiAgICBcclxuICAgIHN0YXRpYyBzZXRMb2NhbEF0dHJpYnV0ZShrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgQ29udGFpbmVyQnJpZGdlLnNldExvY2FsQXR0cmlidXRlKGtleSx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldExvY2FsQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UuZ2V0TG9jYWxBdHRyaWJ1dGUoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGFzTG9jYWxBdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5oYXNMb2NhbEF0dHJpYnV0ZShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW1vdmVMb2NhbEF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLnJlbW92ZUxvY2FsQXR0cmlidXRlKGtleSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb250YWluZXJCcmlkZ2UgfSBmcm9tIFwiLi4vYnJpZGdlL2NvbnRhaW5lckJyaWRnZS5qc1wiXHJcblxyXG5leHBvcnQgY2xhc3MgU2Vzc2lvblN0b3JhZ2Uge1xyXG5cclxuICAgIHN0YXRpYyBzZXRTZXNzaW9uQXR0cmlidXRlKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBDb250YWluZXJCcmlkZ2Uuc2V0U2Vzc2lvbkF0dHJpYnV0ZShrZXksdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBoYXNTZXNzaW9uQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UuaGFzU2Vzc2lvbkF0dHJpYnV0ZShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRTZXNzaW9uQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UuZ2V0U2Vzc2lvbkF0dHJpYnV0ZShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW1vdmVTZXNzaW9uQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UucmVtb3ZlU2Vzc2lvbkF0dHJpYnV0ZShrZXkpO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IE9iamVjdEZ1bmN0aW9uIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSHR0cFJlc3BvbnNlSGFuZGxlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlIFxyXG4gICAgICogQHBhcmFtIHtPYmplY3RGdW5jdGlvbn0gb2JqZWN0RnVuY3Rpb24gXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtYXBwZXJGdW5jdGlvbiBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29kZSwgb2JqZWN0RnVuY3Rpb24sIG1hcHBlckZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLm9iamVjdEZ1bmN0aW9uID0gb2JqZWN0RnVuY3Rpb247XHJcbiAgICAgICAgdGhpcy5tYXBwZXJGdW5jdGlvbiA9IG1hcHBlckZ1bmN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0Q29kZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge09iamVjdEZ1bmN0aW9ufVxyXG4gICAgICovXHJcbiAgICBnZXRPYmplY3RGdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RGdW5jdGlvblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge2NsYXNzfVxyXG4gICAgICovXHJcbiAgICBnZXRNYXBwZXJGdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXBwZXJGdW5jdGlvbjtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBNYXAsIE9iamVjdEZ1bmN0aW9uLCBPYmplY3RNYXBwZXIsIExvZ2dlciB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBIdHRwUmVzcG9uc2VIYW5kbGVyIH0gZnJvbSBcIi4vaHR0cFJlc3BvbnNlSGFuZGxlclwiO1xyXG5pbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwiLi4vY2xpZW50L2NsaWVudC5qc1wiO1xyXG5cclxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIkh0dHBDYWxsQnVpbGRlclwiKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBIdHRwQ2FsbEJ1aWxkZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtZXRlciBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodXJsLCBwYXJhbXRlcikge1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge1N0cmluZ30gKi9cclxuICAgICAgICB0aGlzLnVybCA9IHVybDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXHJcbiAgICAgICAgdGhpcy5wYXJhbXRlciA9IHBhcmFtdGVyO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge01hcH0gKi9cclxuICAgICAgICB0aGlzLmh0dHBDYWxsYmFja01hcCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3RGdW5jdGlvbn0gKi9cclxuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0NsaWVudH0gY2xpZW50IFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbWV0ZXIgXHJcbiAgICAgKiBAcmV0dXJucyB7SHR0cENhbGxCdWlsZGVyfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbmV3SW5zdGFuY2UoY2xpZW50LCB1cmwsIHBhcmFtZXRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgSHR0cENhbGxCdWlsZGVyKGNsaWVudCwgdXJsLCBwYXJhbWV0ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY29kZSBcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvYmplY3QgXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1hcHBlckZ1bmN0aW9uIG1hcHBlciBmdW5jdGlvbiB0byBwYXNzIHRoZSByZXN1bHQgb2JqZWN0IHRvXHJcbiAgICAgKi9cclxuICAgIHJlc3BvbnNlTWFwcGluZyhjb2RlLCBvYmplY3QsIGNhbGxiYWNrLCBtYXBwZXJGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuaHR0cENhbGxiYWNrTWFwLnNldChjb2RlLCBuZXcgSHR0cFJlc3BvbnNlSGFuZGxlcihjb2RlLCBuZXcgT2JqZWN0RnVuY3Rpb24ob2JqZWN0LCBjYWxsYmFjayksIG1hcHBlckZ1bmN0aW9uKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvYmplY3QgXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBcclxuICAgICAqL1xyXG4gICAgZXJyb3JNYXBwaW5nKG9iamVjdCwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZihvYmplY3QgJiYgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrID0gbmV3IE9iamVjdEZ1bmN0aW9uKG9iamVjdCwgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBnZXQoKSB7XHJcbiAgICAgICAgQ2xpZW50LmdldCh0aGlzLnVybCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdCgpIHtcclxuICAgICAgICBDbGllbnQucG9zdCh0aGlzLnVybCwgdGhpcy5wYXJhbXRlcikudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHV0KCkge1xyXG4gICAgICAgIENsaWVudC5wdXQodGhpcy51cmwsIHRoaXMucGFyYW10ZXIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdGNoKCkge1xyXG4gICAgICAgIENsaWVudC5wYXRjaCh0aGlzLnVybCwgdGhpcy5wYXJhbXRlcikudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIENsaWVudC5kZWxldGUodGhpcy51cmwpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb2Nlc3NFcnJvcihlcnJvcikge1xyXG4gICAgICAgIExPRy5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgaWYodGhpcy5lcnJvckNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjay5jYWxsKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlIFxyXG4gICAgICovXHJcbiAgICBwcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgICAgICAvKiogQHR5cGUge0h0dHBSZXNwb25zZUhhbmRsZXJ9ICovXHJcbiAgICAgICAgdmFyIHJlc3BvbnNlSGFuZGxlciA9IHRoaXMuaHR0cENhbGxiYWNrTWFwLmdldChyZXNwb25zZS5zdGF0dXMpO1xyXG4gICAgICAgIGlmKHJlc3BvbnNlSGFuZGxlcikge1xyXG4gICAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihcclxuICAgICAgICAgICAgICAgIChvYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcGVyRnVuY3Rpb24gPSByZXNwb25zZUhhbmRsZXIuZ2V0TWFwcGVyRnVuY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihtYXBwZXJGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhhbmRsZXIuZ2V0T2JqZWN0RnVuY3Rpb24oKS5jYWxsKG1hcHBlckZ1bmN0aW9uKG9iamVjdCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlci5nZXRPYmplY3RGdW5jdGlvbigpLmNhbGwob2JqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKGZhaWxSZWFzb24pID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTGlzdCwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQWJzdHJhY3RWYWxpZGF0b3JcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgQWJzdHJhY3RWYWxpZGF0b3Ige1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc2N1cnJlbnRseVZhbGlkXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGlzY3VycmVudGx5VmFsaWQgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMudmFsaWRMaXN0ZW5lckxpc3QgPSBuZXcgTGlzdCgpO1xyXG4gICAgICAgIHRoaXMuaW52YWxpZExpc3RlbmVyTGlzdCA9IG5ldyBMaXN0KCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50bHlWYWxpZCA9IGlzY3VycmVudGx5VmFsaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgaXNWYWxpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc2N1cnJlbnRseVZhbGlkO1xyXG4gICAgfVxyXG5cclxuXHR2YWxpZCgpIHtcclxuICAgICAgICB0aGlzLmlzY3VycmVudGx5VmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudmFsaWRMaXN0ZW5lckxpc3QuZm9yRWFjaCgodmFsdWUsIHBhcmVudCkgPT4ge1xyXG4gICAgICAgICAgICB2YWx1ZS5jYWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cdH1cclxuXHJcblx0aW52YWxpZCgpIHtcclxuICAgICAgICB0aGlzLmlzY3VycmVudGx5VmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmludmFsaWRMaXN0ZW5lckxpc3QuZm9yRWFjaCgodmFsdWUsIHBhcmVudCkgPT4ge1xyXG4gICAgICAgICAgICB2YWx1ZS5jYWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtPYmplY3RGdW5jdGlvbn0gdmFsaWRMaXN0ZW5lciBcclxuXHQgKi9cclxuXHR3aXRoVmFsaWRMaXN0ZW5lcih2YWxpZExpc3RlbmVyKSB7XHJcblx0XHR0aGlzLnZhbGlkTGlzdGVuZXJMaXN0LmFkZCh2YWxpZExpc3RlbmVyKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtPYmplY3RGdW5jdGlvbn0gaW52YWxpZExpc3RlbmVyIFxyXG5cdCAqL1xyXG5cdHdpdGhJbnZhbGlkTGlzdGVuZXIoaW52YWxpZExpc3RlbmVyKSB7XHJcblx0XHR0aGlzLmludmFsaWRMaXN0ZW5lckxpc3QuYWRkKGludmFsaWRMaXN0ZW5lcik7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IExpc3QsIE9iamVjdEZ1bmN0aW9uIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IEFic3RyYWN0VmFsaWRhdG9yIH0gZnJvbSAnLi9hYnN0cmFjdFZhbGlkYXRvci5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQW5kVmFsaWRhdG9yU2V0IGV4dGVuZHMgQWJzdHJhY3RWYWxpZGF0b3Ige1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlzVmFsaWRGcm9tU3RhcnQgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGlzVmFsaWRGcm9tU3RhcnQpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yTGlzdCA9IG5ldyBMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0VmFsaWRhdG9yfSB2YWxpZGF0b3JcclxuICAgICAqL1xyXG4gICAgd2l0aFZhbGlkYXRvcih2YWxpZGF0b3IpIHtcclxuICAgICAgICB2YWxpZGF0b3Iud2l0aFZhbGlkTGlzdGVuZXIobmV3IE9iamVjdEZ1bmN0aW9uKHRoaXMsIHRoaXMub25lVmFsaWQpKTtcclxuICAgICAgICB2YWxpZGF0b3Iud2l0aEludmFsaWRMaXN0ZW5lcihuZXcgT2JqZWN0RnVuY3Rpb24odGhpcywgdGhpcy5vbmVJbnZhbGlkKSk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3JMaXN0LmFkZCh2YWxpZGF0b3IpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25lIHZhbGlkYXRvciBzYWlkIGl0IHdhcyB2YWxpZFxyXG4gICAgICovXHJcbiAgICBvbmVWYWxpZCgpIHtcclxuICAgICAgICBsZXQgZm91bmRJbnZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3JMaXN0LmZvckVhY2goKHZhbHVlLHBhcmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZighdmFsdWUuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEludmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgIGlmKCFmb3VuZEludmFsaWQpIHtcclxuICAgICAgICAgICAgc3VwZXIudmFsaWQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdXBlci5pbnZhbGlkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25lIHZhbGlkYXRvciBzYWlkIGl0IHdhcyBpbnZhbGlkXHJcbiAgICAgKi9cclxuICAgIG9uZUludmFsaWQoKSB7XHJcbiAgICAgICAgc3VwZXIuaW52YWxpZCgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQWJzdHJhY3RWYWxpZGF0b3IgfSBmcm9tIFwiLi9hYnN0cmFjdFZhbGlkYXRvci5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlZ2V4VmFsaWRhdG9yIGV4dGVuZHMgQWJzdHJhY3RWYWxpZGF0b3Ige1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlzY3VycmVudGx5VmFsaWQgPSBmYWxzZSwgcmVnZXggPSBcIiguKilcIikge1xyXG4gICAgICAgIHN1cGVyKGlzY3VycmVudGx5VmFsaWQpO1xyXG4gICAgICAgIHRoaXMucmVnZXggPSByZWdleDtcclxuICAgIH1cclxuXHJcblx0dmFsaWRhdGUodmFsdWUpe1xyXG5cdFx0aWYodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLm1hdGNoKHRoaXMucmVnZXgpKXtcclxuXHQgICAgXHR0aGlzLnZhbGlkKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmludmFsaWQoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IFJlZ2V4VmFsaWRhdG9yIH0gZnJvbSBcIi4vcmVnZXhWYWxpZGF0b3IuanNcIjtcclxuXHJcbmNvbnN0IEVNQUlMX0ZPUk1BVCA9IC9eXFx3KyhbXFwuLV0/XFx3KykqQFxcdysoW1xcLi1dP1xcdyspKihcXC5cXHd7MiwzfSkrJC87XHJcblxyXG5leHBvcnQgY2xhc3MgRW1haWxWYWxpZGF0b3IgZXh0ZW5kcyBSZWdleFZhbGlkYXRvciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaXNjdXJyZW50bHlWYWxpZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNjdXJyZW50bHlWYWxpZCwgRU1BSUxfRk9STUFUKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHsgQWJzdHJhY3RWYWxpZGF0b3IgfSBmcm9tIFwiLi9hYnN0cmFjdFZhbGlkYXRvci5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVxdWFsc1ZhbGlkYXRvciBleHRlbmRzIEFic3RyYWN0VmFsaWRhdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihpc2N1cnJlbnRseVZhbGlkID0gZmFsc2UsIHZhbHVlID0gbnVsbCkge1xyXG5cdFx0c3VwZXIoaXNjdXJyZW50bHlWYWxpZCk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuXHR2YWxpZGF0ZSh2YWx1ZSl7XHJcblx0XHRpZih2YWx1ZSAmJiB2YWx1ZSA9PT0gdGhpcy52YWx1ZSl7XHJcblx0ICAgIFx0dGhpcy52YWxpZCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5pbnZhbGlkKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufSIsImltcG9ydCB7IExpc3QsIE9iamVjdEZ1bmN0aW9uIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IEFic3RyYWN0VmFsaWRhdG9yIH0gZnJvbSAnLi9hYnN0cmFjdFZhbGlkYXRvci5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBPclZhbGlkYXRvclNldCBleHRlbmRzIEFic3RyYWN0VmFsaWRhdG9yIHtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoaXNWYWxpZEZyb21TdGFydCA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNWYWxpZEZyb21TdGFydCk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3JMaXN0ID0gbmV3IExpc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7QWJzdHJhY3RWYWxpZGF0b3J9IHZhbGlkYXRvclxyXG4gICAgICovXHJcbiAgICB3aXRoVmFsaWRhdG9yKHZhbGlkYXRvcikge1xyXG4gICAgICAgIHZhbGlkYXRvci53aXRoVmFsaWRMaXN0ZW5lcihuZXcgT2JqZWN0RnVuY3Rpb24odGhpcywgdGhpcy5vbmVWYWxpZCkpO1xyXG4gICAgICAgIHZhbGlkYXRvci53aXRoSW52YWxpZExpc3RlbmVyKG5ldyBPYmplY3RGdW5jdGlvbih0aGlzLCB0aGlzLm9uZUludmFsaWQpKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvckxpc3QuYWRkKHZhbGlkYXRvcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPbmUgdmFsaWRhdG9yIHNhaWQgaXQgd2FzIHZhbGlkXHJcbiAgICAgKi9cclxuICAgIG9uZVZhbGlkKCkge1xyXG4gICAgICAgIHN1cGVyLnZhbGlkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPbmUgdmFsaWRhdG9yIHNhaWQgaXQgd2FzIGludmFsaWRcclxuICAgICAqL1xyXG4gICAgb25lSW52YWxpZCgpIHtcclxuICAgICAgICBsZXQgZm91bmRWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yTGlzdC5mb3JFYWNoKCh2YWx1ZSxwYXJlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYodmFsdWUuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZFZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LCB0aGlzKTtcclxuICAgICAgICBpZihmb3VuZFZhbGlkKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLnZhbGlkKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3VwZXIuaW52YWxpZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBSZWdleFZhbGlkYXRvciB9IGZyb20gXCIuL3JlZ2V4VmFsaWRhdG9yLmpzXCI7XHJcblxyXG5jb25zdCBQQVNTV09SRF9GT1JNQVQgPSAvXig/PS4qW0EtWmEtel0pKD89Lio/WzAtOV0pKD89Lio/WyM/IUAkJV4mKi1dKS57OCx9JC87XHJcblxyXG5leHBvcnQgY2xhc3MgUGFzc3dvcmRWYWxpZGF0b3IgZXh0ZW5kcyBSZWdleFZhbGlkYXRvciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaXNjdXJyZW50bHlWYWxpZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNjdXJyZW50bHlWYWxpZCwgUEFTU1dPUkRfRk9STUFUKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHsgQWJzdHJhY3RWYWxpZGF0b3IgfSBmcm9tIFwiLi9hYnN0cmFjdFZhbGlkYXRvci5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlcXVpcmVkVmFsaWRhdG9yIGV4dGVuZHMgQWJzdHJhY3RWYWxpZGF0b3Ige1xyXG5cclxuXHR2YWxpZGF0ZSh2YWx1ZSl7XHJcblx0XHRpZih2YWx1ZSA9PT0gXCJcIil7XHJcblx0ICAgIFx0dGhpcy5pbnZhbGlkKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnZhbGlkKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG4iXSwibmFtZXMiOlsiTE9HIiwiTG9nZ2VyIiwiQ29udGFpbmVyQnJpZGdlIiwiW29iamVjdCBPYmplY3RdIiwiaWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJjcmVhdGVUZXh0Tm9kZSIsIm5hbWUiLCJjcmVhdGVFbGVtZW50IiwibmFtZVNwYWNlIiwiY3JlYXRlRWxlbWVudE5TIiwidXJsIiwicGFyYW1zIiwid2luZG93IiwiZmV0Y2giLCJrZXkiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsImxvY2FsU3RvcmFnZSIsImVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImFwcGVuZCIsIkF0dHJpYnV0ZSIsImF0dHJpYnV0ZSIsInRoaXMiLCJCYXNlRWxlbWVudCIsInBhcmVudCIsImF0dHJpYnV0ZU1hcCIsImV2ZW50c0F0dGFjaGVkIiwiTGlzdCIsIlhtbEVsZW1lbnQiLCJjcmVhdGVGcm9tWG1sRWxlbWVudCIsIkhUTUxFbGVtZW50IiwiZXJyb3IiLCJhdHRyaWJ1dGVzIiwidW5kZWZpbmVkIiwiTWFwIiwiaSIsImxlbmd0aCIsInNldCIsInhtbEVsZW1lbnQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0TmFtZXNwYWNlIiwiZ2V0TmFtZXNwYWNlVXJpIiwiZ2V0RnVsbE5hbWUiLCJnZXROYW1lIiwiZ2V0TWFwcGVkRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZ2V0QXR0cmlidXRlcyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJnZXRWYWx1ZSIsImV2ZW50VHlwZSIsImZ1bmN0aW9uUGFyYW0iLCJjb250YWlucyIsIndhcm4iLCJzdGFydHNXaXRoIiwic3Vic3RyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFkZCIsInRhZ05hbWUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJvZmZzZXRXaWR0aCIsIm9mZnNldEhlaWdodCIsImxvYWRBdHRyaWJ1dGVzIiwiZ2V0QXR0cmlidXRlIiwiaGFzQXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwic3R5bGUiLCJpbnB1dCIsImNvbnNvbGUiLCJyZXBsYWNlQ2hpbGQiLCJnZXRSb290RWxlbWVudCIsIlRleHQiLCJFbGVtZW50IiwiZmlyc3RDaGlsZCIsImNsZWFyIiwiYWRkQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJDYW52YXNSb290IiwiY29tcG9uZW50IiwiYm9keUVsZW1lbnQiLCJpbm5lckhUTUwiLCJyZW1vdmVFbGVtZW50IiwiYWRkSGVhZGVyRWxlbWVudCIsImFkZEJvZHlFbGVtZW50IiwiQWJzdHJhY3RJbnB1dEVsZW1lbnQiLCJzdXBlciIsImdldEJhY2tpbmdWYWx1ZSIsImZvY3VzIiwic2VsZWN0IiwiZGlzYWJsZWQiLCJSYWRpb0lucHV0RWxlbWVudCIsImNoZWNrZWQiLCJpc0NoZWNrZWQiLCJDaGVja2JveElucHV0RWxlbWVudCIsIlRleHRJbnB1dEVsZW1lbnQiLCJUZXh0YXJlYUlucHV0RWxlbWVudCIsInNldFZhbHVlIiwiZ2V0SW5uZXJIVE1MIiwicHJlcGVuZENoaWxkIiwiVGV4dG5vZGVFbGVtZW50IiwiWG1sQ2RhdGEiLCJjcmVhdGVGcm9tWG1sQ2RhdGEiLCJjZGF0YUVsZW1lbnQiLCJTaW1wbGVFbGVtZW50IiwiRWxlbWVudE1hcHBlciIsIm1hcHNUb1JhZGlvIiwibWFwc1RvQ2hlY2tib3giLCJtYXBzVG9TdWJtaXQiLCJtYXBzVG9UZXh0YXJlYSIsIm1hcHNUb1RleHQiLCJtYXBzVG9UZXh0bm9kZSIsIm1hcHNUb1NpbXBsZSIsImxvZyIsIkhUTUxJbnB1dEVsZW1lbnQiLCJ0eXBlIiwiTm9kZSIsIm5vZGVUeXBlIiwiSFRNTFRleHRBcmVhRWxlbWVudCIsIkhUTUwiLCJlbGVtZW50TmFtZSIsIm1hcCIsImNsYXNzVmFsdWUiLCJzdHlsZVZhbHVlIiwic2V0QXR0cmlidXRlVmFsdWUiLCJocmVmIiwiY3VzdG9tIiwiYXBwbHlTdHlsZXMiLCJzdHlsZXMiLCJlbmFibGVkU3R5bGVzIiwiQ2FudmFzU3R5bGVzIiwic291cmNlIiwiZ2V0Iiwic2V0Q2hpbGQiLCJnZXRTdHlsZXNTb3VyY2UiLCJzdHlsZUVsZW1lbnQiLCJkaXNhYmxlU3R5bGUiLCJyZW1vdmUiLCJDbGllbnQiLCJtZXRob2QiLCJtb2RlIiwicmVkaXJlY3QiLCJ0b1N0cmluZyIsImRhdGEiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJ1c2VyLWFnZW50IiwiY29udGVudC10eXBlIiwiQ29tcG9uZW50IiwiY29tcG9uZW50SW5kZXgiLCJyb290RWxlbWVudCIsImVsZW1lbnRNYXAiLCJVcmwiLCJwcm90b2NvbCIsImhvc3QiLCJwb3J0IiwicGF0aExpc3QiLCJwYXJhbWV0ZXJNYXAiLCJib29rbWFyayIsInJlbWFpbmluZyIsImRldGVybWluZVByb3RvY29sIiwiZGV0ZXJtaW5lSG9zdCIsImRldGVybWluZVBvcnQiLCJkZXRlcm1pbmVQYXRoIiwiZGV0ZXJtaW5lUGFyYW1ldGVycyIsImRldGVybWluZUJvb2ttYXJrIiwiaW5kZXgiLCJpbmRleE9mIiwicGFydHMiLCJzcGxpdCIsInJlcGxhY2UiLCJob3N0UGFydCIsInBvcnRQYXJ0Iiwic3Vic3RyaW5nIiwicGF0aFBhcnRzIiwiZGVjb2RlVVJJIiwicGFydExpc3QiLCJrZXlWYWx1ZSIsInBhdGhQYXJ0IiwiZmlyc3RQYXJhbWV0ZXIiLCJwYXJhbWV0ZXJLZXkiLCJwYXJhbWV0ZXJWYWx1ZSIsImVuY29kZVVSSSIsIlN0eWxlcyIsInN0eWxlc1NvdXJjZSIsIlN0eWxlc1JlZ2lzdHJ5Iiwic3R5bGVzTWFwIiwic3R5bGVzVXJsTWFwIiwic3R5bGVzUXVldWVTaXplIiwiY2FsbGJhY2siLCJkb0NhbGxiYWNrIiwicmVnaXN0cnkiLCJ0bW8iLCJzaXplIiwidGVtcENhbGxiYWNrIiwiY2FsbCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJ0ZXh0IiwibmFtZVVybE1hcCIsInJlamVjdCIsImxvYWRlZCIsInByaXZhdGVMb2FkIiwiY2F0Y2giLCJyZWFzb24iLCJpbmZvIiwiVGVtcGxhdGUiLCJ0ZW1wbGF0ZVNvdXJjZSIsIlRlbXBsYXRlUmVnaXN0cnkiLCJ0ZW1wbGF0ZU1hcCIsInRlbXBsYXRlVXJsTWFwIiwidGVtcGxhdGVRdWV1ZVNpemUiLCJsYW5ndWFnZVByZWZpeCIsInRlbXBsYXRlIiwiZ2V0UGF0aExpc3QiLCJzZXRMYXN0IiwiZ2V0TGFzdCIsInJlc29sc2UiLCJUZW1wbGF0ZXNMb2FkZXIiLCJ0ZW1wbGF0ZVJlZ2lzdHJ5IiwiY29uZmlnIiwiZ2V0Q29uZmlnRW50cmllcyIsImNvbmZpZ0VudHJ5IiwiZ2V0Q2xhc3NSZWZlcmVuY2UiLCJURU1QTEFURV9VUkwiLCJDT01QT05FTlRfTkFNRSIsImdldFRlbXBsYXRlc0xvYWRlZFByb21pc2UiLCJTdHlsZXNMb2FkZXIiLCJzdHlsZXNSZWdpc3RyeSIsIlNUWUxFU19VUkwiLCJnZXRTdHlsZXNMb2FkZWRQcm9taXNlIiwiQ29tcG9uZW50Q29uZmlnUHJvY2Vzc29yIiwiSW5qZWN0aW9uUG9pbnQiLCJpbnN0YW5jZSIsInRlbXBsYXRlc0xvYWRlciIsInN0eWxlc0xvYWRlciIsImFsbCIsImxvYWQiLCJVbmlxdWVJZFJlZ2lzdHJ5IiwiaWROYW1lcyIsIm51bWJlciIsIkV2ZW50IiwiZXZlbnQiLCJ0b0xvd2VyQ2FzZSIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJwcmV2ZW50RGVmYXVsdCIsIm9mZnNldFgiLCJvZmZzZXRZIiwiY2xpZW50WCIsImNsaWVudFkiLCJ0YXJnZXQiLCJrZXlDb2RlIiwiRXZlbnRSZWdpc3RyeSIsImxpc3RlbmVycyIsImJlZm9yZUxpc3RlbmVycyIsImFmdGVyTGlzdGVuZXJzIiwiZXZlbnROYW1lIiwidW5pcXVlRXZlbnROYW1lIiwidGhlRXZlbnRSZWdpc3RyeSIsImF0dGFjaEV2ZW50IiwidHJpZ2dlciIsImxpc3RlbmVyIiwidW5pcXVlSW5kZXgiLCJleGlzdHMiLCJoYW5kbGVyT2JqZWN0IiwiaGFuZGxlckZ1bmN0aW9uIiwiT2JqZWN0RnVuY3Rpb24iLCJzdWZmaXhlZEV2ZW50TmFtZSIsImhhbmRsZUJlZm9yZSIsImhhbmRsZUFmdGVyIiwiaGFuZGxlR2xvYmFsIiwiRWxlbWVudFJlZ2lzdHJhdG9yIiwiZXZlbnRSZWdpc3RyeSIsInVuaXF1ZUlkUmVnaXN0cnkiLCJwYXJlbnRXcmFwcGVyIiwiYWRkVG9FbGVtZW50SWRNYXAiLCJyZWdpc3RlckVsZW1lbnRFdmVudHMiLCJhdHRyaWJ1dGVLZXkiLCJhdHRhY2giLCJjb250YWluc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZVZhbHVlIiwiaWRBdHRyaWJ1dGVXaXRoU3VmZml4IiwiQ29tcG9uZW50RmFjdG9yeSIsImVsZW1lbnRSZWdpc3RyYXRvciIsImNvbXBvbmVudENvdW50ZXIiLCJEb21UcmVlIiwiZ2V0VGVtcGxhdGVTb3VyY2UiLCJtb3VudFN0eWxlcyIsImdldENvbXBvbmVudEluZGV4IiwiZ2V0RWxlbWVudE1hcCIsInNldFN0eWxlIiwiSW5wdXRFbGVtZW50RGF0YUJpbmRpbmciLCJtb2RlbCIsInZhbGlkYXRvciIsInB1bGxlcnMiLCJwdXNoZXJzIiwiZmllbGQiLCJ0byIsInB1bGxlciIsIm1vZGVsVmFsdWUiLCJQcm9wZXJ0eUFjY2Vzc29yIiwidmFsaWRhdGUiLCJwdXNoZXIiLCJzZXRDaGVja2VkIiwiZ2V0Q2hlY2tlZCIsImNoYW5nZWRGdW5jdGlvbk5hbWUiLCJwdXNoIiwiUHJveHlPYmplY3RGYWN0b3J5Iiwib2JqZWN0IiwiUHJveHkiLCJwcm9wIiwic3VjY2VzcyIsImNoYW5nZWRGdW5jdGlvbiIsImJvdW5kQ2hhbmdlZEZ1bmN0aW9uIiwiYmluZCIsIkhpc3RvcnkiLCJ0aXRsZSIsInN0YXRlT2JqZWN0IiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsImxvY2F0aW9uIiwiU3RhdGUiLCJzdGF0ZUxpc3RlbmVyTWFwIiwibmV3UGF0aCIsImdldFVybCIsImdldFBhdGgiLCJzZXRVcmwiLCJwdXNoVXJsIiwiSnVzdHJpZ2h0Q29uZmlnIiwianVzdHJpZ2h0Q29uZmlnIiwiTWluZGlDb25maWciLCJhZGRUeXBlQ29uZmlnIiwiU2luZ2xldG9uQ29uZmlnIiwidW5uYW1lZCIsIkFwcGxpY2F0aW9uU3RvcmFnZSIsInNldExvY2FsQXR0cmlidXRlIiwiZ2V0TG9jYWxBdHRyaWJ1dGUiLCJoYXNMb2NhbEF0dHJpYnV0ZSIsInJlbW92ZUxvY2FsQXR0cmlidXRlIiwiU2Vzc2lvblN0b3JhZ2UiLCJzZXRTZXNzaW9uQXR0cmlidXRlIiwiaGFzU2Vzc2lvbkF0dHJpYnV0ZSIsImdldFNlc3Npb25BdHRyaWJ1dGUiLCJyZW1vdmVTZXNzaW9uQXR0cmlidXRlIiwiSHR0cFJlc3BvbnNlSGFuZGxlciIsImNvZGUiLCJvYmplY3RGdW5jdGlvbiIsIm1hcHBlckZ1bmN0aW9uIiwiSHR0cENhbGxCdWlsZGVyIiwicGFyYW10ZXIiLCJodHRwQ2FsbGJhY2tNYXAiLCJlcnJvckNhbGxiYWNrIiwiY2xpZW50IiwicGFyYW1ldGVyIiwicHJvY2Vzc1Jlc3BvbnNlIiwicHJvY2Vzc0Vycm9yIiwicG9zdCIsInB1dCIsInBhdGNoIiwiZGVsZXRlIiwicmVzcG9uc2VIYW5kbGVyIiwic3RhdHVzIiwianNvbiIsImdldE1hcHBlckZ1bmN0aW9uIiwiZ2V0T2JqZWN0RnVuY3Rpb24iLCJmYWlsUmVhc29uIiwiQWJzdHJhY3RWYWxpZGF0b3IiLCJpc2N1cnJlbnRseVZhbGlkIiwidmFsaWRMaXN0ZW5lckxpc3QiLCJpbnZhbGlkTGlzdGVuZXJMaXN0IiwiY3VycmVudGx5VmFsaWQiLCJ2YWxpZExpc3RlbmVyIiwiaW52YWxpZExpc3RlbmVyIiwiQW5kVmFsaWRhdG9yU2V0IiwiaXNWYWxpZEZyb21TdGFydCIsInZhbGlkYXRvckxpc3QiLCJ3aXRoVmFsaWRMaXN0ZW5lciIsIm9uZVZhbGlkIiwid2l0aEludmFsaWRMaXN0ZW5lciIsIm9uZUludmFsaWQiLCJmb3VuZEludmFsaWQiLCJpc1ZhbGlkIiwiaW52YWxpZCIsInZhbGlkIiwiUmVnZXhWYWxpZGF0b3IiLCJyZWdleCIsIm1hdGNoIiwiRU1BSUxfRk9STUFUIiwiRW1haWxWYWxpZGF0b3IiLCJFcXVhbHNWYWxpZGF0b3IiLCJPclZhbGlkYXRvclNldCIsImZvdW5kVmFsaWQiLCJQQVNTV09SRF9GT1JNQVQiLCJQYXNz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
