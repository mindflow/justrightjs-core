import{Logger,List,Map,ObjectFunction,PropertyAccessor}from"./coreutil_v1.js";import{XmlElement,XmlCdata,DomTree}from"./xmlparser_v1.js";import{Config}from"./mindi_v1.js";const LOG=new Logger("ContainerBridge");class ContainerBridge{static getElementById(t){return document.getElementById(t)}static createTextNode(t){return document.createTextNode(t)}static createElement(t){return document.createElement(t)}static createElementNS(t,e){return document.createElementNS(t,e)}static fetch(t,e){return window.fetch(t,e)}static setSessionAttribute(t,e){window.sessionStorage.setItem(t,e)}static removeSessionAttribute(t){window.sessionStorage.removeItem(t)}static getSessionAttribute(t){return window.sessionStorage.getItem(t)}static hasSessionAttribute(t){return null!==window.sessionStorage.getItem(t)}static setLocalAttribute(t,e){window.localStorage.setItem(t,e)}static removeLocalAttribute(t){window.localStorage.removeItem(t)}static hasLocalAttribute(t){return null!==window.localStorage.getItem(t)}static getLocalAttribute(t){return window.localStorage.getItem(t)}static removeElement(t){let e=document.getElementById(t);e.parentNode.removeChild(e)}static addHeaderElement(t){document.getElementsByTagName("head")[0].append(t)}static addBodyElement(t){document.getElementsByTagName("body")[0].append(t)}}class Attribute{constructor(t){this.attribute=t}getValue(){return this.attribute.value}getName(){return this.attribute.name}getNamespace(){return this.attribute.name}}const LOG$1=new Logger("BaseElement");class BaseElement{constructor(t,e){return this.element=null,this.attributeMap=null,this.eventsAttached=new List,t instanceof XmlElement?void(this.element=this.createFromXmlElement(t,e)):"string"==typeof t?void(this.element=ContainerBridge.createElement(t)):t instanceof HTMLElement?void(this.element=t):(LOG$1.error("Unrecognized value for Element"),void LOG$1.error(t))}loadAttributes(){if(null===this.element.attributes||void 0===this.element.attributes)return void(this.attributeMap=new Map);if(null===this.attributeMap||void 0===this.attributeMap){this.attributeMap=new Map;for(var t=0;t<this.element.attributes.length;t++)this.attributeMap.set(this.element.attributes[t].name,new Attribute(this.element.attributes[t]))}}createFromXmlElement(t,e){let n=null;return n=t.getNamespace()?ContainerBridge.createElementNS(t.getNamespaceUri(),t.getFullName()):ContainerBridge.createElement(t.getName()),e&&null!==e.getMappedElement()&&e.getMappedElement().appendChild(n),t.getAttributes().forEach(function(t,e){return n.setAttribute(t,e.getValue()),!0}),n}attachEvent(t,e){this.eventsAttached.contains(t)?LOG$1.warn("Event '"+t+"' allready attached for "+this.element.name):(t.startsWith("on")&&(t=t.substr(2)),this.element.addEventListener(t,e),this.eventsAttached.add(t))}getMappedElement(){return this.element}getFullName(){return this.element.tagName}getTop(){return this.element.getBoundingClientRect().top}getBottom(){return this.element.getBoundingClientRect().bottom}getLeft(){return this.element.getBoundingClientRect().left}getRight(){return this.element.getBoundingClientRect().right}getWidth(){return this.element.offsetWidth}getHeight(){return this.element.offsetHeight}getAttributes(){return this.loadAttributes(),this.attributeMap}setAttributeValue(t,e){this.element.setAttribute(t,e)}getAttributeValue(t){return this.element.getAttribute(t)}containsAttribute(t){return this.element.hasAttribute(t)}removeAttribute(t){this.element.removeAttribute(t)}setStyle(t,e){this.element.style[t]=e}getStyle(t){return this.element.style[t]}removeStyle(t){this.element.style[t]=null}set(t){return null===this.element.parentNode?void console.error("The element has no parent, can not swap it for value"):t.getMappedElement?void this.element.parentNode.replaceChild(t.getMappedElement(),this.element):t&&"function"==typeof t.getRootElement?(this.element.parentNode.replaceChild(t.getRootElement().getMappedElement(),this.element),void(this.element=t.getRootElement().getMappedElement())):"string"==typeof t?void this.element.parentNode.replaceChild(ContainerBridge.createTextNode(t),this.element):t instanceof Text?void this.element.parentNode.replaceChild(t,this.element):t instanceof Element?void this.element.parentNode.replaceChild(t,this.element):void 0}isMounted(){return!!this.element.parentNode}remove(){this.element.parentNode.removeChild(this.element)}clear(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}setChild(t){this.clear(),this.addChild(t)}addChild(t){return t.getMappedElement?void this.element.appendChild(t.getMappedElement()):t&&"function"==typeof t.getRootElement?void this.element.appendChild(t.getRootElement().getMappedElement()):"string"==typeof t?void this.element.appendChild(ContainerBridge.createTextNode(t)):t instanceof Text?void this.element.appendChild(t):t instanceof Element?void this.element.appendChild(t):void 0}prependChild(t){return null===this.element.firstChild&&this.addChild(t),t.getMappedElement?void this.element.insertBefore(t.getMappedElement(),this.element.firstChild):t&&"function"==typeof t.getRootElement?void this.element.insertBefore(t.getRootElement().getMappedElement(),this.element.firstChild):"string"==typeof t?void this.element.insertBefore(ContainerBridge.createTextNode(t),this.element.firstChild):t instanceof Text?void this.element.insertBefore(t,this.element.firstChild):t instanceof Element?void this.element.insertBefore(t,this.element.firstChild):void 0}}class CanvasRoot{static replaceComponent(t,e){var n=ContainerBridge.getElementById(t);n.parentNode.replaceChild(e.getRootElement().getMappedElement(),n)}static setComponent(t,e){var n=ContainerBridge.getElementById(t);n.innerHTML="",n.appendChild(e.getRootElement().getMappedElement(),n)}static addChildComponent(t,e){ContainerBridge.getElementById(t).appendChild(e.getRootElement().getMappedElement())}static addChildElement(t,e){ContainerBridge.getElementById(t).appendChild(e.getMappedElement())}static removeElement(t){ContainerBridge.removeElement(t)}static addHeaderElement(t){ContainerBridge.addHeaderElement(t.getMappedElement())}static addBodyElement(t){ContainerBridge.addBodyElement(t.getMappedElement())}}const LOG$2=new Logger("AbstractInputElement");class AbstractInputElement extends BaseElement{constructor(t,e){super(t,e)}getName(){return this.element.name}setName(t){this.element.name=t}getValue(){return this.getBackingValue()}getBackingValue(){return this.element.value}setValue(t){this.element.value=t}focus(){this.element.focus()}selectAll(){this.element.select()}enable(){this.element.disabled=!1}disable(){this.element.disabled=!0}}class RadioInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}setChecked(t){this.element.checked=t}isChecked(){return this.element.checked}getValue(){return this.isChecked()?super.getValue():null}}class CheckboxInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}setChecked(t){this.element.checked=t}isChecked(){return this.element.checked}getValue(){return this.isChecked()?super.getValue():null}}class TextInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}}class TextareaInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}getInnerHTML(){return this.element.innerHTML}setInnerHTML(t){this.element.innerHTML=t}addChild(t){super.addChild(t),this.setValue(this.getInnerHTML())}prependChild(t){super.prependChild(t),this.setValue(this.getInnerHTML())}}class TextnodeElement{constructor(t,e){t instanceof XmlCdata&&(this.element=this.createFromXmlCdata(t,e)),"string"==typeof t&&(this.element=ContainerBridge.createTextNode(t))}createFromXmlCdata(t,e){let n=document.createTextNode(t.getValue());return null!==e&&null!==e.getMappedElement()&&e.getMappedElement().appendChild(n),n}setValue(t){this.element=t}getValue(){return this.element}getMappedElement(){return this.element}}class SimpleElement extends BaseElement{constructor(t,e){super(t,e)}getInnerHTML(){return this.element.innerHTML}setInnerHTML(t){this.element.innerHTML=t}}class ElementMapper{static map(t,e){return ElementMapper.mapsToRadio(t)?new RadioInputElement(t,e):ElementMapper.mapsToCheckbox(t)?new CheckboxInputElement(t,e):ElementMapper.mapsToSubmit(t)?new TextInputElement(t,e):ElementMapper.mapsToTextarea(t)?new TextareaInputElement(t,e):ElementMapper.mapsToText(t)?new TextInputElement(t,e):ElementMapper.mapsToTextnode(t)?new TextnodeElement(t,e):ElementMapper.mapsToSimple(t)?new SimpleElement(t,e):(console.log("Mapping to simple by default "+t),new SimpleElement(t,e))}static mapsToRadio(t){return t instanceof HTMLInputElement&&"radio"===t.type||t instanceof XmlElement&&"input"===t.getName()&&"radio"===t.getAttribute("type").getValue()}static mapsToCheckbox(t){return t instanceof HTMLInputElement&&"checkbox"===t.type||t instanceof XmlElement&&"input"===t.getName()&&"checkbox"===t.getAttribute("type").getValue()}static mapsToSubmit(t){return t instanceof HTMLInputElement&&"submit"===t.type||t instanceof XmlElement&&"input"===t.getName()&&"submit"===t.getAttribute("type").getValue()}static mapsToText(t){if(t instanceof HTMLInputElement){if("text"===t.type)return!0;if("password"===t.type)return!0;if("email"===t.type)return!0;if("date"===t.type)return!0;if("time"===t.type)return!0}if(t instanceof XmlElement&&"input"===t.getName()){if("text"===t.getAttribute("type").getValue())return!0;if("password"===t.getAttribute("type").getValue())return!0;if("email"===t.getAttribute("type").getValue())return!0;if("date"===t.getAttribute("type").getValue())return!0;if("time"===t.getAttribute("type").getValue())return!0}return!1}static mapsToTextnode(t){return t instanceof Node&&"TEXT_NODE"===t.nodeType||t instanceof XmlCdata}static mapsToTextarea(t){return t instanceof HTMLTextAreaElement||t instanceof XmlElement&&"textarea"===t.getName()}static mapsToSimple(t){return t instanceof HTMLElement||t instanceof XmlElement}}class HTML{static custom(t){var e=new XmlElement(t);return ElementMapper.map(e)}static applyStyles(t,e,n){null!==e&&t.setAttributeValue("class",e),null!==n&&t.setAttributeValue("style",n)}static a(t,e,n,i){var r=HTML.custom("a");return r.addChild(t),r.setAttributeValue("href",e),HTML.applyStyles(r,n,i),r}}const LOG$3=new Logger("CanvasStyles"),styles=new Map,enabledStyles=new List;class CanvasStyles{static setStyle(t,e){if(styles.contains(t))styles.get(t).setChild(new TextnodeElement(e.getStylesSource()));else{let n=HTML.custom("style");n.setAttributeValue("id",t),n.setChild(new TextnodeElement(e.getStylesSource())),styles.set(t,n)}}static removeStyle(t){enabledStyles.contains(t)&&CanvasStyles.disableStyle(t),styles.remove(t)}static disableStyle(t){if(!styles.contains(t))return void LOG$3.error("Style does not exist: "+t);enabledStyles.contains(t)&&(enabledStyles.remove(t),CanvasRoot.removeElement(t))}static enableStyle(t){if(!styles.contains(t))return void LOG$3.error("Style does not exist: "+t);enabledStyles.contains(t)||(enabledStyles.add(t),CanvasRoot.addHeaderElement(styles.get(t)))}}class Client{static get(t){var e={method:"GET",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),e)}static post(t,e){var n={body:JSON.stringify(e),headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"},method:"POST",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),n)}static put(t,e){var n={body:JSON.stringify(e),method:"PUT",mode:"cors",redirect:"follow",headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"}};return ContainerBridge.fetch(t.toString(),n)}static patch(t,e){var n={body:JSON.stringify(e),method:"PATCH",mode:"cors",redirect:"follow",headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"}};return ContainerBridge.fetch(t.toString(),n)}static delete(t){var e={method:"DELETE",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),e)}}class Component{constructor(t,e,n){this.componentIndex=t,this.elementMap=n,this.rootElement=e}remove(){this.rootElement.remove()}getRootElement(){return this.rootElement}getComponentIndex(){return this.componentIndex}get(t){return this.elementMap.get(t)}set(t,e){this.elementMap.get(t).set(e)}clearChildren(t){this.elementMap.get(t).clear()}setChild(t,e){this.elementMap.get(t).setChild(e)}addChild(t,e){this.elementMap.get(t).addChild(e)}prependChild(t,e){this.elementMap.get(t).prependChild(e)}}class Url{constructor(t){if(this.protocol=null,this.host=null,this.port=null,this.pathList=new List,this.parameterMap=new Map,this.bookmark=null,null!==t){var e=this.determineProtocol(t);null!==e&&(null!==this.protocol&&(e=this.determineHost(e)),null!==e&&(null!==this.host&&(e=this.determinePort(e)),null!==e&&null!==(e=this.determinePath(e))&&null!==(e=this.determineParameters(e))&&this.determineBookmark(e)))}}getProtocol(){return this.protocol}getHost(){return this.host}getPort(){return this.port}getPathList(){return this.pathList}getPath(t){return this.pathList.get(t)}clearPathList(){this.pathList=new List}getParameterMap(){return this.parameterMap}clearParameterMAp(){this.parameterMap=new Map}getParameter(t){return this.parameterMap.get(t)}setParameter(t,e){this.parameterMap.set(t,e)}setBookmark(t){this.bookmark=t}setPath(t){this.determinePath(t)}setQueryString(t){this.parameterMap=this.determineParameters(t)}getBookmark(){return this.bookmark}determineProtocol(t){if(-1===t.indexOf("//"))return t;var e=t.split("//");return-1!==e[0].indexOf("/")?t:(this.protocol=e[0],1==e.length?null:t.replace(e[0]+"//",""))}determineHost(t){var e=t.split("/"),n=e[0];return-1!==n.indexOf(":")&&(n=n.split(":")[0]),this.host=n,e.length>1?t.replace(n,""):null}determinePort(t){if(!t.startsWith(":"))return t;var e=t.split("/")[0].substring(1);return this.port=e,t.replace(":"+e,"")}determinePath(t){var e=t;if(-1!==t.indexOf("?"))(n=t.split("?")).length>1&&(e=t.substring(t.indexOf("?"))),t=n[0];else if(-1!==t.indexOf("#")){var n=t.split("#");n.length>1&&(e=t.substring(t.indexOf("#"))),t=n[0]}t.startsWith("/")&&(t=t.substring(1));var i=new List(t.split("/"));return this.pathList=new List,i.forEach(function(t,e){return e.pathList.add(decodeURI(t)),!0},this),e}determineParameters(t){var e=t;if(-1===t.indexOf("?"))return t;-1!==(t=t.substring(t.indexOf("?")+1)).indexOf("#")&&(e=t.substring(t.indexOf("#")),t=t.substring(0,t.indexOf("#")));var n=new List(t.split("&")),i=new Map;return n.forEach(function(t,e){var n=t.split("=");return n.length>=2&&i.set(decodeURI(n[0]),decodeURI(n[1])),!0},this),this.parameterMap=i,e}determineBookmark(t){-1!==t.indexOf("#")&&(this.bookmark=t.substring(t.indexOf("#")+1))}toString(){var t="";null!==this.protocol&&(t=t+this.protocol+"//"),null!==this.host&&(t+=this.host),null!==this.port&&(t=t+":"+this.port),this.pathList.forEach(function(e,n){return t=t+"/"+e,!0},this);var e=!0;return this.parameterMap.forEach(function(n,i,r){e?(e=!1,t+="?"):t+="&",t=t+encodeURI(n)+"="+encodeURI(i)},this),null!==this.bookmark&&(t=t+"#"+this.bookmark),t}}class Styles{constructor(t){this.stylesSource=t}getStylesSource(){return this.stylesSource}}const LOG$4=new Logger("StylesRegistry");class StylesRegistry{constructor(){this.stylesMap=new Map,this.stylesUrlMap=new Map,this.stylesQueueSize=0,this.callback=null}set(t,e,n){void 0!==n&&null!==n&&this.stylesUrlMap.set(t,n),this.stylesMap.set(t,e)}get(t){return this.stylesMap.get(t)}contains(t){return this.stylesMap.contains(t)}done(t){this.callback=t,this.doCallback(this)}doCallback(t){if(null!==tmo.callback&&void 0!==t.callback&&t.stylesQueueSize===t.stylesMap.size()){var e=t.callback;t.callback=null,e.call()}}load(t,e){return this.stylesQueueSize++,new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load styles for "+t+" at "+e;i.text().then(i=>{this.set(t,new Styles(i),e);this.doCallback(this);n()})})})}getStylesLoadedPromise(t){return new Promise((e,n)=>{var i=0;if(!t||0==t.size())return void e();t.forEach((r,s,o)=>{if(this.contains(r))return++i!=t.size()||(e(),!1);this.privateLoad(r,new Url(s)).then(()=>{i++;if(i==t.size())return e(),!1}).catch(t=>{n(t);return!1});return!0},this)})}privateLoad(t,e){return LOG$4.info("Loading styles "+t+" at "+e.toString()),new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load styles for "+t+" at "+e;i.text().then(i=>{this.set(t,new Styles(i),e);n()})})})}}class Template{constructor(t){this.templateSource=t}getTemplateSource(){return this.templateSource}}const LOG$5=new Logger("TemplateRegistry");class TemplateRegistry{constructor(){this.templateMap=new Map,this.templateUrlMap=new Map,this.templateQueueSize=0,this.callback=null,this.languagePrefix=null}setLanguagePrefix(t){this.languagePrefix=t}set(t,e,n){void 0!==n&&null!==n&&this.templateUrlMap.set(t,n),this.templateMap.set(t,e)}get(t){return this.templateMap.get(t)}contains(t){return this.templateMap.contains(t)}done(t){this.callback=t,this.doCallback(this)}doCallback(t){if(null!==tmo.callback&&void 0!==t.callback&&t.templateQueueSize===t.templateMap.size()){var e=t.callback;t.callback=null,e.call()}}load(t,e){return null!==this.languagePrefix&&e.getPathList().setLast(this.languagePrefix+"."+e.getPathList().getLast()),this.templateQueueSize++,new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load template for "+t+" at "+e;i.text().then(i=>{this.set(t,new Template(i),e);this.doCallback(this);n()})})})}getTemplatesLoadedPromise(t){return new Promise((e,n)=>{var i=0;if(!t||0==t.size())return void e();t.forEach((r,s,o)=>{if(this.contains(r))return++i!=t.size()||(e(),!1);this.privateLoad(r,new Url(s)).then(()=>{i++;if(i==t.size())return e(),!1}).catch(t=>{n(t);return!1});return!0},this)})}privateLoad(t,e){return null!==this.languagePrefix&&e.getPathList().setLast(this.languagePrefix+"."+e.getPathList().getLast()),LOG$5.info("Loading template "+t+" at "+e.toString()),new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load template for "+t+" at "+e;i.text().then(i=>{this.set(t,new Template(i),e);n()})})})}}const LOG$6=new Logger("TemplatePostConfig");class TemplatesLoader{constructor(t){this.templateRegistry=t}load(t){let e=new Map;return t.getConfigElements().forEach((t,n,i)=>{n.getClassReference().TEMPLATE_URL&&n.getClassReference().COMPONENT_NAME&&e.set(n.getClassReference().COMPONENT_NAME,n.getClassReference().TEMPLATE_URL);return!0},this),this.templateRegistry.getTemplatesLoadedPromise(e)}}const LOG$7=new Logger("StylesLoader");class StylesLoader{constructor(t){this.stylesRegistry=t}load(t){let e=new Map;return t.getConfigElements().forEach((t,n,i)=>{n.getClassReference().STYLES_URL&&n.getClassReference().COMPONENT_NAME&&e.set(n.getClassReference().COMPONENT_NAME,n.getClassReference().STYLES_URL);return!0},this),this.stylesRegistry.getStylesLoadedPromise(e)}}const LOG$8=new Logger("ComponentConfigProcessor");class ComponentConfigProcessor{constructor(){this.templateRegistry=TemplateRegistry,this.stylesRegistry=StylesRegistry}postInject(t){this.templatesLoader=new TemplatesLoader(this.templateRegistry),this.stylesLoader=new StylesLoader(this.stylesRegistry)}processConfig(t){return Promise.all([this.templatesLoader.load(t),this.stylesLoader.load(t)])}}class UniqueIdRegistry{idAttributeWithSuffix(t){if(idNames.contains(t)){var e=idNames.get(t);return idNames.set(t,e+1),t+"-"+e}return idNames.set(t,1),t}}var idNames=new Map;class Event{constructor(t){this.event=t,"dragstart"==this.event.type.toLowerCase()&&this.event.dataTransfer.setData("text/plain",null)}preventDefault(){this.event.preventDefault()}getOffsetX(){return this.event.offsetX}getOffsetY(){return this.event.offsetY}getClientX(){return this.event.clientX}getClientY(){return this.event.clientY}getTarget(){return ElementMapper.map(this.event.target)}getKeyCode(){return this.event.keyCode}}const LOG$9=new Logger("EventRegistry");class EventRegistry{constructor(){this.listeners=new Map,this.beforeListeners=new Map,this.afterListeners=new Map}attach(t,e,n,i){var r=n+"_"+i,s=this;t.attachEvent(e,function(t){s.trigger(r,n,t)})}listen(t,e,n){t=t+"_"+n,this.listeners.exists(t)||this.listeners.set(t,new List),this.listeners.get(t).add(e)}listenBefore(t,e,n){this.beforeListeners.exists(t)||this.beforeListeners.set(t,new List);var i=new ObjectFunction(e,n);this.beforeListeners.get(t).add(i)}listenAfter(t,e,n){this.afterListeners.exists(t)||this.afterListeners.set(t,new List),this.afterListeners.get(t).add(new ObjectFunction(e,n))}trigger(t,e,n){if(this.handleBefore(e,n),this.listeners.exists(t)){var i=new List;this.listeners.get(t).forEach(function(t,e){return i.add(t),!0},this),i.forEach(function(t,e){return t.call(new Event(n)),!0},this)}this.handleAfter(e,n)}handleBefore(t,e){this.handleGlobal(this.beforeListeners,t,e)}handleAfter(t,e){this.handleGlobal(this.afterListeners,t,e)}handleGlobal(t,e,n){if(t.exists(e)){var i=new List;t.get(e).forEach(function(t,e){return i.add(t),!0},this),i.forEach(function(t,e){return t.call(new Event(n)),!0},this)}}}class ElementRegistrator{constructor(t,e,n){this.componentIndex=n,this.uniqueIdRegistry=e,this.eventRegistry=t,this.rootElement=null,this.elementMap=new Map}getRootElement(){return this.rootElement}getElementMap(){return this.elementMap}getComponentIndex(){return this.componentIndex}elementCreated(t,e){var n=ElementMapper.map(t,e);return this.addToElementIdMap(n),this.registerElementEvents(n),null===this.rootElement&&null!==n&&(this.rootElement=n),n}registerElementEvents(t){if(null!==t&&void 0!==t&&t instanceof BaseElement){var e=this.eventRegistry,n=this.componentIndex;t.getAttributes().forEach(function(i,r,s){if(null!==r&&void 0!==r&&r.getValue().startsWith("//event:")){var o=r.getValue(),a=r.getName();e.attach(t,a,o,n)}return!0},this)}}addToElementIdMap(t){if(null!==t&&void 0!==t&&t instanceof BaseElement){var e=null;t.containsAttribute("id")&&(e=t.getAttributeValue("id"),t.setAttributeValue("id",this.uniqueIdRegistry.idAttributeWithSuffix(e))),null!==e&&this.elementMap.set(e,t)}}}const LOG$a=new Logger("ComponentFactory");class ComponentFactory{constructor(){this.eventRegistry=EventRegistry,this.stylesRegistry=StylesRegistry,this.templateRegistry=TemplateRegistry,this.uniqueIdRegistry=UniqueIdRegistry}create(t){var e=this.templateRegistry.get(t);if(!e)throw LOG$a.error(this.templateRegistry),"No template was found with name "+t;var n=new ElementRegistrator(this.eventRegistry,this.uniqueIdRegistry,componentCounter++);return new DomTree(e.getTemplateSource(),n).load(),this.mountStyles(t),new Component(n.getComponentIndex(),n.getRootElement(),n.getElementMap())}mountStyles(t){this.stylesRegistry.contains(t)&&CanvasStyles.setStyle(t,this.stylesRegistry.get(t))}}var componentCounter=0;const LOG$b=new Logger("ComponentInstanceProcessor");class ComponentInstanceProcessor{processInstance(t){t.createComponent&&t.createComponent()}}const LOG$c=new Logger("InputElementDataBinding");class InputElementDataBinding{constructor(t,e){this.model=t,this.validator=e,this.pullers=new List,this.pushers=new List}static link(t,e){return new InputElementDataBinding(t,e)}and(t){return this.to(t)}to(t){const e=()=>{let e=PropertyAccessor.getValue(this.model,t.getName());t.getValue&&e!==t.getValue()&&PropertyAccessor.setValue(this.model,t.getName(),t.getValue());this.validator&&this.validator.validate&&this.validator.validate(t.getValue())};t.attachEvent("onchange",e),t.attachEvent("onkeyup",e),e.call();const n=()=>{var e=PropertyAccessor.getValue(this.model,t.getName());e===t.getValue()?t.setChecked&&!t.getChecked()&&t.setChecked(!0):t.setChecked&&t.getChecked()?t.setChecked(!1):t.setValue&&t.setValue(e)};let i="__changed_"+t.getName().replace(".","_");return this.model[i]||(this.model[i]=(()=>{this.push()})),this.pullers.add(e),this.pushers.add(n),this}pull(){this.pullers.forEach((t,e)=>{t.call(e);return!0},this)}push(){this.pushers.forEach((t,e)=>{t.call(e);return!0},this)}}class ProxyObjectFactory{static createProxyObject(t){return new Proxy(t,{set:(t,e,n)=>{let i=t[e]=n;let r="__changed_"+e;let s=t[r];if(s&&"function"==typeof s){let e=s.bind(t);e()}return i===n}})}}class History{static pushUrl(t,e,n){window.history.pushState(n,e,t.toString())}static getUrl(){return new Url(window.location.href)}static loadUrl(t){window.location=t.toString()}}class State{constructor(){this.stateListenerMap=new Map}recordState(t){var e=History.getUrl();e.getPath(0)!==t&&this.setUrl(e)}setUrl(t){History.pushUrl(t,"",{})}}class JustrightConfig{static getInstance(){return null===justrightConfig&&(justrightConfig=new JustrightConfig),justrightConfig}constructor(){this.config=(new Config).addSingleton(TemplateRegistry).addSingleton(StylesRegistry).addSingleton(EventRegistry).addSingleton(UniqueIdRegistry).addSingleton(ComponentFactory).addSingleton(State)}getConfig(){return this.config}}var justrightConfig=null;class ApplicationStorage{static setLocalAttribute(t,e){ContainerBridge.setLocalAttribute(t,e)}static getLocalAttribute(t){return ContainerBridge.getLocalAttribute(t)}static hasLocalAttribute(t){return ContainerBridge.hasLocalAttribute(t)}static removeLocalAttribute(t){return ContainerBridge.removeLocalAttribute(t)}}class SessionStorage{static setSessionAttribute(t,e){ContainerBridge.setSessionAttribute(t,e)}static hasSessionAttribute(t){return ContainerBridge.hasSessionAttribute(t)}static getSessionAttribute(t){return ContainerBridge.getSessionAttribute(t)}static removeSessionAttribute(t){return ContainerBridge.removeSessionAttribute(t)}}class HttpResponseHandler{constructor(t,e,n){this.code=t,this.objectFunction=e,this.mapperFunction=n}getCode(){return this.code}getObjectFunction(){return this.objectFunction}getMapperFunction(){return this.mapperFunction}}const LOG$d=new Logger("HttpCallBuilder");class HttpCallBuilder{constructor(t,e){this.url=t,this.paramter=e,this.httpCallbackMap=new Map,this.errorCallback=null}static newInstance(t,e,n){return new HttpCallBuilder(t,e,n)}responseMapping(t,e,n,i){return this.httpCallbackMap.set(t,new HttpResponseHandler(t,new ObjectFunction(e,n),i)),this}errorMapping(t,e){return t&&e&&(this.errorCallback=new ObjectFunction(t,e)),this}get(){Client.get(this.url).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}post(){Client.post(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}put(){Client.put(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}patch(){Client.patch(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}delete(){Client.delete(this.url).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}processError(t){LOG$d.error(t),this.errorCallback&&this.errorCallback.call(t)}processResponse(t){var e=this.httpCallbackMap.get(t.status);e&&t.json().then(t=>{var n=e.getMapperFunction();n?e.getObjectFunction().call(n(t)):e.getObjectFunction().call(t)},t=>{})}}const LOG$e=new Logger("AbstractValidator");class AbstractValidator{constructor(t=!1){this.validListenerList=new List,this.invalidListenerList=new List,this.currentlyValid=t}isValid(){return this.iscurrentlyValid}valid(){this.iscurrentlyValid=!0,this.validListenerList.forEach((t,e)=>{t.call();return!0},this)}invalid(){this.iscurrentlyValid=!1,this.invalidListenerList.forEach((t,e)=>{t.call();return!0},this)}withValidListener(t){return this.validListenerList.add(t),this}withInvalidListener(t){return this.invalidListenerList.add(t),this}}class AndValidatorSet extends AbstractValidator{constructor(t=!1){super(t),this.validatorList=new List}withValidator(t){return t.withValidListener(new ObjectFunction(this,this.oneValid)),t.withInvalidListener(new ObjectFunction(this,this.oneInvalid)),this.validatorList.add(t),this}oneValid(){let t=!1;this.validatorList.forEach((e,n)=>{if(!e.isValid())return t=!0,!1;return!0},this),t?super.invalid():super.valid()}oneInvalid(){super.invalid()}}class RegexValidator extends AbstractValidator{constructor(t=!1,e="(.*)"){super(t),this.regex=e}validate(t){t&&"string"==typeof t&&t.match(this.regex)?this.valid():this.invalid()}}const EMAIL_FORMAT=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;class EmailValidator extends RegexValidator{constructor(t=!1){super(t,EMAIL_FORMAT)}}class EqualsValidator extends AbstractValidator{constructor(t=!1,e=null){super(t),this.value=e}setValue(t){this.value=t}validate(t){t&&t===this.value?this.valid():this.invalid()}}class OrValidatorSet extends AbstractValidator{constructor(t=!1){super(t),this.validatorList=new List}withValidator(t){return t.withValidListener(new ObjectFunction(this,this.oneValid)),t.withInvalidListener(new ObjectFunction(this,this.oneInvalid)),this.validatorList.add(t),this}oneValid(){super.valid()}oneInvalid(){let t=!1;this.validatorList.forEach((e,n)=>{if(e.isValid())return t=!0,!1;return!0},this),t?super.valid():super.invalid()}}const PASSWORD_FORMAT=/^(?=.*[A-Za-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/;class PasswordValidator extends RegexValidator{constructor(t=!1){super(t,PASSWORD_FORMAT)}}class RequiredValidator extends AbstractValidator{validate(t){""===t?this.invalid():this.valid()}}export{AbstractInputElement,AbstractValidator,AndValidatorSet,ApplicationStorage,Attribute,BaseElement,CanvasRoot,CanvasStyles,CheckboxInputElement,Client,Component,ComponentConfigProcessor,ComponentFactory,ComponentInstanceProcessor,ContainerBridge,ElementMapper,ElementRegistrator,EmailValidator,EqualsValidator,Event,EventRegistry,HTML,History,HttpCallBuilder,HttpResponseHandler,InputElementDataBinding,JustrightConfig,OrValidatorSet,PasswordValidator,ProxyObjectFactory,RadioInputElement,RegexValidator,RequiredValidator,SessionStorage,SimpleElement,State,Styles,StylesLoader,StylesRegistry,Template,TemplateRegistry,TemplatesLoader,TextInputElement,TextareaInputElement,TextnodeElement,UniqueIdRegistry,Url};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianVzdHJpZ2h0X2NvcmVfdjEuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qdXN0cmlnaHQvYnJpZGdlL2NvbnRhaW5lckJyaWRnZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvZWxlbWVudC9hdHRyaWJ1dGUuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvYmFzZUVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NhbnZhcy9jYW52YXNSb290LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L2Fic3RyYWN0SW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3JhZGlvSW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L2NoZWNrYm94SW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3RleHRJbnB1dEVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvdGV4dGFyZWFJbnB1dEVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvdGV4dG5vZGVFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3NpbXBsZUVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvZWxlbWVudE1hcHBlci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvaHRtbC9odG1sLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jYW52YXMvY2FudmFzU3R5bGVzLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jbGllbnQvY2xpZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvY29tcG9uZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC91dGlsL3VybC5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3R5bGVzL3N0eWxlcy5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3R5bGVzL3N0eWxlc1JlZ2lzdHJ5LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC90ZW1wbGF0ZS90ZW1wbGF0ZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdGVtcGxhdGUvdGVtcGxhdGVSZWdpc3RyeS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdGVtcGxhdGUvdGVtcGxhdGVzTG9hZGVyLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9zdHlsZXMvc3R5bGVzTG9hZGVyLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvY29tcG9uZW50Q29uZmlnUHJvY2Vzc29yLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvdW5pcXVlSWRSZWdpc3RyeS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvZXZlbnQvZXZlbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2V2ZW50L2V2ZW50UmVnaXN0cnkuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NvbXBvbmVudC9lbGVtZW50UmVnaXN0cmF0b3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NvbXBvbmVudC9jb21wb25lbnRGYWN0b3J5LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvY29tcG9uZW50SW5zdGFuY2VQcm9jZXNzb3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2RhdGFCaW5kL2lucHV0RWxlbWVudERhdGFCaW5kaW5nLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9kYXRhQmluZC9wcm94eU9iamVjdEZhY3RvcnkuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L25hdmlnYXRpb24vaGlzdG9yeS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvbmF2aWdhdGlvbi9zdGF0ZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvanVzdHJpZ2h0Q29uZmlnLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9zdG9yYWdlL2FwcGxpY2F0aW9uU3RvcmFnZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3RvcmFnZS9zZXNzaW9uU3RvcmFnZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdXRpbC9odHRwUmVzcG9uc2VIYW5kbGVyLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC91dGlsL2h0dHBDYWxsQnVpbGRlci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdmFsaWRhdG9yL2Fic3RyYWN0VmFsaWRhdG9yLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC92YWxpZGF0b3IvYW5kVmFsaWRhdG9yU2V0LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC92YWxpZGF0b3IvcmVnZXhWYWxpZGF0b3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L3ZhbGlkYXRvci9lbWFpbFZhbGlkYXRvci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdmFsaWRhdG9yL2VxdWFsc1ZhbGlkYXRvci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdmFsaWRhdG9yL29yVmFsaWRhdG9yU2V0LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC92YWxpZGF0b3IvcGFzc3dvcmRWYWxpZGF0b3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L3ZhbGlkYXRvci9yZXF1aXJlZFZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJDb250YWluZXJCcmlkZ2VcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyQnJpZGdlIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0RWxlbWVudEJ5SWQoaWQpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsZXUgXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVUZXh0Tm9kZSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2YWx1ZSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVFbGVtZW50KG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVNwYWNlIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVFbGVtZW50TlMobmFtZVNwYWNlLCBuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lU3BhY2UsIG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtcyBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZldGNoKHVybCwgcGFyYW1zKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5mZXRjaCh1cmwsIHBhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RvcmFnZSBicmlkZ2VcclxuXHJcbiAgICBzdGF0aWMgc2V0U2Vzc2lvbkF0dHJpYnV0ZShrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlU2Vzc2lvbkF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRTZXNzaW9uQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBoYXNTZXNzaW9uQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpICE9PSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXRMb2NhbEF0dHJpYnV0ZShrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZUxvY2FsQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBoYXNMb2NhbEF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgIT09IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldExvY2FsQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlRWxlbWVudChpZCkge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYWRkSGVhZGVyRWxlbWVudChlbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuICAgICAgICBoZWFkZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRCb2R5RWxlbWVudChlbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07XHJcbiAgICAgICAgYm9keS5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGUgPSBhdHRyaWJ1dGU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlLnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlLm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmFtZXNwYWNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZS5uYW1lO1xyXG4gICAgfVxyXG59IiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQgeyBYbWxFbGVtZW50IH0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHsgTWFwLCBMb2dnZXIsIExpc3QgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcbmltcG9ydCB7IEF0dHJpYnV0ZSB9IGZyb20gXCIuL2F0dHJpYnV0ZS5qc1wiO1xuaW1wb3J0IHsgQ29udGFpbmVyQnJpZGdlIH0gZnJvbSBcIi4uL2JyaWRnZS9jb250YWluZXJCcmlkZ2UuanNcIjtcblxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIkJhc2VFbGVtZW50XCIpO1xuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyBmb3IgZW5jbG9zaW5nIGFuIEhUTUxFbGVtZW50XG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlRWxlbWVudCB7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fHN0cmluZ3xIVE1MRWxlbWVudH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBwYXJlbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgcGFyZW50KSB7XG4gICAgICAgIFxuICAgICAgICAvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqL1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU1hcCA9IG51bGw7XG4gICAgICAgIHRoaXMuZXZlbnRzQXR0YWNoZWQgPSBuZXcgTGlzdCgpO1xuICAgICAgICBcbiAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmNyZWF0ZUZyb21YbWxFbGVtZW50KHZhbHVlLCBwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBDb250YWluZXJCcmlkZ2UuY3JlYXRlRWxlbWVudCh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBMT0cuZXJyb3IoXCJVbnJlY29nbml6ZWQgdmFsdWUgZm9yIEVsZW1lbnRcIik7XG4gICAgICAgIExPRy5lcnJvcih2YWx1ZSk7XG4gICAgfVxuXG4gICAgbG9hZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIGlmKHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzID09PSBudWxsIHx8IHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuYXR0cmlidXRlTWFwID09PSBudWxsIHx8IHRoaXMuYXR0cmlidXRlTWFwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlTWFwLnNldCh0aGlzLmVsZW1lbnQuYXR0cmlidXRlc1tpXS5uYW1lLG5ldyBBdHRyaWJ1dGUodGhpcy5lbGVtZW50LmF0dHJpYnV0ZXNbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBicm93c2VyIEVsZW1lbnQgZnJvbSB0aGUgWG1sRWxlbWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fSB4bWxFbGVtZW50XG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50RWxlbWVudFxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIGNyZWF0ZUZyb21YbWxFbGVtZW50KHhtbEVsZW1lbnQsIHBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBudWxsO1xuICAgICAgICBpZih4bWxFbGVtZW50LmdldE5hbWVzcGFjZSgpKXtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBDb250YWluZXJCcmlkZ2UuY3JlYXRlRWxlbWVudE5TKHhtbEVsZW1lbnQuZ2V0TmFtZXNwYWNlVXJpKCkseG1sRWxlbWVudC5nZXRGdWxsTmFtZSgpKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBlbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmNyZWF0ZUVsZW1lbnQoeG1sRWxlbWVudC5nZXROYW1lKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHBhcmVudEVsZW1lbnQgJiYgcGFyZW50RWxlbWVudC5nZXRNYXBwZWRFbGVtZW50KCkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHhtbEVsZW1lbnQuZ2V0QXR0cmlidXRlcygpLmZvckVhY2goZnVuY3Rpb24oa2V5LHZhbHVlKXtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSx2YWx1ZS5nZXRWYWx1ZSgpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXR0YWNoIGEgZnVuY3Rpb24gdG8gYW4gZXZlbnQgaW4gdGhlIGVuY2xvc2VkIGVsZW1lbnQgaWYgbm9uZSBhbGxyZWFkeSBleGlzdHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jdGlvblBhcmFtXG4gICAgICovXG4gICAgYXR0YWNoRXZlbnQoZXZlbnRUeXBlLCBmdW5jdGlvblBhcmFtKSB7XG4gICAgICAgIGlmKCF0aGlzLmV2ZW50c0F0dGFjaGVkLmNvbnRhaW5zKGV2ZW50VHlwZSkpIHtcbiAgICAgICAgICAgIGlmKGV2ZW50VHlwZS5zdGFydHNXaXRoKFwib25cIikpIHtcbiAgICAgICAgICAgICAgICBldmVudFR5cGUgPSBldmVudFR5cGUuc3Vic3RyKDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBmdW5jdGlvblBhcmFtKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzQXR0YWNoZWQuYWRkKGV2ZW50VHlwZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBMT0cud2FybihcIkV2ZW50ICdcIiArIGV2ZW50VHlwZSArIFwiJyBhbGxyZWFkeSBhdHRhY2hlZCBmb3IgXCIgKyB0aGlzLmVsZW1lbnQubmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVuY2xvc2VkIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIGdldE1hcHBlZEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0RnVsbE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQudGFnTmFtZTtcbiAgICB9XG5cbiAgICBnZXRUb3AoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgIH1cblxuICAgIGdldEJvdHRvbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b207XG4gICAgfVxuXG4gICAgZ2V0TGVmdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgIH1cblxuICAgIGdldFJpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0O1xuICAgIH1cblxuICAgIGdldFdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIH1cblxuICAgIGdldEhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgfVxuXG4gICAgZ2V0QXR0cmlidXRlcygpIHtcbiAgICAgICAgdGhpcy5sb2FkQXR0cmlidXRlcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVNYXA7XG4gICAgfVxuXG4gICAgc2V0QXR0cmlidXRlVmFsdWUoa2V5LHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LHZhbHVlKTtcbiAgICB9XG5cbiAgICBnZXRBdHRyaWJ1dGVWYWx1ZShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoa2V5KTtcbiAgICB9XG5cbiAgICBjb250YWluc0F0dHJpYnV0ZShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoa2V5KTtcbiAgICB9XG5cbiAgICByZW1vdmVBdHRyaWJ1dGUoa2V5KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICB9XG5cbiAgICBzZXRTdHlsZShrZXksdmFsdWUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlW2tleV0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXRTdHlsZShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5zdHlsZVtrZXldO1xuICAgIH1cblxuICAgIHJlbW92ZVN0eWxlKGtleSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGVba2V5XSA9IG51bGw7XG4gICAgfVxuXG4gICAgc2V0KGlucHV0KSB7XG4gICAgICAgIGlmKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlID09PSBudWxsKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgZWxlbWVudCBoYXMgbm8gcGFyZW50LCBjYW4gbm90IHN3YXAgaXQgZm9yIHZhbHVlXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKGlucHV0LmdldE1hcHBlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChpbnB1dC5nZXRNYXBwZWRFbGVtZW50KCksdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihpbnB1dCAmJiB0eXBlb2YgaW5wdXQuZ2V0Um9vdEVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGlucHV0LmdldFJvb3RFbGVtZW50KCkuZ2V0TWFwcGVkRWxlbWVudCgpLHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBpbnB1dC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2YgaW5wdXQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKENvbnRhaW5lckJyaWRnZS5jcmVhdGVUZXh0Tm9kZShpbnB1dCksdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihpbnB1dCBpbnN0YW5jZW9mIFRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChpbnB1dCx0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKGlucHV0IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGlucHV0LHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc01vdW50ZWQoKSB7XG4gICAgICAgIGlmKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmVtb3ZlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRDaGlsZChpbnB1dCkge1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoaW5wdXQpO1xuICAgIH1cblxuICAgIGFkZENoaWxkKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5nZXRNYXBwZWRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXQuZ2V0TWFwcGVkRWxlbWVudCgpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgJiYgdHlwZW9mIGlucHV0LmdldFJvb3RFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChpbnB1dC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoQ29udGFpbmVyQnJpZGdlLmNyZWF0ZVRleHROb2RlKGlucHV0KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgVGV4dCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJlcGVuZENoaWxkKGlucHV0KSB7XG4gICAgICAgIGlmKHRoaXMuZWxlbWVudC5maXJzdENoaWxkID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQuZ2V0TWFwcGVkRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZShpbnB1dC5nZXRNYXBwZWRFbGVtZW50KCksdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dCAmJiB0eXBlb2YgaW5wdXQuZ2V0Um9vdEVsZW1lbnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZShpbnB1dC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKSx0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKENvbnRhaW5lckJyaWRnZS5jcmVhdGVUZXh0Tm9kZShpbnB1dCksdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXQsdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXQsdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyQnJpZGdlIH0gZnJvbSBcIi4uL2JyaWRnZS9jb250YWluZXJCcmlkZ2VcIjtcclxuaW1wb3J0IHsgQmFzZUVsZW1lbnQgfSBmcm9tIFwiLi4vZWxlbWVudC9iYXNlRWxlbWVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENhbnZhc1Jvb3Qge1xyXG5cclxuICAgIHN0YXRpYyByZXBsYWNlQ29tcG9uZW50KGlkLCBjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgYm9keUVsZW1lbnQgPSBDb250YWluZXJCcmlkZ2UuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIGJvZHlFbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNvbXBvbmVudC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKSwgYm9keUVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXRDb21wb25lbnQoaWQsIGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBib2R5RWxlbWVudCA9IENvbnRhaW5lckJyaWRnZS5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICAgICAgYm9keUVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgYm9keUVsZW1lbnQuYXBwZW5kQ2hpbGQoY29tcG9uZW50LmdldFJvb3RFbGVtZW50KCkuZ2V0TWFwcGVkRWxlbWVudCgpLCBib2R5RWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZENoaWxkQ29tcG9uZW50KGlkLCBjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgYm9keUVsZW1lbnQgPSBDb250YWluZXJCcmlkZ2UuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIGJvZHlFbGVtZW50LmFwcGVuZENoaWxkKGNvbXBvbmVudC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZENoaWxkRWxlbWVudChpZCwgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBib2R5RWxlbWVudCA9IENvbnRhaW5lckJyaWRnZS5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICAgICAgYm9keUVsZW1lbnQuYXBwZW5kQ2hpbGQoZWxlbWVudC5nZXRNYXBwZWRFbGVtZW50KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW1vdmVFbGVtZW50KGlkKSB7XHJcbiAgICAgICAgQ29udGFpbmVyQnJpZGdlLnJlbW92ZUVsZW1lbnQoaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFkZEhlYWRlckVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIENvbnRhaW5lckJyaWRnZS5hZGRIZWFkZXJFbGVtZW50KGVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhZGRCb2R5RWxlbWVudChlbGVtZW50KSB7XHJcbiAgICAgICAgQ29udGFpbmVyQnJpZGdlLmFkZEJvZHlFbGVtZW50KGVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xuaW1wb3J0IHsgWG1sRWxlbWVudCB9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQWJzdHJhY3RJbnB1dEVsZW1lbnRcIik7XG5cbi8qKlxuICogU2hhcmVkIHByb3BlcnRpZXMgb2YgaW5wdXQgZWxlbWVudHNcbiAqL1xuZXhwb3J0IGNsYXNzIEFic3RyYWN0SW5wdXRFbGVtZW50IGV4dGVuZHMgQmFzZUVsZW1lbnR7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBwYXJlbnQpIHtcbiAgICAgICAgc3VwZXIodmFsdWUsIHBhcmVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXRzIG5hbWVcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50Lm5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSBvZiBpbnB1dHMgbmFtZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgc2V0TmFtZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQubmFtZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGdpdmVuIGFueSBwcm9jZXNzaW5nIHJ1bGVzXG4gICAgICovXG4gICAgZ2V0VmFsdWUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmFja2luZ1ZhbHVlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc291cmNlIHZhbHVlXG4gICAgICovXG4gICAgZ2V0QmFja2luZ1ZhbHVlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQudmFsdWU7XG4gICAgfVxuXG4gICAgc2V0VmFsdWUodmFsdWUpe1xuICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBmb2N1cygpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuXG4gICAgc2VsZWN0QWxsKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2VsZWN0KCk7XG4gICAgfVxuXG4gICAgZW5hYmxlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBkaXNhYmxlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtYbWxFbGVtZW50fSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQge0Fic3RyYWN0SW5wdXRFbGVtZW50fSBmcm9tIFwiLi9hYnN0cmFjdElucHV0RWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgQmFzZUVsZW1lbnQgfSBmcm9tIFwiLi9iYXNlRWxlbWVudC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUmFkaW9JbnB1dEVsZW1lbnQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RWxlbWVudHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbEVsZW1lbnR9IGVsZW1lbnQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHBhcmVudCkge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBwYXJlbnQpO1xuICAgIH1cblxuICAgIHNldENoZWNrZWQodmFsdWUpe1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2hlY2tlZCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGlzQ2hlY2tlZCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmNoZWNrZWQ7XG4gICAgfVxuXG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIGlmKHRoaXMuaXNDaGVja2VkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHsgWG1sRWxlbWVudCB9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRFbGVtZW50IH0gZnJvbSBcIi4vYWJzdHJhY3RJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIENoZWNrYm94SW5wdXRFbGVtZW50IGV4dGVuZHMgQWJzdHJhY3RJbnB1dEVsZW1lbnR7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fSBlbGVtZW50IFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudCBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBwYXJlbnQpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudCwgcGFyZW50KTtcbiAgICB9XG5cbiAgICBzZXRDaGVja2VkKHZhbHVlKXtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNoZWNrZWQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBpc0NoZWNrZWQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jaGVja2VkO1xuICAgIH1cblxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICBpZih0aGlzLmlzQ2hlY2tlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7WG1sRWxlbWVudH0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHtBYnN0cmFjdElucHV0RWxlbWVudH0gZnJvbSBcIi4vYWJzdHJhY3RJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIFRleHRJbnB1dEVsZW1lbnQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RWxlbWVudHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbEVsZW1lbnR9IGVsZW1lbnQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHBhcmVudCkge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBwYXJlbnQpO1xuICAgIH1cblxufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge1htbEVsZW1lbnR9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7QWJzdHJhY3RJbnB1dEVsZW1lbnR9IGZyb20gXCIuL2Fic3RyYWN0SW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBUZXh0YXJlYUlucHV0RWxlbWVudCBleHRlbmRzIEFic3RyYWN0SW5wdXRFbGVtZW50e1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0gZWxlbWVudCBcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBwYXJlbnQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgcGFyZW50KSB7XG4gICAgICAgIHN1cGVyKGVsZW1lbnQsIHBhcmVudCk7XG4gICAgfVxuXG4gICAgZ2V0SW5uZXJIVE1MKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MO1xuICAgIH1cblxuICAgIHNldElubmVySFRNTCh2YWx1ZSl7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBhZGRDaGlsZChpbnB1dCkge1xuICAgICAgICBzdXBlci5hZGRDaGlsZChpbnB1dCk7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRJbm5lckhUTUwoKSk7XG4gICAgfVxuXG4gICAgcHJlcGVuZENoaWxkKGlucHV0KSB7XG4gICAgICAgIHN1cGVyLnByZXBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRJbm5lckhUTUwoKSk7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQge1htbENkYXRhfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBDb250YWluZXJCcmlkZ2UgfSBmcm9tIFwiLi4vYnJpZGdlL2NvbnRhaW5lckJyaWRnZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgVGV4dG5vZGVFbGVtZW50IHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbENkYXRhfSB2YWx1ZSBcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBwYXJlbnQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmFsdWUsIHBhcmVudCkge1xuICAgICAgICBpZih2YWx1ZSBpbnN0YW5jZW9mIFhtbENkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmNyZWF0ZUZyb21YbWxDZGF0YSh2YWx1ZSwgcGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmNyZWF0ZVRleHROb2RlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNyZWF0ZUZyb21YbWxDZGF0YShjZGF0YUVsZW1lbnQsIHBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjZGF0YUVsZW1lbnQuZ2V0VmFsdWUoKSk7XG4gICAgICAgIGlmKHBhcmVudEVsZW1lbnQgIT09IG51bGwgJiYgcGFyZW50RWxlbWVudC5nZXRNYXBwZWRFbGVtZW50KCkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxuICAgIGdldE1hcHBlZEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gICAgfVxuXG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7WG1sRWxlbWVudH0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHtBYnN0cmFjdElucHV0RWxlbWVudH0gZnJvbSBcIi4vYWJzdHJhY3RJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIFNpbXBsZUVsZW1lbnQgZXh0ZW5kcyBCYXNlRWxlbWVudHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbEVsZW1lbnR9IGVsZW1lbnQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHBhcmVudCkge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBwYXJlbnQpO1xuICAgIH1cblxuICAgIGdldElubmVySFRNTCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmlubmVySFRNTDtcbiAgICB9XG5cbiAgICBzZXRJbm5lckhUTUwodmFsdWUpe1xuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgfVxuXG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7WG1sQ2RhdGEsWG1sRWxlbWVudH0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHtSYWRpb0lucHV0RWxlbWVudH0gZnJvbSBcIi4vcmFkaW9JbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7Q2hlY2tib3hJbnB1dEVsZW1lbnR9IGZyb20gXCIuL2NoZWNrYm94SW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQge1RleHRJbnB1dEVsZW1lbnR9IGZyb20gXCIuL3RleHRJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7VGV4dGFyZWFJbnB1dEVsZW1lbnR9IGZyb20gXCIuL3RleHRhcmVhSW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQge1RleHRub2RlRWxlbWVudH0gZnJvbSBcIi4vdGV4dG5vZGVFbGVtZW50LmpzXCI7XG5pbXBvcnQge1NpbXBsZUVsZW1lbnR9IGZyb20gXCIuL3NpbXBsZUVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIEVsZW1lbnRNYXBwZXIge1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2FueX0gaW5wdXQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIHN0YXRpYyBtYXAoaW5wdXQsIHBhcmVudCkge1xuICAgICAgICBpZiAoRWxlbWVudE1hcHBlci5tYXBzVG9SYWRpbyhpbnB1dCkpeyByZXR1cm4gbmV3IFJhZGlvSW5wdXRFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb0NoZWNrYm94KGlucHV0KSl7IHJldHVybiBuZXcgQ2hlY2tib3hJbnB1dEVsZW1lbnQoaW5wdXQsIHBhcmVudCk7IH1cbiAgICAgICAgaWYgKEVsZW1lbnRNYXBwZXIubWFwc1RvU3VibWl0KGlucHV0KSl7IHJldHVybiBuZXcgVGV4dElucHV0RWxlbWVudChpbnB1dCwgcGFyZW50KTsgfVxuICAgICAgICBpZiAoRWxlbWVudE1hcHBlci5tYXBzVG9UZXh0YXJlYShpbnB1dCkpeyByZXR1cm4gbmV3IFRleHRhcmVhSW5wdXRFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb1RleHQoaW5wdXQpKXsgcmV0dXJuIG5ldyBUZXh0SW5wdXRFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb1RleHRub2RlKGlucHV0KSl7IHJldHVybiBuZXcgVGV4dG5vZGVFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb1NpbXBsZShpbnB1dCkpeyByZXR1cm4gbmV3IFNpbXBsZUVsZW1lbnQoaW5wdXQsIHBhcmVudCk7IH1cbiAgICAgICAgY29uc29sZS5sb2coXCJNYXBwaW5nIHRvIHNpbXBsZSBieSBkZWZhdWx0IFwiICsgaW5wdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZUVsZW1lbnQoaW5wdXQsIHBhcmVudCk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1JhZGlvKGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgaW5wdXQudHlwZSA9PT0gXCJyYWRpb1wiKSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCAmJiBpbnB1dC5nZXROYW1lKCkgPT09IFwiaW5wdXRcIiAmJiBpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwicmFkaW9cIik7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb0NoZWNrYm94KGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgaW5wdXQudHlwZSA9PT0gXCJjaGVja2JveFwiKSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCAmJiBpbnB1dC5nZXROYW1lKCkgPT09IFwiaW5wdXRcIiAmJiBpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwiY2hlY2tib3hcIik7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1N1Ym1pdChpbnB1dCl7XG4gICAgICAgIHJldHVybiAoaW5wdXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50ICYmIGlucHV0LnR5cGUgPT09IFwic3VibWl0XCIpIHx8XG4gICAgICAgICAgICAoaW5wdXQgaW5zdGFuY2VvZiBYbWxFbGVtZW50ICYmIGlucHV0LmdldE5hbWUoKSA9PT0gXCJpbnB1dFwiICYmIGlucHV0LmdldEF0dHJpYnV0ZShcInR5cGVcIikuZ2V0VmFsdWUoKSA9PT0gXCJzdWJtaXRcIik7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1RleHQoaW5wdXQpe1xuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gXCJ0ZXh0XCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSBcInBhc3N3b3JkXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSBcImVtYWlsXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSBcImRhdGVcIikgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT09IFwidGltZVwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoaW5wdXQgaW5zdGFuY2VvZiBYbWxFbGVtZW50ICYmIGlucHV0LmdldE5hbWUoKSA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwidGV4dFwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwicGFzc3dvcmRcIikgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKS5nZXRWYWx1ZSgpID09PSBcImVtYWlsXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmKGlucHV0LmdldEF0dHJpYnV0ZShcInR5cGVcIikuZ2V0VmFsdWUoKSA9PT0gXCJkYXRlXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmKGlucHV0LmdldEF0dHJpYnV0ZShcInR5cGVcIikuZ2V0VmFsdWUoKSA9PT0gXCJ0aW1lXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1RleHRub2RlKGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIE5vZGUgJiYgaW5wdXQubm9kZVR5cGUgPT09IFwiVEVYVF9OT0RFXCIpIHx8XG4gICAgICAgICAgICAoaW5wdXQgaW5zdGFuY2VvZiBYbWxDZGF0YSk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1RleHRhcmVhKGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQpIHx8XG4gICAgICAgICAgICAoaW5wdXQgaW5zdGFuY2VvZiBYbWxFbGVtZW50ICYmIGlucHV0LmdldE5hbWUoKSA9PT0gXCJ0ZXh0YXJlYVwiKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgbWFwc1RvU2ltcGxlKGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCk7XG4gICAgfVxufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge1htbEVsZW1lbnR9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7RWxlbWVudE1hcHBlcn0gZnJvbSBcIi4uL2VsZW1lbnQvZWxlbWVudE1hcHBlci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgSFRNTHtcblxuICAgIHN0YXRpYyBjdXN0b20oZWxlbWVudE5hbWUpe1xuICAgICAgICB2YXIgeG1sRWxlbWVudCA9IG5ldyBYbWxFbGVtZW50KGVsZW1lbnROYW1lKTtcbiAgICAgICAgcmV0dXJuIEVsZW1lbnRNYXBwZXIubWFwKHhtbEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHN0YXRpYyBhcHBseVN0eWxlcyhlbGVtZW50LGNsYXNzVmFsdWUsc3R5bGVWYWx1ZSl7XG4gICAgICAgIGlmKGNsYXNzVmFsdWUgIT09IG51bGwpe1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVWYWx1ZShcImNsYXNzXCIsY2xhc3NWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoc3R5bGVWYWx1ZSAhPT0gbnVsbCl7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZVZhbHVlKFwic3R5bGVcIixzdHlsZVZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBhKG5hbWUsaHJlZixjbGFzc1ZhbHVlLHN0eWxlVmFsdWUpe1xuICAgICAgICB2YXIgZWxlbWVudCA9IEhUTUwuY3VzdG9tKFwiYVwiKTtcbiAgICAgICAgZWxlbWVudC5hZGRDaGlsZChuYW1lKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVWYWx1ZShcImhyZWZcIixocmVmKTtcbiAgICAgICAgSFRNTC5hcHBseVN0eWxlcyhlbGVtZW50LGNsYXNzVmFsdWUsc3R5bGVWYWx1ZSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1hcCwgTGlzdCwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IENhbnZhc1Jvb3QgfSBmcm9tIFwiLi9jYW52YXNSb290XCI7XHJcbmltcG9ydCB7IEhUTUwgfSBmcm9tIFwiLi4vaHRtbC9odG1sXCI7XHJcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvYmFzZUVsZW1lbnRcIjtcclxuaW1wb3J0IHsgVGV4dG5vZGVFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvdGV4dG5vZGVFbGVtZW50XCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQ2FudmFzU3R5bGVzXCIpO1xyXG5cclxuY29uc3Qgc3R5bGVzID0gbmV3IE1hcCgpO1xyXG5jb25zdCBlbmFibGVkU3R5bGVzID0gbmV3IExpc3QoKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYW52YXNTdHlsZXMge1xyXG5cclxuICAgIHN0YXRpYyBzZXRTdHlsZShuYW1lLCBzb3VyY2UpIHtcclxuICAgICAgICBpZihzdHlsZXMuY29udGFpbnMobmFtZSkpIHtcclxuICAgICAgICAgICAgc3R5bGVzLmdldChuYW1lKS5zZXRDaGlsZChuZXcgVGV4dG5vZGVFbGVtZW50KHNvdXJjZS5nZXRTdHlsZXNTb3VyY2UoKSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QmFzZUVsZW1lbnR9ICovXHJcbiAgICAgICAgICAgIGxldCBzdHlsZUVsZW1lbnQgPSBIVE1MLmN1c3RvbShcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlVmFsdWUoXCJpZFwiLG5hbWUpO1xyXG4gICAgICAgICAgICBzdHlsZUVsZW1lbnQuc2V0Q2hpbGQobmV3IFRleHRub2RlRWxlbWVudChzb3VyY2UuZ2V0U3R5bGVzU291cmNlKCkpKTtcclxuICAgICAgICAgICAgc3R5bGVzLnNldChuYW1lLCBzdHlsZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlU3R5bGUobmFtZSkge1xyXG4gICAgICAgIGlmKGVuYWJsZWRTdHlsZXMuY29udGFpbnMobmFtZSkpIHtcclxuICAgICAgICAgICAgQ2FudmFzU3R5bGVzLmRpc2FibGVTdHlsZShuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3R5bGVzLnJlbW92ZShuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGlzYWJsZVN0eWxlKG5hbWUpIHtcclxuICAgICAgICBpZighc3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcihcIlN0eWxlIGRvZXMgbm90IGV4aXN0OiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGVuYWJsZWRTdHlsZXMuY29udGFpbnMobmFtZSkpIHtcclxuICAgICAgICAgICAgZW5hYmxlZFN0eWxlcy5yZW1vdmUobmFtZSk7XHJcbiAgICAgICAgICAgIENhbnZhc1Jvb3QucmVtb3ZlRWxlbWVudChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGVuYWJsZVN0eWxlKG5hbWUpIHtcclxuICAgICAgICBpZighc3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcihcIlN0eWxlIGRvZXMgbm90IGV4aXN0OiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFlbmFibGVkU3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIGVuYWJsZWRTdHlsZXMuYWRkKG5hbWUpO1xyXG4gICAgICAgICAgICBDYW52YXNSb290LmFkZEhlYWRlckVsZW1lbnQoc3R5bGVzLmdldChuYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29udGFpbmVyQnJpZGdlIH0gZnJvbSBcIi4uL2JyaWRnZS9jb250YWluZXJCcmlkZ2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDbGllbnQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0KHVybCl7XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9ICB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJywgLy8gbm8tY29ycywgY29ycywgKnNhbWUtb3JpZ2luXHJcbiAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JyAvLyBtYW51YWwsICpmb2xsb3csIGVycm9yXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UuZmV0Y2godXJsLnRvU3RyaW5nKCkscGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwb3N0KHVybCwgZGF0YSl7XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9ICB7XHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLCAvLyBtdXN0IG1hdGNoICdDb250ZW50LVR5cGUnIGhlYWRlclxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcInVzZXItYWdlbnRcIjogXCJNb3ppbGxhLzQuMCBNRE4gRXhhbXBsZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgbW9kZTogXCJjb3JzXCIsIC8vIG5vLWNvcnMsIGNvcnMsICpzYW1lLW9yaWdpblxyXG4gICAgICAgICAgICByZWRpcmVjdDogXCJmb2xsb3dcIiwgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvclxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmZldGNoKHVybC50b1N0cmluZygpLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHB1dCh1cmwsIGRhdGEpe1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSAge1xyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSwgLy8gbXVzdCBtYXRjaCAnQ29udGVudC1UeXBlJyBoZWFkZXJcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJywgXHJcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJywgLy8gbm8tY29ycywgY29ycywgKnNhbWUtb3JpZ2luXHJcbiAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JywgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvclxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzQuMCBNRE4gRXhhbXBsZScsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5mZXRjaCh1cmwudG9TdHJpbmcoKSwgcGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwYXRjaCh1cmwsIGRhdGEpe1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSAge1xyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSwgLy8gbXVzdCBtYXRjaCAnQ29udGVudC1UeXBlJyBoZWFkZXJcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLCBcclxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLCAvLyBuby1jb3JzLCBjb3JzLCAqc2FtZS1vcmlnaW5cclxuICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLCAvLyBtYW51YWwsICpmb2xsb3csIGVycm9yXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNC4wIE1ETiBFeGFtcGxlJyxcclxuICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmZldGNoKHVybC50b1N0cmluZygpLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBkZWxldGUodXJsKXtcclxuICAgICAgICB2YXIgcGFyYW1zID0gIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLCAvLyBuby1jb3JzLCBjb3JzLCAqc2FtZS1vcmlnaW5cclxuICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnIC8vIG1hbnVhbCwgKmZvbGxvdywgZXJyb3JcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5mZXRjaCh1cmwudG9TdHJpbmcoKSwgcGFyYW1zKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IE1hcCB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50L2Jhc2VFbGVtZW50XCI7XHJcblxyXG4vKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbXBvbmVudEluZGV4IFxyXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcm9vdEVsZW1lbnQgXHJcbiAgICAgKiBAcGFyYW0ge01hcH0gZWxlbWVudE1hcCBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50SW5kZXgsIHJvb3RFbGVtZW50LCBlbGVtZW50TWFwKSB7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJbmRleCA9IGNvbXBvbmVudEluZGV4O1xyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcCA9IGVsZW1lbnRNYXA7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudCA9IHJvb3RFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZSgpIHtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge0Jhc2VFbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBnZXRSb290RWxlbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wb25lbnRJbmRleCgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge0Jhc2VFbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBnZXQoaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50TWFwLmdldChpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IChpZCwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRNYXAuZ2V0KGlkKS5zZXQodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQ2hpbGRyZW4oaWQpe1xyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcC5nZXQoaWQpLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2hpbGQgKGlkLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcC5nZXQoaWQpLnNldENoaWxkKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDaGlsZCAoaWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50TWFwLmdldChpZCkuYWRkQ2hpbGQodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXBlbmRDaGlsZCAoaWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50TWFwLmdldChpZCkucHJlcGVuZENoaWxkKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge0xpc3QsTWFwfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcblxuZXhwb3J0IGNsYXNzIFVybHtcblxuICAgIGNvbnN0cnVjdG9yKHZhbHVlKXtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IG51bGw7XG4gICAgICAgIHRoaXMuaG9zdCA9IG51bGw7XG4gICAgICAgIHRoaXMucG9ydCA9IG51bGw7XG4gICAgICAgIHRoaXMucGF0aExpc3QgPSBuZXcgTGlzdCgpO1xuICAgICAgICB0aGlzLnBhcmFtZXRlck1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5ib29rbWFyayA9IG51bGw7XG4gICAgICAgIGlmKHZhbHVlID09PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVtYWluaW5nID0gdGhpcy5kZXRlcm1pbmVQcm90b2NvbCh2YWx1ZSk7XG4gICAgICAgIGlmKHJlbWFpbmluZyA9PT0gbnVsbCl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5wcm90b2NvbCAhPT0gbnVsbCl7XG4gICAgICAgICAgICByZW1haW5pbmcgPSB0aGlzLmRldGVybWluZUhvc3QocmVtYWluaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuaG9zdCAhPT0gbnVsbCl7XG4gICAgICAgICAgICByZW1haW5pbmcgPSB0aGlzLmRldGVybWluZVBvcnQocmVtYWluaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlbWFpbmluZyA9IHRoaXMuZGV0ZXJtaW5lUGF0aChyZW1haW5pbmcpO1xuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlbWFpbmluZyA9IHRoaXMuZGV0ZXJtaW5lUGFyYW1ldGVycyhyZW1haW5pbmcpO1xuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGV0ZXJtaW5lQm9va21hcmsocmVtYWluaW5nKTtcbiAgICB9XG5cbiAgICBnZXRQcm90b2NvbCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wcm90b2NvbDtcbiAgICB9XG5cbiAgICBnZXRIb3N0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3Q7XG4gICAgfVxuXG4gICAgZ2V0UG9ydCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3J0O1xuICAgIH1cblxuICAgIGdldFBhdGhMaXN0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhMaXN0O1xuICAgIH1cblxuICAgIGdldFBhdGgoaW5kZXgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoTGlzdC5nZXQoaW5kZXgpO1xuICAgIH1cblxuICAgIGNsZWFyUGF0aExpc3QoKXtcbiAgICAgICAgdGhpcy5wYXRoTGlzdCA9IG5ldyBMaXN0KCk7XG4gICAgfVxuXG4gICAgZ2V0UGFyYW1ldGVyTWFwKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlck1hcDtcbiAgICB9XG5cbiAgICBjbGVhclBhcmFtZXRlck1BcCgpe1xuICAgICAgICB0aGlzLnBhcmFtZXRlck1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICBnZXRQYXJhbWV0ZXIoa2V5KXtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVyTWFwLmdldChrZXkpO1xuICAgIH1cblxuICAgIHNldFBhcmFtZXRlcihrZXksdmFsdWUpe1xuICAgICAgICB0aGlzLnBhcmFtZXRlck1hcC5zZXQoa2V5LHZhbHVlKTtcbiAgICB9XG5cbiAgICBzZXRCb29rbWFyayhib29rbWFyayl7XG4gICAgICAgIHRoaXMuYm9va21hcmsgPSBib29rbWFyaztcbiAgICB9XG5cbiAgICBzZXRQYXRoKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGV0ZXJtaW5lUGF0aCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgc2V0UXVlcnlTdHJpbmcodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAgPSB0aGlzLmRldGVybWluZVBhcmFtZXRlcnModmFsdWUpO1xuICAgIH1cblxuICAgIGdldEJvb2ttYXJrKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2ttYXJrO1xuICAgIH1cblxuICAgIGRldGVybWluZVByb3RvY29sKHZhbHVlKXtcbiAgICAgICAgaWYodmFsdWUuaW5kZXhPZihcIi8vXCIpID09PSAtMSl7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoXCIvL1wiKTtcbiAgICAgICAgaWYocGFydHNbMF0uaW5kZXhPZihcIi9cIikgIT09IC0xKXtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3RvY29sID0gcGFydHNbMF07XG4gICAgICAgIGlmKHBhcnRzLmxlbmd0aD09MSl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShwYXJ0c1swXSArIFwiLy9cIixcIlwiKTtcbiAgICB9XG5cbiAgICBkZXRlcm1pbmVIb3N0KHZhbHVlKXtcbiAgICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICB2YXIgaG9zdFBhcnQgPSBwYXJ0c1swXTtcbiAgICAgICAgaWYoaG9zdFBhcnQuaW5kZXhPZihcIjpcIikgIT09IC0xKXtcbiAgICAgICAgICAgIGhvc3RQYXJ0ID0gaG9zdFBhcnQuc3BsaXQoXCI6XCIpWzBdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3RQYXJ0O1xuICAgICAgICBpZihwYXJ0cy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKGhvc3RQYXJ0LFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGRldGVybWluZVBvcnQodmFsdWUpe1xuICAgICAgICBpZighdmFsdWUuc3RhcnRzV2l0aChcIjpcIikpe1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwb3J0UGFydCA9IHZhbHVlLnNwbGl0KFwiL1wiKVswXS5zdWJzdHJpbmcoMSk7XG4gICAgICAgIHRoaXMucG9ydCA9IHBvcnRQYXJ0O1xuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShcIjpcIiArIHBvcnRQYXJ0LFwiXCIpO1xuICAgIH1cblxuICAgIGRldGVybWluZVBhdGgodmFsdWUpe1xuICAgICAgICB2YXIgcmVtYWluaW5nID0gdmFsdWU7XG4gICAgICAgIGlmKHZhbHVlLmluZGV4T2YoXCI/XCIpICE9PSAtMSl7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSB2YWx1ZS5zcGxpdChcIj9cIik7XG4gICAgICAgICAgICBpZihwYXJ0cy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgICAgICByZW1haW5pbmcgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZihcIj9cIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBwYXJ0c1swXTtcbiAgICAgICAgfSBlbHNlIGlmKHZhbHVlLmluZGV4T2YoXCIjXCIpICE9PSAtMSl7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSB2YWx1ZS5zcGxpdChcIiNcIik7XG4gICAgICAgICAgICBpZihwYXJ0cy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgICAgICByZW1haW5pbmcgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZihcIiNcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBwYXJ0c1swXTtcbiAgICAgICAgfVxuICAgICAgICBpZih2YWx1ZS5zdGFydHNXaXRoKFwiL1wiKSl7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF0aFBhcnRzID0gbmV3IExpc3QodmFsdWUuc3BsaXQoXCIvXCIpKTtcbiAgICAgICAgdGhpcy5wYXRoTGlzdCA9IG5ldyBMaXN0KCk7XG4gICAgICAgIHBhdGhQYXJ0cy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLHBhcmVudCl7XG4gICAgICAgICAgICBwYXJlbnQucGF0aExpc3QuYWRkKGRlY29kZVVSSSh2YWx1ZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sdGhpcyk7XG4gICAgICAgIHJldHVybiByZW1haW5pbmc7XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5lUGFyYW1ldGVycyh2YWx1ZSl7XG4gICAgICAgIHZhciByZW1haW5pbmcgPSB2YWx1ZTtcbiAgICAgICAgaWYodmFsdWUuaW5kZXhPZihcIj9cIikgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZihcIj9cIikrMSk7XG4gICAgICAgIGlmKHZhbHVlLmluZGV4T2YoXCIjXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgcmVtYWluaW5nID0gdmFsdWUuc3Vic3RyaW5nKHZhbHVlLmluZGV4T2YoXCIjXCIpKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsdmFsdWUuaW5kZXhPZihcIiNcIikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJ0TGlzdCA9IG5ldyBMaXN0KHZhbHVlLnNwbGl0KFwiJlwiKSk7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHBhcnRMaXN0LmZvckVhY2goZnVuY3Rpb24odmFsdWUscGFyZW50KXtcbiAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IHZhbHVlLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgIGlmKGtleVZhbHVlLmxlbmd0aCA+PSAyKXtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJNYXAuc2V0KGRlY29kZVVSSShrZXlWYWx1ZVswXSksZGVjb2RlVVJJKGtleVZhbHVlWzFdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAgPSBwYXJhbWV0ZXJNYXA7XG4gICAgICAgIHJldHVybiByZW1haW5pbmc7XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5lQm9va21hcmsodmFsdWUpe1xuICAgICAgICBpZih2YWx1ZS5pbmRleE9mKFwiI1wiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuYm9va21hcmsgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZihcIiNcIikrMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b1N0cmluZygpe1xuICAgICAgICB2YXIgdmFsdWUgPSBcIlwiO1xuICAgICAgICBpZih0aGlzLnByb3RvY29sICE9PSBudWxsKXtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyB0aGlzLnByb3RvY29sICsgXCIvL1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuaG9zdCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgdGhpcy5ob3N0O1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMucG9ydCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgXCI6XCIgKyB0aGlzLnBvcnQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBhdGhMaXN0LmZvckVhY2goZnVuY3Rpb24ocGF0aFBhcnQscGFyZW50KXtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBcIi9cIiArIHBhdGhQYXJ0O1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sdGhpcyk7XG5cbiAgICAgICAgdmFyIGZpcnN0UGFyYW1ldGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAuZm9yRWFjaChmdW5jdGlvbihwYXJhbWV0ZXJLZXkscGFyYW1ldGVyVmFsdWUscGFyZW50KXtcbiAgICAgICAgICAgIGlmKGZpcnN0UGFyYW1ldGVyKXtcbiAgICAgICAgICAgICAgICBmaXJzdFBhcmFtZXRlcj1mYWxzZTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgXCI/XCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgXCImXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgZW5jb2RlVVJJKHBhcmFtZXRlcktleSkgKyBcIj1cIiArIGVuY29kZVVSSShwYXJhbWV0ZXJWYWx1ZSk7XG4gICAgICAgIH0sdGhpcyk7XG4gICAgICAgIGlmKHRoaXMuYm9va21hcmsgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBcIiNcIiArIHRoaXMuYm9va21hcms7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxufVxuIiwiZXhwb3J0IGNsYXNzIFN0eWxlc3tcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlc1NvdXJjZSBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVzU291cmNlKXtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICAgICAgdGhpcy5zdHlsZXNTb3VyY2UgPSBzdHlsZXNTb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBnZXRTdHlsZXNTb3VyY2UoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZXNTb3VyY2U7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cclxuXHJcbmltcG9ydCB7TWFwLCBMb2dnZXIsIE9iamVjdEZ1bmN0aW9ufSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcIi4uL2NsaWVudC9jbGllbnQuanNcIjtcclxuaW1wb3J0IHsgVXJsIH0gZnJvbSBcIi4uL3V0aWwvdXJsLmpzXCI7XHJcbmltcG9ydCB7IFN0eWxlcyB9IGZyb20gXCIuL3N0eWxlcy5qc1wiO1xyXG5cclxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIlN0eWxlc1JlZ2lzdHJ5XCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0eWxlc1JlZ2lzdHJ5IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIC8qKiBAdHlwZSB7TWFwfSAqL1xyXG4gICAgICAgIHRoaXMuc3R5bGVzTWFwID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge01hcH0gKi9cclxuICAgICAgICB0aGlzLnN0eWxlc1VybE1hcCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtpbnRlZ2VyfSAqL1xyXG4gICAgICAgIHRoaXMuc3R5bGVzUXVldWVTaXplID0gMDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3RGdW5jdGlvbn0gKi9cclxuICAgICAgICB0aGlzLmNhbGxiYWNrID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKiBAcGFyYW0ge1N0eWxlc30gc3R5bGVzIFxyXG4gICAgICogQHBhcmFtIHtVcmx9IHVybCBcclxuICAgICAqL1xyXG4gICAgc2V0KG5hbWUsc3R5bGVzLHVybCl7XHJcbiAgICAgICAgaWYodXJsICE9PSB1bmRlZmluZWQgJiYgdXJsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzVXJsTWFwLnNldChuYW1lLCB1cmwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0eWxlc01hcC5zZXQobmFtZSwgc3R5bGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKi9cclxuICAgIGdldChuYW1lKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZXNNYXAuZ2V0KG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqL1xyXG4gICAgY29udGFpbnMobmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzTWFwLmNvbnRhaW5zKG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdEZ1bmN0aW9ufSBjYWxsYmFjayBcclxuICAgICAqL1xyXG4gICAgZG9uZShjYWxsYmFjayl7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHRoaXMuZG9DYWxsYmFjayh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtTdHlsZXNSZWdpc3RyeX0gcmVnaXN0cnkgXHJcbiAgICAgKi9cclxuICAgIGRvQ2FsbGJhY2socmVnaXN0cnkpe1xyXG4gICAgICAgIGlmKHRtby5jYWxsYmFjayAhPT0gbnVsbCAmJiByZWdpc3RyeS5jYWxsYmFjayAhPT0gdW5kZWZpbmVkICAmJiByZWdpc3RyeS5zdHlsZXNRdWV1ZVNpemUgPT09IHJlZ2lzdHJ5LnN0eWxlc01hcC5zaXplKCkpe1xyXG4gICAgICAgICAgICB2YXIgdGVtcENhbGxiYWNrID0gcmVnaXN0cnkuY2FsbGJhY2s7XHJcbiAgICAgICAgICAgIHJlZ2lzdHJ5LmNhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgdGVtcENhbGxiYWNrLmNhbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICogQHBhcmFtIHtVcmx9IHVybCBcclxuICAgICAqL1xyXG4gICAgIGxvYWQobmFtZSwgdXJsKSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZXNRdWV1ZVNpemUgKys7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIENsaWVudC5nZXQodXJsKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoIXJlc3BvbnNlLm9rKXtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2FkIHN0eWxlcyBmb3IgXCIgKyBuYW1lICsgXCIgYXQgXCIgKyB1cmw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS50ZXh0KCkudGhlbigodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KG5hbWUsbmV3IFN0eWxlcyh0ZXh0KSx1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9DYWxsYmFjayh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge01hcH0gbmFtZVVybE1hcCBcclxuICAgICAqL1xyXG4gICAgZ2V0U3R5bGVzTG9hZGVkUHJvbWlzZShuYW1lVXJsTWFwKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgbG9hZGVkID0gMDtcclxuICAgICAgICAgICAgaWYoIW5hbWVVcmxNYXAgfHwgbmFtZVVybE1hcC5zaXplKCkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5hbWVVcmxNYXAuZm9yRWFjaCgoa2V5LCB2YWx1ZSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNvbnRhaW5zKGtleSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZCArKztcclxuICAgICAgICAgICAgICAgICAgICBpZihsb2FkZWQgPT0gbmFtZVVybE1hcC5zaXplKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJyZWFrIGxvb3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucHJpdmF0ZUxvYWQoa2V5LCBuZXcgVXJsKHZhbHVlKSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxvYWRlZCA9PSBuYW1lVXJsTWFwLnNpemUoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmVhayBsb29wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnJlYWsgbG9vcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSx0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKiBAcGFyYW0ge1VybH0gdXJsIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlTG9hZChuYW1lLCB1cmwpIHtcclxuICAgICAgICBMT0cuaW5mbyhcIkxvYWRpbmcgc3R5bGVzIFwiICsgbmFtZSArIFwiIGF0IFwiICsgdXJsLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgQ2xpZW50LmdldCh1cmwpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZighcmVzcG9uc2Uub2spe1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFwiVW5hYmxlIHRvIGxvYWQgc3R5bGVzIGZvciBcIiArIG5hbWUgKyBcIiBhdCBcIiArIHVybDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnRleHQoKS50aGVuKCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQobmFtZSxuZXcgU3R5bGVzKHRleHQpLHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5leHBvcnQgY2xhc3MgVGVtcGxhdGV7XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGVTb3VyY2UgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVTb3VyY2Upe1xuXG4gICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgICAgICB0aGlzLnRlbXBsYXRlU291cmNlID0gdGVtcGxhdGVTb3VyY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRUZW1wbGF0ZVNvdXJjZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVNvdXJjZTtcbiAgICB9XG5cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtNYXAsIExvZ2dlciwgT2JqZWN0RnVuY3Rpb259IGZyb20gXCJjb3JldXRpbF92MVwiO1xuaW1wb3J0IHtUZW1wbGF0ZX0gZnJvbSBcIi4vdGVtcGxhdGUuanNcIjtcbmltcG9ydCB7IENsaWVudCB9IGZyb20gXCIuLi9jbGllbnQvY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBVcmwgfSBmcm9tIFwiLi4vdXRpbC91cmwuanNcIjtcblxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIlRlbXBsYXRlUmVnaXN0cnlcIik7XG5cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZVJlZ2lzdHJ5IHtcblxuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIC8qKiBAdHlwZSB7TWFwfSAqL1xuICAgICAgICB0aGlzLnRlbXBsYXRlTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7TWFwfSAqL1xuICAgICAgICB0aGlzLnRlbXBsYXRlVXJsTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7aW50ZWdlcn0gKi9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZVF1ZXVlU2l6ZSA9IDA7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3RGdW5jdGlvbn0gKi9cbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IG51bGw7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgICAgIHRoaXMubGFuZ3VhZ2VQcmVmaXggPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZVByZWZpeCBcbiAgICAgKi9cbiAgICBzZXRMYW5ndWFnZVByZWZpeChsYW5ndWFnZVByZWZpeCkge1xuICAgICAgICB0aGlzLmxhbmd1YWdlUHJlZml4ID0gbGFuZ3VhZ2VQcmVmaXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZX0gdGVtcGxhdGUgXG4gICAgICogQHBhcmFtIHtVcmx9IHVybCBcbiAgICAgKi9cbiAgICBzZXQobmFtZSx0ZW1wbGF0ZSx1cmwpe1xuICAgICAgICBpZih1cmwgIT09IHVuZGVmaW5lZCAmJiB1cmwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVVcmxNYXAuc2V0KG5hbWUsIHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZW1wbGF0ZU1hcC5zZXQobmFtZSwgdGVtcGxhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICAgICAqL1xuICAgIGdldChuYW1lKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVNYXAuZ2V0KG5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICAgICAqL1xuICAgIGNvbnRhaW5zKG5hbWUpe1xuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZU1hcC5jb250YWlucyhuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge09iamVjdEZ1bmN0aW9ufSBjYWxsYmFjayBcbiAgICAgKi9cbiAgICBkb25lKGNhbGxiYWNrKXtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLmRvQ2FsbGJhY2sodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZVJlZ2lzdHJ5fSByZWdpc3RyeSBcbiAgICAgKi9cbiAgICBkb0NhbGxiYWNrKHJlZ2lzdHJ5KXtcbiAgICAgICAgaWYodG1vLmNhbGxiYWNrICE9PSBudWxsICYmIHJlZ2lzdHJ5LmNhbGxiYWNrICE9PSB1bmRlZmluZWQgICYmIHJlZ2lzdHJ5LnRlbXBsYXRlUXVldWVTaXplID09PSByZWdpc3RyeS50ZW1wbGF0ZU1hcC5zaXplKCkpe1xuICAgICAgICAgICAgdmFyIHRlbXBDYWxsYmFjayA9IHJlZ2lzdHJ5LmNhbGxiYWNrO1xuICAgICAgICAgICAgcmVnaXN0cnkuY2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgICAgdGVtcENhbGxiYWNrLmNhbGwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICAgICAqIEBwYXJhbSB7VXJsfSB1cmwgXG4gICAgICovXG4gICAgbG9hZChuYW1lLCB1cmwpIHtcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZVByZWZpeCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdXJsLmdldFBhdGhMaXN0KCkuc2V0TGFzdChcbiAgICAgICAgICAgICAgICB0aGlzLmxhbmd1YWdlUHJlZml4ICsgXCIuXCIgK1xuICAgICAgICAgICAgICAgIHVybC5nZXRQYXRoTGlzdCgpLmdldExhc3QoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRlbXBsYXRlUXVldWVTaXplICsrO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIENsaWVudC5nZXQodXJsKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKCFyZXNwb25zZS5vayl7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IFwiVW5hYmxlIHRvIGxvYWQgdGVtcGxhdGUgZm9yIFwiICsgbmFtZSArIFwiIGF0IFwiICsgdXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNwb25zZS50ZXh0KCkudGhlbigodGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldChuYW1lLG5ldyBUZW1wbGF0ZSh0ZXh0KSx1cmwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvQ2FsbGJhY2sodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge01hcH0gbmFtZVVybE1hcCBcbiAgICAgKi9cbiAgICBnZXRUZW1wbGF0ZXNMb2FkZWRQcm9taXNlKG5hbWVVcmxNYXApIHtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB2YXIgbG9hZGVkID0gMDtcbiAgICAgICAgICAgIGlmKCFuYW1lVXJsTWFwIHx8IG5hbWVVcmxNYXAuc2l6ZSgpID09IDApIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmFtZVVybE1hcC5mb3JFYWNoKChrZXksIHZhbHVlLCBwYXJlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNvbnRhaW5zKGtleSkpe1xuICAgICAgICAgICAgICAgICAgICBsb2FkZWQgKys7XG4gICAgICAgICAgICAgICAgICAgIGlmKGxvYWRlZCA9PSBuYW1lVXJsTWFwLnNpemUoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmVhayBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdmF0ZUxvYWQoa2V5LCBuZXcgVXJsKHZhbHVlKSlcblxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsb2FkZWQgPT0gbmFtZVVybE1hcC5zaXplKCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmVhayBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJyZWFrIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcbiAgICAgKiBAcGFyYW0ge1VybH0gdXJsIFxuICAgICAqL1xuICAgIHByaXZhdGVMb2FkKG5hbWUsIHVybCkge1xuICAgICAgICBpZih0aGlzLmxhbmd1YWdlUHJlZml4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB1cmwuZ2V0UGF0aExpc3QoKS5zZXRMYXN0KFxuICAgICAgICAgICAgICAgIHRoaXMubGFuZ3VhZ2VQcmVmaXggKyBcIi5cIiArXG4gICAgICAgICAgICAgICAgdXJsLmdldFBhdGhMaXN0KCkuZ2V0TGFzdCgpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIExPRy5pbmZvKFwiTG9hZGluZyB0ZW1wbGF0ZSBcIiArIG5hbWUgKyBcIiBhdCBcIiArIHVybC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHNlKSA9PiB7XG4gICAgICAgICAgICBDbGllbnQuZ2V0KHVybCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZighcmVzcG9uc2Uub2spe1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2FkIHRlbXBsYXRlIGZvciBcIiArIG5hbWUgKyBcIiBhdCBcIiArIHVybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQobmFtZSxuZXcgVGVtcGxhdGUodGV4dCksdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2xzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBMb2dnZXIsIE1hcCB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwibWluZGlfdjFcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVSZWdpc3RyeSB9IGZyb20gXCIuL3RlbXBsYXRlUmVnaXN0cnkuanNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJUZW1wbGF0ZVBvc3RDb25maWdcIik7XHJcblxyXG4vKipcclxuICogVG8gYmUgYWRkZWQgdG8gbWluZGkgYXMgYSBzaW5nbGV0b24uIFdpbGwgc2NhbiB0aHJvdWdoIGFsbCBjb25maWd1cmVkIGNsYXNzZXMgdGhhdCBoYXZlIGEgVEVNUExBVEVfVVJMIGFuZCBDT01QT05FTlRfTkFNRVxyXG4gKiBzdGF0aWMgZ2V0dGVyIGFuZCB3aWxsIGFzeW5jcm9ub3VzbHkgbG9hZCB0aGVtLiBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB3aGVuIGFsbCB0ZW1wbGF0ZXMgYXJlIGxvYWRlZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlc0xvYWRlciB7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1RlbXBsYXRlUmVnaXN0cnl9IHRlbXBsYXRlUmVnaXN0cnkgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVnaXN0cnkpIHtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlUmVnaXN0cnkgPSB0ZW1wbGF0ZVJlZ2lzdHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgKi9cclxuICAgIGxvYWQoY29uZmlnKSB7XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlTWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGNvbmZpZy5nZXRDb25maWdFbGVtZW50cygpLmZvckVhY2goKGtleSwgZW50cnksIHBhcmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZihlbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLlRFTVBMQVRFX1VSTCAmJiBlbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLkNPTVBPTkVOVF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU1hcC5zZXQoZW50cnkuZ2V0Q2xhc3NSZWZlcmVuY2UoKS5DT01QT05FTlRfTkFNRSwgZW50cnkuZ2V0Q2xhc3NSZWZlcmVuY2UoKS5URU1QTEFURV9VUkwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sIHRoaXMpOyBcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5LmdldFRlbXBsYXRlc0xvYWRlZFByb21pc2UodGVtcGxhdGVNYXApO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IExvZ2dlciwgTWFwIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gXCJtaW5kaV92MVwiO1xyXG5pbXBvcnQgeyBTdHlsZXNSZWdpc3RyeSB9IGZyb20gXCIuL3N0eWxlc1JlZ2lzdHJ5LmpzXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiU3R5bGVzTG9hZGVyXCIpO1xyXG5cclxuLyoqXHJcbiAqIFRvIGJlIGFkZGVkIHRvIG1pbmRpIGFzIGEgc2luZ2xldG9uLiBXaWxsIHNjYW4gdGhyb3VnaCBhbGwgY29uZmlndXJlZCBjbGFzc2VzIHRoYXQgaGF2ZSBhIFNUWUxFU19VUkwgYW5kIENPTVBPTkVOVF9OQU1FXHJcbiAqIHN0YXRpYyBnZXR0ZXIgYW5kIHdpbGwgYXN5bmNyb25vdXNseSBsb2FkIHRoZW0uIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIHN0eWxlcyBhcmUgbG9hZGVkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3R5bGVzTG9hZGVyIHtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3R5bGVzUmVnaXN0cnl9IHN0eWxlc1JlZ2lzdHJ5IFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZXNSZWdpc3RyeSkge1xyXG4gICAgICAgIHRoaXMuc3R5bGVzUmVnaXN0cnkgPSBzdHlsZXNSZWdpc3RyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAgICovXHJcbiAgICBsb2FkKGNvbmZpZykge1xyXG4gICAgICAgIGxldCBzdHlsZXNNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgY29uZmlnLmdldENvbmZpZ0VsZW1lbnRzKCkuZm9yRWFjaCgoa2V5LCBlbnRyeSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGVudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuU1RZTEVTX1VSTCAmJiBlbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLkNPTVBPTkVOVF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZXNNYXAuc2V0KGVudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuQ09NUE9ORU5UX05BTUUsIGVudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuU1RZTEVTX1VSTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlc1JlZ2lzdHJ5LmdldFN0eWxlc0xvYWRlZFByb21pc2Uoc3R5bGVzTWFwKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBDb25maWcsIEluamVjdG9yIH0gZnJvbSBcIm1pbmRpX3YxXCI7XHJcbmltcG9ydCB7IFN0eWxlc1JlZ2lzdHJ5IH0gZnJvbSBcIi4uL3N0eWxlcy9zdHlsZXNSZWdpc3RyeS5qc1wiO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVJlZ2lzdHJ5IH0gZnJvbSBcIi4uL3RlbXBsYXRlL3RlbXBsYXRlUmVnaXN0cnkuanNcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVzTG9hZGVyIH0gZnJvbSBcIi4uL3RlbXBsYXRlL3RlbXBsYXRlc0xvYWRlci5qc1wiO1xyXG5pbXBvcnQgeyBTdHlsZXNMb2FkZXIgfSBmcm9tIFwiLi4vc3R5bGVzL3N0eWxlc0xvYWRlci5qc1wiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJDb21wb25lbnRDb25maWdQcm9jZXNzb3JcIilcclxuXHJcbi8qKlxyXG4gKiBNaW5kaSBjb25maWcgcHJvY2Vzc29yIHdoaWNoIGxvYWRzIGFsbCB0ZW1wbGF0ZXMgYW5kIHN0eWxlcyBmb3IgYWxsIGNvbmZpZ3VyZWQgY29tcG9uZW50c1xyXG4gKiBhbmQgdGhlbiBjYWxscyBhbnkgZXhpc3RpbmcgY29tcG9uZW50TG9hZGVkIGZ1bmN0aW9uIG9uIGVhY2ggY29tcG9uZW50XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50Q29uZmlnUHJvY2Vzc29yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1RlbXBsYXRlUmVnaXN0cnl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5ID0gVGVtcGxhdGVSZWdpc3RyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0eWxlc1JlZ2lzdHJ5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc3R5bGVzUmVnaXN0cnkgPSBTdHlsZXNSZWdpc3RyeTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7aW5qZWN0b3J9IGluamVjdG9yIFxyXG4gICAgICovXHJcbiAgICBwb3N0SW5qZWN0KGluamVjdG9yKXtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlc0xvYWRlciA9IG5ldyBUZW1wbGF0ZXNMb2FkZXIodGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5KTtcclxuICAgICAgICB0aGlzLnN0eWxlc0xvYWRlciA9IG5ldyBTdHlsZXNMb2FkZXIodGhpcy5zdHlsZXNSZWdpc3RyeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWcgXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc0NvbmZpZyhjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICAgIFsgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlc0xvYWRlci5sb2FkKGNvbmZpZyksIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXNMb2FkZXIubG9hZChjb25maWcpIFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBNYXAgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBVbmlxdWVJZFJlZ2lzdHJ5IHtcclxuXHJcbiAgICBpZEF0dHJpYnV0ZVdpdGhTdWZmaXggKGlkKSB7XHJcbiAgICAgICAgaWYoaWROYW1lcy5jb250YWlucyhpZCkpIHtcclxuICAgICAgICAgICAgdmFyIG51bWJlciA9IGlkTmFtZXMuZ2V0KGlkKTtcclxuICAgICAgICAgICAgaWROYW1lcy5zZXQoaWQsbnVtYmVyKzEpO1xyXG4gICAgICAgICAgICByZXR1cm4gaWQgKyBcIi1cIiArIG51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWROYW1lcy5zZXQoaWQsMSk7XHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxudmFyIGlkTmFtZXMgPSBuZXcgTWFwKCk7IiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQgeyBFbGVtZW50TWFwcGVyIH0gZnJvbSBcIi4uL2VsZW1lbnQvZWxlbWVudE1hcHBlci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgRXZlbnR7XG5cbiAgICBjb25zdHJ1Y3RvcihldmVudCl7XG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgICAgICAgaWYodGhpcy5ldmVudC50eXBlLnRvTG93ZXJDYXNlKCkgPT0gXCJkcmFnc3RhcnRcIil7XG4gICAgICAgICAgICB0aGlzLmV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmV2ZW50RGVmYXVsdCgpe1xuICAgICAgICB0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGV2ZW50IGFuZCB0aGUgZWRnZSB4IGNvb3JkaW5hdGUgb2YgdGhlIGNvbnRhaW5pbmcgb2JqZWN0XG4gICAgICovXG4gICAgZ2V0T2Zmc2V0WCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudC5vZmZzZXRYO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBldmVudCBhbmQgdGhlIGVkZ2UgeSBjb29yZGluYXRlIG9mIHRoZSBjb250YWluaW5nIG9iamVjdFxuICAgICAqL1xuICAgIGdldE9mZnNldFkoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQub2Zmc2V0WTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbW91c2UgeCBjb29yZGluYXRlIG9mIHRoZSBldmVudCByZWxhdGl2ZSB0byB0aGUgY2xpZW50IHdpbmRvdyB2aWV3XG4gICAgICovXG4gICAgZ2V0Q2xpZW50WCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudC5jbGllbnRYO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtb3VzZSB5IGNvb3JkaW5hdGUgb2YgdGhlIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSBjbGllbnQgd2luZG93IHZpZXdcbiAgICAgKi9cbiAgICBnZXRDbGllbnRZKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50LmNsaWVudFk7XG4gICAgfVxuXG4gICAgZ2V0VGFyZ2V0KCl7XG4gICAgICAgIHJldHVybiBFbGVtZW50TWFwcGVyLm1hcCh0aGlzLmV2ZW50LnRhcmdldCk7XG4gICAgfVxuXG4gICAgZ2V0S2V5Q29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQua2V5Q29kZTtcbiAgICB9XG5cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtMaXN0LE1hcCxPYmplY3RGdW5jdGlvbiwgTG9nZ2VyfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcbmltcG9ydCB7RXZlbnR9IGZyb20gXCIuL2V2ZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50L2Jhc2VFbGVtZW50LmpzXCI7XG5cbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJFdmVudFJlZ2lzdHJ5XCIpO1xuXG5leHBvcnQgY2xhc3MgRXZlbnRSZWdpc3RyeSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYmVmb3JlTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmFmdGVyTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggaXMgdGhlIHNvdXJjZSBvZiB0aGUgZXZlbnQgYW5kIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0b1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgdGhlIGV2ZW50IHR5cGUgYXMgaXQgaXMgZGVmaW5lZCBieSB0aGUgY29udGFpbmluZyB0cmlnZ2VyIChleGFtcGxlIFwib25jbGlja1wiKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUgYXMgaXQgd2lsbCBiZSByZWZlcnJlZCB0byBpbiB0aGUgRXZlbnRSZWdpc3RyeSAoZXhhbXBsZSBcIi8vZXZlbnQ6Y2xpY2tlZFwiKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRJbmRleCB1bmlxdWUgaWQgb2YgdGhlIGNvbXBvbmVudCB3aGljaCBvd25zIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgYXR0YWNoKGVsZW1lbnQsIGV2ZW50VHlwZSwgZXZlbnROYW1lLCBjb21wb25lbnRJbmRleCkge1xuICAgICAgICB2YXIgdW5pcXVlRXZlbnROYW1lID0gZXZlbnROYW1lICsgXCJfXCIgKyBjb21wb25lbnRJbmRleDtcbiAgICAgICAgdmFyIHRoZUV2ZW50UmVnaXN0cnkgPSB0aGlzO1xuICAgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KGV2ZW50VHlwZSwgZnVuY3Rpb24oZXZlbnQpIHsgdGhlRXZlbnRSZWdpc3RyeS50cmlnZ2VyKHVuaXF1ZUV2ZW50TmFtZSwgZXZlbnROYW1lLCBldmVudCk7IH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUgYXMgaXQgd2lsbCBiZSByZWZlcnJlZCB0byBpbiB0aGUgRXZlbnRSZWdpc3RyeSAoZXhhbXBsZSBcIi8vZXZlbnQ6Y2xpY2tlZFwiKVxuICAgICAqIEBwYXJhbSB7T2JqZWN0RnVuY3Rpb259IGxpc3RlbmVyIHRoZSBvYmplY3Qgd2hpY2ggb3ducyB0aGUgaGFuZGxlciBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bmlxdWVJbmRleCBhIHVuaXF1ZSBpbmRleCBmb3IgdGhlIGV2ZW50XG4gICAgICovXG4gICAgbGlzdGVuKGV2ZW50TmFtZSwgb2JqZWN0RnVuY3Rpb24sIHVuaXF1ZUluZGV4KSB7XG4gICAgICAgIGV2ZW50TmFtZSA9IGV2ZW50TmFtZSArIFwiX1wiICsgdW5pcXVlSW5kZXg7XG4gICAgICAgIGlmKCF0aGlzLmxpc3RlbmVycy5leGlzdHMoZXZlbnROYW1lKSl7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5zZXQoZXZlbnROYW1lLG5ldyBMaXN0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmdldChldmVudE5hbWUpLmFkZChvYmplY3RGdW5jdGlvbik7XG4gICAgfVxuXG4gICAgbGlzdGVuQmVmb3JlKGV2ZW50TmFtZSxoYW5kbGVyT2JqZWN0LGhhbmRsZXJGdW5jdGlvbikge1xuICAgICAgICBpZighdGhpcy5iZWZvcmVMaXN0ZW5lcnMuZXhpc3RzKGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlTGlzdGVuZXJzLnNldChldmVudE5hbWUsbmV3IExpc3QoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9iamVjdEZ1bmN0aW9uID0gbmV3IE9iamVjdEZ1bmN0aW9uKGhhbmRsZXJPYmplY3QsaGFuZGxlckZ1bmN0aW9uKTtcbiAgICAgICAgdGhpcy5iZWZvcmVMaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSkuYWRkKG9iamVjdEZ1bmN0aW9uKTtcbiAgICB9XG5cbiAgICBsaXN0ZW5BZnRlcihldmVudE5hbWUsaGFuZGxlck9iamVjdCxoYW5kbGVyRnVuY3Rpb24pIHtcbiAgICAgICAgaWYoIXRoaXMuYWZ0ZXJMaXN0ZW5lcnMuZXhpc3RzKGV2ZW50TmFtZSkpe1xuICAgICAgICAgICAgdGhpcy5hZnRlckxpc3RlbmVycy5zZXQoZXZlbnROYW1lLG5ldyBMaXN0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWZ0ZXJMaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSkuYWRkKG5ldyBPYmplY3RGdW5jdGlvbihoYW5kbGVyT2JqZWN0LGhhbmRsZXJGdW5jdGlvbikpO1xuICAgIH1cblxuICAgIHRyaWdnZXIoc3VmZml4ZWRFdmVudE5hbWUsIGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVCZWZvcmUoZXZlbnROYW1lLCBldmVudCk7XG4gICAgICAgIGlmKHRoaXMubGlzdGVuZXJzLmV4aXN0cyhzdWZmaXhlZEV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50TGlzdGVuZXJzID0gbmV3IExpc3QoKTtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLmdldChzdWZmaXhlZEV2ZW50TmFtZSkuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgcGFyZW50KXtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LHRoaXMpO1xuICAgICAgICAgICAgY3VycmVudExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBwYXJlbnQpe1xuICAgICAgICAgICAgICAgIHZhbHVlLmNhbGwobmV3IEV2ZW50KGV2ZW50KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlQWZ0ZXIoZXZlbnROYW1lLCBldmVudCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQmVmb3JlKGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVHbG9iYWwodGhpcy5iZWZvcmVMaXN0ZW5lcnMsZXZlbnROYW1lLCBldmVudCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQWZ0ZXIoZXZlbnROYW1lLCBldmVudCkge1xuICAgICAgICB0aGlzLmhhbmRsZUdsb2JhbCh0aGlzLmFmdGVyTGlzdGVuZXJzLGV2ZW50TmFtZSwgZXZlbnQpO1xuICAgIH1cblxuICAgIGhhbmRsZUdsb2JhbChsaXN0ZW5lcnMsIGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgaWYobGlzdGVuZXJzLmV4aXN0cyhldmVudE5hbWUpKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudExpc3RlbmVycyA9IG5ldyBMaXN0KCk7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSkuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSxwYXJlbnQpe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0ZW5lcnMuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sdGhpcyk7XG4gICAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUscGFyZW50KXtcbiAgICAgICAgICAgICAgICB2YWx1ZS5jYWxsKG5ldyBFdmVudChldmVudCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IE1hcCwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IFhtbEVsZW1lbnQgfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XHJcbmltcG9ydCB7IEVsZW1lbnRNYXBwZXIgfSBmcm9tIFwiLi4vZWxlbWVudC9lbGVtZW50TWFwcGVyXCI7XHJcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvYmFzZUVsZW1lbnRcIjtcclxuaW1wb3J0IHsgRXZlbnRSZWdpc3RyeSB9IGZyb20gXCIuLi9ldmVudC9ldmVudFJlZ2lzdHJ5XCI7XHJcblxyXG4vKipcclxuICogQ29sbGVjdHMgaW5mb3JtYXRpb24gd2hlbiBlbGVtZW50cyBhcmUgY3JlYXRlZCBhbmQgZmluZHMgdGhlIHJvb3QgZWxlbWVudCwgY3JlYXRlcyBtYXAgb2YgZWxlbWVudHMgXHJcbiAqIGFuZCByZWdpc3RlcnMgZXZlbnRzIGluIHRoZSBldmVudFJlZ2lzdHJ5XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRWxlbWVudFJlZ2lzdHJhdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihldmVudFJlZ2lzdHJ5LCB1bmlxdWVJZFJlZ2lzdHJ5LCBjb21wb25lbnRJbmRleCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SW5kZXggPSBjb21wb25lbnRJbmRleDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtNYXB9ICovXHJcbiAgICAgICAgdGhpcy51bmlxdWVJZFJlZ2lzdHJ5ID0gdW5pcXVlSWRSZWdpc3RyeTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtFdmVudFJlZ2lzdHJ5fSAqL1xyXG4gICAgICAgIHRoaXMuZXZlbnRSZWdpc3RyeSA9IGV2ZW50UmVnaXN0cnk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7QmFzZUVsZW1lbnR9ICovXHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcCA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSb290RWxlbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFbGVtZW50TWFwKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRNYXA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29tcG9uZW50SW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50SW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMaXN0ZW5zIHRvIGVsZW1lbnRzIGJlaW5nIGNyZWF0ZWQsIGFuZCB0YWtlcyBpbm4gdGhlIGNyZWF0ZWQgWG1sRWxlbWVudCBhbmQgaXRzIHBhcmVudCBYbWxFbGVtZW50XHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0geG1sRWxlbWVudCBcclxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudFdyYXBwZXIgXHJcbiAgICAgKi9cclxuICAgIGVsZW1lbnRDcmVhdGVkICh4bWxFbGVtZW50LCBwYXJlbnRXcmFwcGVyKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBFbGVtZW50TWFwcGVyLm1hcCh4bWxFbGVtZW50LCBwYXJlbnRXcmFwcGVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRUb0VsZW1lbnRJZE1hcChlbGVtZW50KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRWxlbWVudEV2ZW50cyhlbGVtZW50KTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5yb290RWxlbWVudCA9PT0gbnVsbCAmJiBlbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJFbGVtZW50RXZlbnRzKGVsZW1lbnQpe1xyXG4gICAgICAgIGlmKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8ICEoZWxlbWVudCBpbnN0YW5jZW9mIEJhc2VFbGVtZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBldmVudFJlZ2lzdHJ5ID0gdGhpcy5ldmVudFJlZ2lzdHJ5O1xyXG4gICAgICAgIHZhciBjb21wb25lbnRJbmRleCA9IHRoaXMuY29tcG9uZW50SW5kZXg7XHJcbiAgICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGVzKCkuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlS2V5LGF0dHJpYnV0ZSxwYXJlbnQpe1xyXG4gICAgICAgICAgICBpZihhdHRyaWJ1dGUgIT09IG51bGwgJiYgYXR0cmlidXRlICE9PSB1bmRlZmluZWQgJiYgYXR0cmlidXRlLmdldFZhbHVlKCkuc3RhcnRzV2l0aChcIi8vZXZlbnQ6XCIpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gYXR0cmlidXRlLmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRUeXBlID0gYXR0cmlidXRlLmdldE5hbWUoKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50UmVnaXN0cnkuYXR0YWNoKGVsZW1lbnQsZXZlbnRUeXBlLGV2ZW50TmFtZSxjb21wb25lbnRJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7ICAgICAgICAgXHJcbiAgICAgICAgfSx0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRUb0VsZW1lbnRJZE1hcChlbGVtZW50KSB7XHJcbiAgICAgICAgaWYoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSB1bmRlZmluZWQgfHwgIShlbGVtZW50IGluc3RhbmNlb2YgQmFzZUVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlkID0gbnVsbDtcclxuICAgICAgICBpZihlbGVtZW50LmNvbnRhaW5zQXR0cmlidXRlKFwiaWRcIikpIHtcclxuICAgICAgICAgICAgaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZVZhbHVlKFwiaWRcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlVmFsdWUoXCJpZFwiLHRoaXMudW5pcXVlSWRSZWdpc3RyeS5pZEF0dHJpYnV0ZVdpdGhTdWZmaXgoaWQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGlkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudE1hcC5zZXQoaWQsZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IFVuaXF1ZUlkUmVnaXN0cnkgfSBmcm9tIFwiLi91bmlxdWVJZFJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7IEVsZW1lbnRSZWdpc3RyYXRvciB9IGZyb20gXCIuL2VsZW1lbnRSZWdpc3RyYXRvclwiO1xyXG5pbXBvcnQgeyBFdmVudFJlZ2lzdHJ5IH0gZnJvbSBcIi4uL2V2ZW50L2V2ZW50UmVnaXN0cnlcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVSZWdpc3RyeSB9IGZyb20gXCIuLi90ZW1wbGF0ZS90ZW1wbGF0ZVJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7IERvbVRyZWUgfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBTdHlsZXNSZWdpc3RyeSB9IGZyb20gXCIuLi9zdHlsZXMvc3R5bGVzUmVnaXN0cnlcIjtcclxuaW1wb3J0IHsgQ2FudmFzU3R5bGVzIH0gZnJvbSBcIi4uL2NhbnZhcy9jYW52YXNTdHlsZXNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJDb21wb25lbnRGYWN0b3J5XCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbXBvbmVudEZhY3Rvcnkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge0V2ZW50UmVnaXN0cnl9ICovXHJcbiAgICAgICAgdGhpcy5ldmVudFJlZ2lzdHJ5ID0gRXZlbnRSZWdpc3RyeTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtTdHlsZXNSZWdpc3RyeX0gKi9cclxuICAgICAgICB0aGlzLnN0eWxlc1JlZ2lzdHJ5ID0gU3R5bGVzUmVnaXN0cnk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7VGVtcGxhdGVSZWdpc3RyeX0gKi9cclxuICAgICAgICB0aGlzLnRlbXBsYXRlUmVnaXN0cnkgPSBUZW1wbGF0ZVJlZ2lzdHJ5O1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge1VuaXF1ZUlkUmVnaXN0cnl9ICovXHJcbiAgICAgICAgdGhpcy51bmlxdWVJZFJlZ2lzdHJ5ID0gVW5pcXVlSWRSZWdpc3RyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgcmVwcmVzZW50cyB0aGUgdGVtcGxhdGUgYW5kIHRoZSBzdHlsZXMgbmFtZSBpZiB0aGUgc3R5bGUgZm9yIHRoYXQgbmFtZSBpcyBhdmFpbGFibGVcclxuICAgICAqL1xyXG4gICAgY3JlYXRlKG5hbWUpe1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVSZWdpc3RyeS5nZXQobmFtZSk7XHJcbiAgICAgICAgaWYoIXRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcih0aGlzLnRlbXBsYXRlUmVnaXN0cnkpO1xyXG4gICAgICAgICAgICB0aHJvdyBcIk5vIHRlbXBsYXRlIHdhcyBmb3VuZCB3aXRoIG5hbWUgXCIgKyBuYW1lO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVsZW1lbnRSZWdpc3RyYXRvciA9IG5ldyBFbGVtZW50UmVnaXN0cmF0b3IodGhpcy5ldmVudFJlZ2lzdHJ5LCB0aGlzLnVuaXF1ZUlkUmVnaXN0cnksIGNvbXBvbmVudENvdW50ZXIrKyk7XHJcbiAgICAgICAgbmV3IERvbVRyZWUodGVtcGxhdGUuZ2V0VGVtcGxhdGVTb3VyY2UoKSxlbGVtZW50UmVnaXN0cmF0b3IpLmxvYWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VudFN0eWxlcyhuYW1lKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb25lbnQoZWxlbWVudFJlZ2lzdHJhdG9yLmdldENvbXBvbmVudEluZGV4KCksIGVsZW1lbnRSZWdpc3RyYXRvci5nZXRSb290RWxlbWVudCgpLCBlbGVtZW50UmVnaXN0cmF0b3IuZ2V0RWxlbWVudE1hcCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3VudFN0eWxlcyhuYW1lKSB7XHJcbiAgICAgICAgaWYodGhpcy5zdHlsZXNSZWdpc3RyeS5jb250YWlucyhuYW1lKSkge1xyXG4gICAgICAgICAgICBDYW52YXNTdHlsZXMuc2V0U3R5bGUobmFtZSwgdGhpcy5zdHlsZXNSZWdpc3RyeS5nZXQobmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbnZhciBjb21wb25lbnRDb3VudGVyID0gMDsiLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJDb21wb25lbnRJbnN0YW5jZVByb2Nlc3NvclwiKTtcclxuXHJcbi8qKlxyXG4gKiBJbnN0YW5jZSB3aGljaCBjYWxscyBjcmVhdGVDb21wb25lbnQgb24gY29tcG9uZW50cyBhZnRlciBjb25maWdQcm9jZXNzb3IgaXMgZmluaXNoZWRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21wb25lbnRJbnN0YW5jZVByb2Nlc3NvciB7XHJcblxyXG4gICAgcHJvY2Vzc0luc3RhbmNlKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaWYoaW5zdGFuY2UuY3JlYXRlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmNyZWF0ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBQcm9wZXJ0eUFjY2Vzc29yLCBMaXN0LCBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvYWJzdHJhY3RJbnB1dEVsZW1lbnRcIjtcblxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIklucHV0RWxlbWVudERhdGFCaW5kaW5nXCIpO1xuXG5leHBvcnQgY2xhc3MgSW5wdXRFbGVtZW50RGF0YUJpbmRpbmcge1xuXG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZhbGlkYXRvcikge1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMudmFsaWRhdG9yID0gdmFsaWRhdG9yO1xuICAgICAgICB0aGlzLnB1bGxlcnMgPSBuZXcgTGlzdCgpO1xuICAgICAgICB0aGlzLnB1c2hlcnMgPSBuZXcgTGlzdCgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBsaW5rKG1vZGVsLCB2YWxpZGF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnB1dEVsZW1lbnREYXRhQmluZGluZyhtb2RlbCwgdmFsaWRhdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0SW5wdXRFbGVtZW50fSBmaWVsZCBcbiAgICAgKi9cbiAgICBhbmQoZmllbGQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG8oZmllbGQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7QWJzdHJhY3RJbnB1dEVsZW1lbnR9IGZpZWxkIFxuICAgICAqL1xuICAgIHRvKGZpZWxkKSB7XG4gICAgICAgIGNvbnN0IHB1bGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGxldCBtb2RlbFZhbHVlID0gUHJvcGVydHlBY2Nlc3Nvci5nZXRWYWx1ZSh0aGlzLm1vZGVsLCBmaWVsZC5nZXROYW1lKCkpO1xuICAgICAgICAgICAgaWYgKGZpZWxkLmdldFZhbHVlICYmIG1vZGVsVmFsdWUgIT09IGZpZWxkLmdldFZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICBQcm9wZXJ0eUFjY2Vzc29yLnNldFZhbHVlKHRoaXMubW9kZWwsIGZpZWxkLmdldE5hbWUoKSwgZmllbGQuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0aGlzLnZhbGlkYXRvciAmJiB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0b3IudmFsaWRhdGUoZmllbGQuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZpZWxkLmF0dGFjaEV2ZW50KFwib25jaGFuZ2VcIiwgcHVsbGVyKTtcbiAgICAgICAgZmllbGQuYXR0YWNoRXZlbnQoXCJvbmtleXVwXCIsIHB1bGxlcik7XG4gICAgICAgIHB1bGxlci5jYWxsKCk7XG5cbiAgICAgICAgY29uc3QgcHVzaGVyID0gKCkgPT4ge1xuICAgICAgICAgICAgdmFyIG1vZGVsVmFsdWUgPSBQcm9wZXJ0eUFjY2Vzc29yLmdldFZhbHVlKHRoaXMubW9kZWwsIGZpZWxkLmdldE5hbWUoKSk7XG4gICAgICAgICAgICBpZihtb2RlbFZhbHVlID09PSBmaWVsZC5nZXRWYWx1ZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNldENoZWNrZWQgJiYgIWZpZWxkLmdldENoZWNrZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRDaGVja2VkKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNldENoZWNrZWQgJiYgZmllbGQuZ2V0Q2hlY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkLnNldENoZWNrZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGQuc2V0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuc2V0VmFsdWUobW9kZWxWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGNoYW5nZWRGdW5jdGlvbk5hbWUgPSBcIl9fY2hhbmdlZF9cIiArIGZpZWxkLmdldE5hbWUoKS5yZXBsYWNlKFwiLlwiLFwiX1wiKTtcbiAgICAgICAgaWYoIXRoaXMubW9kZWxbY2hhbmdlZEZ1bmN0aW9uTmFtZV0pIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWxbY2hhbmdlZEZ1bmN0aW9uTmFtZV0gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnB1bGxlcnMuYWRkKHB1bGxlcik7XG4gICAgICAgIHRoaXMucHVzaGVycy5hZGQocHVzaGVyKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWxsKCkge1xuICAgICAgICB0aGlzLnB1bGxlcnMuZm9yRWFjaCgodmFsdWUsIHBhcmVudCkgPT4ge1xuICAgICAgICAgICAgdmFsdWUuY2FsbChwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIHB1c2goKSB7XG4gICAgICAgIHRoaXMucHVzaGVycy5mb3JFYWNoKCh2YWx1ZSwgcGFyZW50KSA9PiB7XG4gICAgICAgICAgICB2YWx1ZS5jYWxsKHBhcmVudCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFByb3h5T2JqZWN0RmFjdG9yeSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcHJveHkgZm9yIGFuIG9iamVjdCB3aGljaCBhbGxvd3MgZGF0YWJpbmRpbmcgZnJvbSB0aGUgb2JqZWN0IHRvIHRoZSBmb3JtIGVsZW1lbnRcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZVByb3h5T2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkob2JqZWN0LCB7XHJcbiAgICAgICAgICAgIHNldDogKHRhcmdldCwgcHJvcCwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBzdWNjZXNzID0gKHRhcmdldFtwcm9wXSA9IHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlZEZ1bmN0aW9uTmFtZSA9IFwiX19jaGFuZ2VkX1wiICsgcHJvcDtcclxuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VkRnVuY3Rpb24gPSB0YXJnZXRbY2hhbmdlZEZ1bmN0aW9uTmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZihjaGFuZ2VkRnVuY3Rpb24gJiYgdHlwZW9mIGNoYW5nZWRGdW5jdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJvdW5kQ2hhbmdlZEZ1bmN0aW9uID0gY2hhbmdlZEZ1bmN0aW9uLmJpbmQodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBib3VuZENoYW5nZWRGdW5jdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MgPT09IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgVXJsIH0gZnJvbSBcIi4uL3V0aWwvdXJsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlzdG9yeSB7XHJcblxyXG4gICAgc3RhdGljIHB1c2hVcmwodXJsLHRpdGxlLHN0YXRlT2JqZWN0KSB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKHN0YXRlT2JqZWN0LCB0aXRsZSwgdXJsLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRVcmwoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVcmwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBsb2FkVXJsKHVybCkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IHVybC50b1N0cmluZygpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtIaXN0b3J5fSBmcm9tIFwiLi4vbmF2aWdhdGlvbi9oaXN0b3J5LmpzXCI7XHJcbmltcG9ydCB7TWFwfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdGF0ZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGVMaXN0ZW5lck1hcCA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWNvcmRTdGF0ZShuZXdQYXRoKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IEhpc3RvcnkuZ2V0VXJsKCk7XHJcbiAgICAgICAgLy8gUHVzaCBjdXJyZW50IHVybCB0byBicm93c2VyIGhpc3RvcnlcclxuICAgICAgICBpZighKHVybC5nZXRQYXRoKDApID09PSBuZXdQYXRoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFVybCh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgYSBuZXcgc3RhdGVcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHVybCBcclxuICAgICAqL1xyXG4gICAgc2V0VXJsKHVybCkge1xyXG4gICAgICAgIEhpc3RvcnkucHVzaFVybCh1cmwsXCJcIix7fSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBDb25maWcgfSBmcm9tIFwibWluZGlfdjFcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVSZWdpc3RyeSB9IGZyb20gXCIuL3RlbXBsYXRlL3RlbXBsYXRlUmVnaXN0cnkuanNcIjtcclxuaW1wb3J0IHsgRXZlbnRSZWdpc3RyeSB9IGZyb20gXCIuL2V2ZW50L2V2ZW50UmVnaXN0cnkuanNcIjtcclxuaW1wb3J0IHsgVW5pcXVlSWRSZWdpc3RyeSB9IGZyb20gXCIuL2NvbXBvbmVudC91bmlxdWVJZFJlZ2lzdHJ5LmpzXCI7XHJcbmltcG9ydCB7IENvbXBvbmVudEZhY3RvcnkgfSBmcm9tIFwiLi9jb21wb25lbnQvY29tcG9uZW50RmFjdG9yeS5qc1wiO1xyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gXCIuL25hdmlnYXRpb24vc3RhdGUuanNcIjtcclxuaW1wb3J0IHsgU3R5bGVzUmVnaXN0cnkgfSBmcm9tIFwiLi9zdHlsZXMvc3R5bGVzUmVnaXN0cnkuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBKdXN0cmlnaHRDb25maWcge1xyXG5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcclxuICAgICAgICBpZihqdXN0cmlnaHRDb25maWcgPT09IG51bGwpIHtcclxuICAgICAgICAgICAganVzdHJpZ2h0Q29uZmlnID0gbmV3IEp1c3RyaWdodENvbmZpZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ganVzdHJpZ2h0Q29uZmlnO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gbmV3IENvbmZpZygpXHJcbiAgICAgICAgICAgIC5hZGRTaW5nbGV0b24oVGVtcGxhdGVSZWdpc3RyeSlcclxuICAgICAgICAgICAgLmFkZFNpbmdsZXRvbihTdHlsZXNSZWdpc3RyeSlcclxuICAgICAgICAgICAgLmFkZFNpbmdsZXRvbihFdmVudFJlZ2lzdHJ5KVxyXG4gICAgICAgICAgICAuYWRkU2luZ2xldG9uKFVuaXF1ZUlkUmVnaXN0cnkpXHJcbiAgICAgICAgICAgIC5hZGRTaW5nbGV0b24oQ29tcG9uZW50RmFjdG9yeSlcclxuICAgICAgICAgICAgLmFkZFNpbmdsZXRvbihTdGF0ZSlcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb25maWcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxudmFyIGp1c3RyaWdodENvbmZpZyA9IG51bGw7IiwiaW1wb3J0IHsgQ29udGFpbmVyQnJpZGdlIH0gZnJvbSBcIi4uL2JyaWRnZS9jb250YWluZXJCcmlkZ2UuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBcHBsaWNhdGlvblN0b3JhZ2Uge1xyXG4gICAgXHJcbiAgICBzdGF0aWMgc2V0TG9jYWxBdHRyaWJ1dGUoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIENvbnRhaW5lckJyaWRnZS5zZXRMb2NhbEF0dHJpYnV0ZShrZXksdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRMb2NhbEF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmdldExvY2FsQXR0cmlidXRlKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGhhc0xvY2FsQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UuaGFzTG9jYWxBdHRyaWJ1dGUoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlTG9jYWxBdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5yZW1vdmVMb2NhbEF0dHJpYnV0ZShrZXkpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29udGFpbmVyQnJpZGdlIH0gZnJvbSBcIi4uL2JyaWRnZS9jb250YWluZXJCcmlkZ2UuanNcIlxyXG5cclxuZXhwb3J0IGNsYXNzIFNlc3Npb25TdG9yYWdlIHtcclxuXHJcbiAgICBzdGF0aWMgc2V0U2Vzc2lvbkF0dHJpYnV0ZShrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgQ29udGFpbmVyQnJpZGdlLnNldFNlc3Npb25BdHRyaWJ1dGUoa2V5LHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGFzU2Vzc2lvbkF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmhhc1Nlc3Npb25BdHRyaWJ1dGUoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0U2Vzc2lvbkF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmdldFNlc3Npb25BdHRyaWJ1dGUoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlU2Vzc2lvbkF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLnJlbW92ZVNlc3Npb25BdHRyaWJ1dGUoa2V5KTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBPYmplY3RGdW5jdGlvbiB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEh0dHBSZXNwb25zZUhhbmRsZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29kZSBcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0RnVuY3Rpb259IG9iamVjdEZ1bmN0aW9uIFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWFwcGVyRnVuY3Rpb24gXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG9iamVjdEZ1bmN0aW9uLCBtYXBwZXJGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5vYmplY3RGdW5jdGlvbiA9IG9iamVjdEZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMubWFwcGVyRnVuY3Rpb24gPSBtYXBwZXJGdW5jdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldENvZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3RGdW5jdGlvbn1cclxuICAgICAqL1xyXG4gICAgZ2V0T2JqZWN0RnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0RnVuY3Rpb25cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHtjbGFzc31cclxuICAgICAqL1xyXG4gICAgZ2V0TWFwcGVyRnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwcGVyRnVuY3Rpb247XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgTWFwLCBPYmplY3RGdW5jdGlvbiwgT2JqZWN0TWFwcGVyLCBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgSHR0cFJlc3BvbnNlSGFuZGxlciB9IGZyb20gXCIuL2h0dHBSZXNwb25zZUhhbmRsZXJcIjtcclxuaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcIi4uL2NsaWVudC9jbGllbnQuanNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJIdHRwQ2FsbEJ1aWxkZXJcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgSHR0cENhbGxCdWlsZGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbWV0ZXIgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHVybCwgcGFyYW10ZXIpIHtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtTdHJpbmd9ICovXHJcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xyXG4gICAgICAgIHRoaXMucGFyYW10ZXIgPSBwYXJhbXRlcjtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtNYXB9ICovXHJcbiAgICAgICAgdGhpcy5odHRwQ2FsbGJhY2tNYXAgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0RnVuY3Rpb259ICovXHJcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtDbGllbnR9IGNsaWVudCBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1ldGVyIFxyXG4gICAgICogQHJldHVybnMge0h0dHBDYWxsQnVpbGRlcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIG5ld0luc3RhbmNlKGNsaWVudCwgdXJsLCBwYXJhbWV0ZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEh0dHBDYWxsQnVpbGRlcihjbGllbnQsIHVybCwgcGFyYW1ldGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGNvZGUgXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb2JqZWN0IFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtYXBwZXJGdW5jdGlvbiBtYXBwZXIgZnVuY3Rpb24gdG8gcGFzcyB0aGUgcmVzdWx0IG9iamVjdCB0b1xyXG4gICAgICovXHJcbiAgICByZXNwb25zZU1hcHBpbmcoY29kZSwgb2JqZWN0LCBjYWxsYmFjaywgbWFwcGVyRnVuY3Rpb24pIHtcclxuICAgICAgICB0aGlzLmh0dHBDYWxsYmFja01hcC5zZXQoY29kZSwgbmV3IEh0dHBSZXNwb25zZUhhbmRsZXIoY29kZSwgbmV3IE9iamVjdEZ1bmN0aW9uKG9iamVjdCwgY2FsbGJhY2spLCBtYXBwZXJGdW5jdGlvbikpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb2JqZWN0IFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgXHJcbiAgICAgKi9cclxuICAgIGVycm9yTWFwcGluZyhvYmplY3QsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgaWYob2JqZWN0ICYmIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IG5ldyBPYmplY3RGdW5jdGlvbihvYmplY3QsIGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0KCkge1xyXG4gICAgICAgIENsaWVudC5nZXQodGhpcy51cmwpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc3QoKSB7XHJcbiAgICAgICAgQ2xpZW50LnBvc3QodGhpcy51cmwsIHRoaXMucGFyYW10ZXIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1dCgpIHtcclxuICAgICAgICBDbGllbnQucHV0KHRoaXMudXJsLCB0aGlzLnBhcmFtdGVyKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0Vycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwYXRjaCgpIHtcclxuICAgICAgICBDbGllbnQucGF0Y2godGhpcy51cmwsIHRoaXMucGFyYW10ZXIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICB9LCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICBDbGllbnQuZGVsZXRlKHRoaXMudXJsKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0Vycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICBMT0cuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIGlmKHRoaXMuZXJyb3JDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2suY2FsbChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1Jlc3BvbnNlfSByZXNwb25zZSBcclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgLyoqIEB0eXBlIHtIdHRwUmVzcG9uc2VIYW5kbGVyfSAqL1xyXG4gICAgICAgIHZhciByZXNwb25zZUhhbmRsZXIgPSB0aGlzLmh0dHBDYWxsYmFja01hcC5nZXQocmVzcG9uc2Uuc3RhdHVzKTtcclxuICAgICAgICBpZihyZXNwb25zZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAob2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBlckZ1bmN0aW9uID0gcmVzcG9uc2VIYW5kbGVyLmdldE1hcHBlckZ1bmN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobWFwcGVyRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyLmdldE9iamVjdEZ1bmN0aW9uKCkuY2FsbChtYXBwZXJGdW5jdGlvbihvYmplY3QpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhhbmRsZXIuZ2V0T2JqZWN0RnVuY3Rpb24oKS5jYWxsKG9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIChmYWlsUmVhc29uKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IExpc3QsIExvZ2dlciB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5cclxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIkFic3RyYWN0VmFsaWRhdG9yXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFic3RyYWN0VmFsaWRhdG9yIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNjdXJyZW50bHlWYWxpZFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihpc2N1cnJlbnRseVZhbGlkID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLnZhbGlkTGlzdGVuZXJMaXN0ID0gbmV3IExpc3QoKTtcclxuICAgICAgICB0aGlzLmludmFsaWRMaXN0ZW5lckxpc3QgPSBuZXcgTGlzdCgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudGx5VmFsaWQgPSBpc2N1cnJlbnRseVZhbGlkO1xyXG4gICAgfVxyXG5cclxuICAgIGlzVmFsaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNjdXJyZW50bHlWYWxpZDtcclxuICAgIH1cclxuXHJcblx0dmFsaWQoKSB7XHJcbiAgICAgICAgdGhpcy5pc2N1cnJlbnRseVZhbGlkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnZhbGlkTGlzdGVuZXJMaXN0LmZvckVhY2goKHZhbHVlLCBwYXJlbnQpID0+IHtcclxuICAgICAgICAgICAgdmFsdWUuY2FsbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LCB0aGlzKTtcclxuXHR9XHJcblxyXG5cdGludmFsaWQoKSB7XHJcbiAgICAgICAgdGhpcy5pc2N1cnJlbnRseVZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbnZhbGlkTGlzdGVuZXJMaXN0LmZvckVhY2goKHZhbHVlLCBwYXJlbnQpID0+IHtcclxuICAgICAgICAgICAgdmFsdWUuY2FsbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LCB0aGlzKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0RnVuY3Rpb259IHZhbGlkTGlzdGVuZXIgXHJcblx0ICovXHJcblx0d2l0aFZhbGlkTGlzdGVuZXIodmFsaWRMaXN0ZW5lcikge1xyXG5cdFx0dGhpcy52YWxpZExpc3RlbmVyTGlzdC5hZGQodmFsaWRMaXN0ZW5lcik7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0RnVuY3Rpb259IGludmFsaWRMaXN0ZW5lciBcclxuXHQgKi9cclxuXHR3aXRoSW52YWxpZExpc3RlbmVyKGludmFsaWRMaXN0ZW5lcikge1xyXG5cdFx0dGhpcy5pbnZhbGlkTGlzdGVuZXJMaXN0LmFkZChpbnZhbGlkTGlzdGVuZXIpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBMaXN0LCBPYmplY3RGdW5jdGlvbiB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBBYnN0cmFjdFZhbGlkYXRvciB9IGZyb20gJy4vYWJzdHJhY3RWYWxpZGF0b3IuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFuZFZhbGlkYXRvclNldCBleHRlbmRzIEFic3RyYWN0VmFsaWRhdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihpc1ZhbGlkRnJvbVN0YXJ0ID0gZmFsc2UpIHtcclxuICAgICAgICBzdXBlcihpc1ZhbGlkRnJvbVN0YXJ0KTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvckxpc3QgPSBuZXcgTGlzdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtBYnN0cmFjdFZhbGlkYXRvcn0gdmFsaWRhdG9yXHJcbiAgICAgKi9cclxuICAgIHdpdGhWYWxpZGF0b3IodmFsaWRhdG9yKSB7XHJcbiAgICAgICAgdmFsaWRhdG9yLndpdGhWYWxpZExpc3RlbmVyKG5ldyBPYmplY3RGdW5jdGlvbih0aGlzLCB0aGlzLm9uZVZhbGlkKSk7XHJcbiAgICAgICAgdmFsaWRhdG9yLndpdGhJbnZhbGlkTGlzdGVuZXIobmV3IE9iamVjdEZ1bmN0aW9uKHRoaXMsIHRoaXMub25lSW52YWxpZCkpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yTGlzdC5hZGQodmFsaWRhdG9yKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uZSB2YWxpZGF0b3Igc2FpZCBpdCB3YXMgdmFsaWRcclxuICAgICAqL1xyXG4gICAgb25lVmFsaWQoKSB7XHJcbiAgICAgICAgbGV0IGZvdW5kSW52YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yTGlzdC5mb3JFYWNoKCh2YWx1ZSxwYXJlbnQpID0+IHtcclxuICAgICAgICAgICAgaWYoIXZhbHVlLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZm91bmRJbnZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LCB0aGlzKTtcclxuICAgICAgICBpZighZm91bmRJbnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLnZhbGlkKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3VwZXIuaW52YWxpZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9uZSB2YWxpZGF0b3Igc2FpZCBpdCB3YXMgaW52YWxpZFxyXG4gICAgICovXHJcbiAgICBvbmVJbnZhbGlkKCkge1xyXG4gICAgICAgIHN1cGVyLmludmFsaWQoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEFic3RyYWN0VmFsaWRhdG9yIH0gZnJvbSBcIi4vYWJzdHJhY3RWYWxpZGF0b3IuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZWdleFZhbGlkYXRvciBleHRlbmRzIEFic3RyYWN0VmFsaWRhdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihpc2N1cnJlbnRseVZhbGlkID0gZmFsc2UsIHJlZ2V4ID0gXCIoLiopXCIpIHtcclxuICAgICAgICBzdXBlcihpc2N1cnJlbnRseVZhbGlkKTtcclxuICAgICAgICB0aGlzLnJlZ2V4ID0gcmVnZXg7XHJcbiAgICB9XHJcblxyXG5cdHZhbGlkYXRlKHZhbHVlKXtcclxuXHRcdGlmKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZS5tYXRjaCh0aGlzLnJlZ2V4KSl7XHJcblx0ICAgIFx0dGhpcy52YWxpZCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5pbnZhbGlkKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBSZWdleFZhbGlkYXRvciB9IGZyb20gXCIuL3JlZ2V4VmFsaWRhdG9yLmpzXCI7XHJcblxyXG5jb25zdCBFTUFJTF9GT1JNQVQgPSAvXlxcdysoW1xcLi1dP1xcdyspKkBcXHcrKFtcXC4tXT9cXHcrKSooXFwuXFx3ezIsM30pKyQvO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVtYWlsVmFsaWRhdG9yIGV4dGVuZHMgUmVnZXhWYWxpZGF0b3Ige1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlzY3VycmVudGx5VmFsaWQgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGlzY3VycmVudGx5VmFsaWQsIEVNQUlMX0ZPUk1BVCk7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IEFic3RyYWN0VmFsaWRhdG9yIH0gZnJvbSBcIi4vYWJzdHJhY3RWYWxpZGF0b3IuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFcXVhbHNWYWxpZGF0b3IgZXh0ZW5kcyBBYnN0cmFjdFZhbGlkYXRvciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaXNjdXJyZW50bHlWYWxpZCA9IGZhbHNlLCB2YWx1ZSA9IG51bGwpIHtcclxuXHRcdHN1cGVyKGlzY3VycmVudGx5VmFsaWQpO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcblx0dmFsaWRhdGUodmFsdWUpe1xyXG5cdFx0aWYodmFsdWUgJiYgdmFsdWUgPT09IHRoaXMudmFsdWUpe1xyXG5cdCAgICBcdHRoaXMudmFsaWQoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuaW52YWxpZCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn0iLCJpbXBvcnQgeyBMaXN0LCBPYmplY3RGdW5jdGlvbiB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBBYnN0cmFjdFZhbGlkYXRvciB9IGZyb20gJy4vYWJzdHJhY3RWYWxpZGF0b3IuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgT3JWYWxpZGF0b3JTZXQgZXh0ZW5kcyBBYnN0cmFjdFZhbGlkYXRvciB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKGlzVmFsaWRGcm9tU3RhcnQgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGlzVmFsaWRGcm9tU3RhcnQpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yTGlzdCA9IG5ldyBMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0VmFsaWRhdG9yfSB2YWxpZGF0b3JcclxuICAgICAqL1xyXG4gICAgd2l0aFZhbGlkYXRvcih2YWxpZGF0b3IpIHtcclxuICAgICAgICB2YWxpZGF0b3Iud2l0aFZhbGlkTGlzdGVuZXIobmV3IE9iamVjdEZ1bmN0aW9uKHRoaXMsIHRoaXMub25lVmFsaWQpKTtcclxuICAgICAgICB2YWxpZGF0b3Iud2l0aEludmFsaWRMaXN0ZW5lcihuZXcgT2JqZWN0RnVuY3Rpb24odGhpcywgdGhpcy5vbmVJbnZhbGlkKSk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3JMaXN0LmFkZCh2YWxpZGF0b3IpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25lIHZhbGlkYXRvciBzYWlkIGl0IHdhcyB2YWxpZFxyXG4gICAgICovXHJcbiAgICBvbmVWYWxpZCgpIHtcclxuICAgICAgICBzdXBlci52YWxpZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25lIHZhbGlkYXRvciBzYWlkIGl0IHdhcyBpbnZhbGlkXHJcbiAgICAgKi9cclxuICAgIG9uZUludmFsaWQoKSB7XHJcbiAgICAgICAgbGV0IGZvdW5kVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvckxpc3QuZm9yRWFjaCgodmFsdWUscGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKHZhbHVlLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZm91bmRWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgaWYoZm91bmRWYWxpZCkge1xyXG4gICAgICAgICAgICBzdXBlci52YWxpZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmludmFsaWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgUmVnZXhWYWxpZGF0b3IgfSBmcm9tIFwiLi9yZWdleFZhbGlkYXRvci5qc1wiO1xyXG5cclxuY29uc3QgUEFTU1dPUkRfRk9STUFUID0gL14oPz0uKltBLVphLXpdKSg/PS4qP1swLTldKSg/PS4qP1sjPyFAJCVeJiotXSkuezgsfSQvO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhc3N3b3JkVmFsaWRhdG9yIGV4dGVuZHMgUmVnZXhWYWxpZGF0b3Ige1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlzY3VycmVudGx5VmFsaWQgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGlzY3VycmVudGx5VmFsaWQsIFBBU1NXT1JEX0ZPUk1BVCk7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IEFic3RyYWN0VmFsaWRhdG9yIH0gZnJvbSBcIi4vYWJzdHJhY3RWYWxpZGF0b3IuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZXF1aXJlZFZhbGlkYXRvciBleHRlbmRzIEFic3RyYWN0VmFsaWRhdG9yIHtcclxuXHJcblx0dmFsaWRhdGUodmFsdWUpe1xyXG5cdFx0aWYodmFsdWUgPT09IFwiXCIpe1xyXG5cdCAgICBcdHRoaXMuaW52YWxpZCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy52YWxpZCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuIl0sIm5hbWVzIjpbIkxPRyIsIkxvZ2dlciIsIkNvbnRhaW5lckJyaWRnZSIsIltvYmplY3QgT2JqZWN0XSIsImlkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwiY3JlYXRlVGV4dE5vZGUiLCJuYW1lIiwiY3JlYXRlRWxlbWVudCIsIm5hbWVTcGFjZSIsImNyZWF0ZUVsZW1lbnROUyIsInVybCIsInBhcmFtcyIsIndpbmRvdyIsImZldGNoIiwia2V5Iiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImdldEl0ZW0iLCJsb2NhbFN0b3JhZ2UiLCJlbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmQiLCJBdHRyaWJ1dGUiLCJhdHRyaWJ1dGUiLCJ0aGlzIiwiQmFzZUVsZW1lbnQiLCJwYXJlbnQiLCJhdHRyaWJ1dGVNYXAiLCJldmVudHNBdHRhY2hlZCIsIkxpc3QiLCJYbWxFbGVtZW50IiwiY3JlYXRlRnJvbVhtbEVsZW1lbnQiLCJIVE1MRWxlbWVudCIsImVycm9yIiwiYXR0cmlidXRlcyIsInVuZGVmaW5lZCIsIk1hcCIsImkiLCJsZW5ndGgiLCJzZXQiLCJ4bWxFbGVtZW50IiwicGFyZW50RWxlbWVudCIsImdldE5hbWVzcGFjZSIsImdldE5hbWVzcGFjZVVyaSIsImdldEZ1bGxOYW1lIiwiZ2V0TmFtZSIsImdldE1hcHBlZEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImdldEF0dHJpYnV0ZXMiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiZ2V0VmFsdWUiLCJldmVudFR5cGUiLCJmdW5jdGlvblBhcmFtIiwiY29udGFpbnMiLCJ3YXJuIiwic3RhcnRzV2l0aCIsInN1YnN0ciIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGQiLCJ0YWdOYW1lIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0Iiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJsb2FkQXR0cmlidXRlcyIsImdldEF0dHJpYnV0ZSIsImhhc0F0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInN0eWxlIiwiaW5wdXQiLCJjb25zb2xlIiwicmVwbGFjZUNoaWxkIiwiZ2V0Um9vdEVsZW1lbnQiLCJUZXh0IiwiRWxlbWVudCIsImZpcnN0Q2hpbGQiLCJjbGVhciIsImFkZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiQ2FudmFzUm9vdCIsImNvbXBvbmVudCIsImJvZHlFbGVtZW50IiwiaW5uZXJIVE1MIiwicmVtb3ZlRWxlbWVudCIsImFkZEhlYWRlckVsZW1lbnQiLCJhZGRCb2R5RWxlbWVudCIsIkFic3RyYWN0SW5wdXRFbGVtZW50Iiwic3VwZXIiLCJnZXRCYWNraW5nVmFsdWUiLCJmb2N1cyIsInNlbGVjdCIsImRpc2FibGVkIiwiUmFkaW9JbnB1dEVsZW1lbnQiLCJjaGVja2VkIiwiaXNDaGVja2VkIiwiQ2hlY2tib3hJbnB1dEVsZW1lbnQiLCJUZXh0SW5wdXRFbGVtZW50IiwiVGV4dGFyZWFJbnB1dEVsZW1lbnQiLCJzZXRWYWx1ZSIsImdldElubmVySFRNTCIsInByZXBlbmRDaGlsZCIsIlRleHRub2RlRWxlbWVudCIsIlhtbENkYXRhIiwiY3JlYXRlRnJvbVhtbENkYXRhIiwiY2RhdGFFbGVtZW50IiwiU2ltcGxlRWxlbWVudCIsIkVsZW1lbnRNYXBwZXIiLCJtYXBzVG9SYWRpbyIsIm1hcHNUb0NoZWNrYm94IiwibWFwc1RvU3VibWl0IiwibWFwc1RvVGV4dGFyZWEiLCJtYXBzVG9UZXh0IiwibWFwc1RvVGV4dG5vZGUiLCJtYXBzVG9TaW1wbGUiLCJsb2ciLCJIVE1MSW5wdXRFbGVtZW50IiwidHlwZSIsIk5vZGUiLCJub2RlVHlwZSIsIkhUTUxUZXh0QXJlYUVsZW1lbnQiLCJIVE1MIiwiZWxlbWVudE5hbWUiLCJtYXAiLCJjbGFzc1ZhbHVlIiwic3R5bGVWYWx1ZSIsInNldEF0dHJpYnV0ZVZhbHVlIiwiaHJlZiIsImN1c3RvbSIsImFwcGx5U3R5bGVzIiwic3R5bGVzIiwiZW5hYmxlZFN0eWxlcyIsIkNhbnZhc1N0eWxlcyIsInNvdXJjZSIsImdldCIsInNldENoaWxkIiwiZ2V0U3R5bGVzU291cmNlIiwic3R5bGVFbGVtZW50IiwiZGlzYWJsZVN0eWxlIiwicmVtb3ZlIiwiQ2xpZW50IiwibWV0aG9kIiwibW9kZSIsInJlZGlyZWN0IiwidG9TdHJpbmciLCJkYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwidXNlci1hZ2VudCIsImNvbnRlbnQtdHlwZSIsIkNvbXBvbmVudCIsImNvbXBvbmVudEluZGV4Iiwicm9vdEVsZW1lbnQiLCJlbGVtZW50TWFwIiwiVXJsIiwicHJvdG9jb2wiLCJob3N0IiwicG9ydCIsInBhdGhMaXN0IiwicGFyYW1ldGVyTWFwIiwiYm9va21hcmsiLCJyZW1haW5pbmciLCJkZXRlcm1pbmVQcm90b2NvbCIsImRldGVybWluZUhvc3QiLCJkZXRlcm1pbmVQb3J0IiwiZGV0ZXJtaW5lUGF0aCIsImRldGVybWluZVBhcmFtZXRlcnMiLCJkZXRlcm1pbmVCb29rbWFyayIsImluZGV4IiwiaW5kZXhPZiIsInBhcnRzIiwic3BsaXQiLCJyZXBsYWNlIiwiaG9zdFBhcnQiLCJwb3J0UGFydCIsInN1YnN0cmluZyIsInBhdGhQYXJ0cyIsImRlY29kZVVSSSIsInBhcnRMaXN0Iiwia2V5VmFsdWUiLCJwYXRoUGFydCIsImZpcnN0UGFyYW1ldGVyIiwicGFyYW1ldGVyS2V5IiwicGFyYW1ldGVyVmFsdWUiLCJlbmNvZGVVUkkiLCJTdHlsZXMiLCJzdHlsZXNTb3VyY2UiLCJTdHlsZXNSZWdpc3RyeSIsInN0eWxlc01hcCIsInN0eWxlc1VybE1hcCIsInN0eWxlc1F1ZXVlU2l6ZSIsImNhbGxiYWNrIiwiZG9DYWxsYmFjayIsInJlZ2lzdHJ5IiwidG1vIiwic2l6ZSIsInRlbXBDYWxsYmFjayIsImNhbGwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJyZXNwb25zZSIsIm9rIiwidGV4dCIsIm5hbWVVcmxNYXAiLCJyZWplY3QiLCJsb2FkZWQiLCJwcml2YXRlTG9hZCIsImNhdGNoIiwicmVhc29uIiwiaW5mbyIsIlRlbXBsYXRlIiwidGVtcGxhdGVTb3VyY2UiLCJUZW1wbGF0ZVJlZ2lzdHJ5IiwidGVtcGxhdGVNYXAiLCJ0ZW1wbGF0ZVVybE1hcCIsInRlbXBsYXRlUXVldWVTaXplIiwibGFuZ3VhZ2VQcmVmaXgiLCJ0ZW1wbGF0ZSIsImdldFBhdGhMaXN0Iiwic2V0TGFzdCIsImdldExhc3QiLCJyZXNvbHNlIiwiVGVtcGxhdGVzTG9hZGVyIiwidGVtcGxhdGVSZWdpc3RyeSIsImNvbmZpZyIsImdldENvbmZpZ0VsZW1lbnRzIiwiZW50cnkiLCJnZXRDbGFzc1JlZmVyZW5jZSIsIlRFTVBMQVRFX1VSTCIsIkNPTVBPTkVOVF9OQU1FIiwiZ2V0VGVtcGxhdGVzTG9hZGVkUHJvbWlzZSIsIlN0eWxlc0xvYWRlciIsInN0eWxlc1JlZ2lzdHJ5IiwiU1RZTEVTX1VSTCIsImdldFN0eWxlc0xvYWRlZFByb21pc2UiLCJDb21wb25lbnRDb25maWdQcm9jZXNzb3IiLCJpbmplY3RvciIsInRlbXBsYXRlc0xvYWRlciIsInN0eWxlc0xvYWRlciIsImFsbCIsImxvYWQiLCJVbmlxdWVJZFJlZ2lzdHJ5IiwiaWROYW1lcyIsIm51bWJlciIsIkV2ZW50IiwiZXZlbnQiLCJ0b0xvd2VyQ2FzZSIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJwcmV2ZW50RGVmYXVsdCIsIm9mZnNldFgiLCJvZmZzZXRZIiwiY2xpZW50WCIsImNsaWVudFkiLCJ0YXJnZXQiLCJrZXlDb2RlIiwiRXZlbnRSZWdpc3RyeSIsImxpc3RlbmVycyIsImJlZm9yZUxpc3RlbmVycyIsImFmdGVyTGlzdGVuZXJzIiwiZXZlbnROYW1lIiwidW5pcXVlRXZlbnROYW1lIiwidGhlRXZlbnRSZWdpc3RyeSIsImF0dGFjaEV2ZW50IiwidHJpZ2dlciIsIm9iamVjdEZ1bmN0aW9uIiwidW5pcXVlSW5kZXgiLCJleGlzdHMiLCJoYW5kbGVyT2JqZWN0IiwiaGFuZGxlckZ1bmN0aW9uIiwiT2JqZWN0RnVuY3Rpb24iLCJzdWZmaXhlZEV2ZW50TmFtZSIsImhhbmRsZUJlZm9yZSIsImN1cnJlbnRMaXN0ZW5lcnMiLCJoYW5kbGVBZnRlciIsImhhbmRsZUdsb2JhbCIsIkVsZW1lbnRSZWdpc3RyYXRvciIsImV2ZW50UmVnaXN0cnkiLCJ1bmlxdWVJZFJlZ2lzdHJ5IiwicGFyZW50V3JhcHBlciIsImFkZFRvRWxlbWVudElkTWFwIiwicmVnaXN0ZXJFbGVtZW50RXZlbnRzIiwiYXR0cmlidXRlS2V5IiwiYXR0YWNoIiwiY29udGFpbnNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGVWYWx1ZSIsImlkQXR0cmlidXRlV2l0aFN1ZmZpeCIsIkNvbXBvbmVudEZhY3RvcnkiLCJlbGVtZW50UmVnaXN0cmF0b3IiLCJjb21wb25lbnRDb3VudGVyIiwiRG9tVHJlZSIsImdldFRlbXBsYXRlU291cmNlIiwibW91bnRTdHlsZXMiLCJnZXRDb21wb25lbnRJbmRleCIsImdldEVsZW1lbnRNYXAiLCJzZXRTdHlsZSIsIkNvbXBvbmVudEluc3RhbmNlUHJvY2Vzc29yIiwiaW5zdGFuY2UiLCJjcmVhdGVDb21wb25lbnQiLCJJbnB1dEVsZW1lbnREYXRhQmluZGluZyIsIm1vZGVsIiwidmFsaWRhdG9yIiwicHVsbGVycyIsInB1c2hlcnMiLCJmaWVsZCIsInRvIiwicHVsbGVyIiwibW9kZWxWYWx1ZSIsIlByb3BlcnR5QWNjZXNzb3IiLCJ2YWxpZGF0ZSIsInB1c2hlciIsInNldENoZWNrZWQiLCJnZXRDaGVja2VkIiwiY2hhbmdlZEZ1bmN0aW9uTmFtZSIsInB1c2giLCJQcm94eU9iamVjdEZhY3RvcnkiLCJvYmplY3QiLCJQcm94eSIsInByb3AiLCJzdWNjZXNzIiwiY2hhbmdlZEZ1bmN0aW9uIiwiYm91bmRDaGFuZ2VkRnVuY3Rpb24iLCJiaW5kIiwiSGlzdG9yeSIsInRpdGxlIiwic3RhdGVPYmplY3QiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwibG9jYXRpb24iLCJTdGF0ZSIsInN0YXRlTGlzdGVuZXJNYXAiLCJuZXdQYXRoIiwiZ2V0VXJsIiwiZ2V0UGF0aCIsInNldFVybCIsInB1c2hVcmwiLCJKdXN0cmlnaHRDb25maWciLCJqdXN0cmlnaHRDb25maWciLCJDb25maWciLCJhZGRTaW5nbGV0b24iLCJBcHBsaWNhdGlvblN0b3JhZ2UiLCJzZXRMb2NhbEF0dHJpYnV0ZSIsImdldExvY2FsQXR0cmlidXRlIiwiaGFzTG9jYWxBdHRyaWJ1dGUiLCJyZW1vdmVMb2NhbEF0dHJpYnV0ZSIsIlNlc3Npb25TdG9yYWdlIiwic2V0U2Vzc2lvbkF0dHJpYnV0ZSIsImhhc1Nlc3Npb25BdHRyaWJ1dGUiLCJnZXRTZXNzaW9uQXR0cmlidXRlIiwicmVtb3ZlU2Vzc2lvbkF0dHJpYnV0ZSIsIkh0dHBSZXNwb25zZUhhbmRsZXIiLCJjb2RlIiwibWFwcGVyRnVuY3Rpb24iLCJIdHRwQ2FsbEJ1aWxkZXIiLCJwYXJhbXRlciIsImh0dHBDYWxsYmFja01hcCIsImVycm9yQ2FsbGJhY2siLCJjbGllbnQiLCJwYXJhbWV0ZXIiLCJwcm9jZXNzUmVzcG9uc2UiLCJwcm9jZXNzRXJyb3IiLCJwb3N0IiwicHV0IiwicGF0Y2giLCJkZWxldGUiLCJyZXNwb25zZUhhbmRsZXIiLCJzdGF0dXMiLCJqc29uIiwiZ2V0TWFwcGVyRnVuY3Rpb24iLCJnZXRPYmplY3RGdW5jdGlvbiIsImZhaWxSZWFzb24iLCJBYnN0cmFjdFZhbGlkYXRvciIsImlzY3VycmVudGx5VmFsaWQiLCJ2YWxpZExpc3RlbmVyTGlzdCIsImludmFsaWRMaXN0ZW5lckxpc3QiLCJjdXJyZW50bHlWYWxpZCIsInZhbGlkTGlzdGVuZXIiLCJpbnZhbGlkTGlzdGVuZXIiLCJBbmRWYWxpZGF0b3JTZXQiLCJpc1ZhbGlkRnJvbVN0YXJ0IiwidmFsaWRhdG9yTGlzdCIsIndpdGhWYWxpZExpc3RlbmVyIiwib25lVmFsaWQiLCJ3aXRoSW52YWxpZExpc3RlbmVyIiwib25lSW52YWxpZCIsImZvdW5kSW52YWxpZCIsImlzVmFsaWQiLCJpbnZhbGlkIiwidmFsaWQiLCJSZWdleFZhbGlkYXRvciIsInJlZ2V4IiwibWF0Y2giLCJFTUFJTF9GT1JNQVQiLCJFbWFpbFZhbGlkYXRvciIsIkVxdWFsc1ZhbGlkYXRvciIsIk9yVmFsaWRhdG9yU2V0IiwiZm91bmRWYWxpZCIsIlBBU1NXT1JEX0ZPUk1BVCIsIlBhc3N3b3JkVmFsaWRhdG9yIiwiUmVxdWlyZWRWYWxpZGF0b3IiXSwibWFwcGluZ3MiOiIwS0FFQSxNQUFNQSxLQUFNLEdBQUlDLFFBQU8sd0JBRVZDLGlCQU1UQyxzQkFBc0JDLEdBQ2xCLE1BQU9DLFVBQVNDLGVBQWVGLEdBT25DRCxzQkFBc0JJLEdBQ2xCLE1BQU9GLFVBQVNHLGVBQWVELEdBT25DSixxQkFBcUJNLEdBQ2pCLE1BQU9KLFVBQVNLLGNBQWNELEdBUWxDTix1QkFBdUJRLEVBQVdGLEdBQzlCLE1BQU9KLFVBQVNPLGdCQUFnQkQsRUFBV0YsR0FRL0NOLGFBQWFVLEVBQUtDLEdBQ2QsTUFBT0MsUUFBT0MsTUFBTUgsRUFBS0MsR0FLN0JYLDJCQUEyQmMsRUFBS1YsR0FDNUJRLE9BQU9HLGVBQWVDLFFBQVFGLEVBQUlWLEdBR3RDSiw4QkFBOEJjLEdBQzFCRixPQUFPRyxlQUFlRSxXQUFXSCxHQUdyQ2QsMkJBQTJCYyxHQUN2QixNQUFPRixRQUFPRyxlQUFlRyxRQUFRSixHQUd6Q2QsMkJBQTJCYyxHQUN2QixNQUE4QyxRQUF2Q0YsT0FBT0cs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
