"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var coreutil_v1=require("coreutil_v1"),xmlparser_v1=require("xmlparser_v1"),mindi_v1=require("mindi_v1");const LOG=new coreutil_v1.Logger("ContainerBridge");class ContainerBridge{static getElementById(t){return document.getElementById(t)}static createTextNode(t){return document.createTextNode(t)}static createElement(t){return document.createElement(t)}static createElementNS(t,e){return document.createElementNS(t,e)}static fetch(t,e){return window.fetch(t,e)}static setSessionAttribute(t,e){window.sessionStorage.setItem(t,e)}static removeSessionAttribute(t){window.sessionStorage.removeItem(t)}static getSessionAttribute(t){return window.sessionStorage.getItem(t)}static hasSessionAttribute(t){return null!==window.sessionStorage.getItem(t)}static setLocalAttribute(t,e){window.localStorage.setItem(t,e)}static removeLocalAttribute(t){window.localStorage.removeItem(t)}static hasLocalAttribute(t){return null!==window.localStorage.getItem(t)}static getLocalAttribute(t){return window.localStorage.getItem(t)}static removeElement(t){let e=document.getElementById(t);e.parentNode.removeChild(e)}static addHeaderElement(t){document.getElementsByTagName("head")[0].append(t)}static addBodyElement(t){document.getElementsByTagName("body")[0].append(t)}}class Attribute{constructor(t){this.attribute=t}getValue(){return this.attribute.value}getName(){return this.attribute.name}getNamespace(){return this.attribute.name}}const LOG$1=new coreutil_v1.Logger("BaseElement");class BaseElement{constructor(t,e){return this.element=null,this.attributeMap=null,this.eventsAttached=new coreutil_v1.List,t instanceof xmlparser_v1.XmlElement?void(this.element=this.createFromXmlElement(t,e)):"string"==typeof t?void(this.element=ContainerBridge.createElement(t)):t instanceof HTMLElement?void(this.element=t):(LOG$1.error("Unrecognized value for Element"),void LOG$1.error(t))}loadAttributes(){if(null===this.element.attributes||void 0===this.element.attributes)return void(this.attributeMap=new coreutil_v1.Map);if(null===this.attributeMap||void 0===this.attributeMap){this.attributeMap=new coreutil_v1.Map;for(var t=0;t<this.element.attributes.length;t++)this.attributeMap.set(this.element.attributes[t].name,new Attribute(this.element.attributes[t]))}}createFromXmlElement(t,e){let n=null;return n=t.getNamespace()?ContainerBridge.createElementNS(t.getNamespaceUri(),t.getFullName()):ContainerBridge.createElement(t.getName()),e&&null!==e.getMappedElement()&&e.getMappedElement().appendChild(n),t.getAttributes().forEach(function(t,e){return n.setAttribute(t,e.getValue()),!0}),n}attachEvent(t,e){this.eventsAttached.contains(t)?LOG$1.warn("Event '"+t+"' allready attached for "+this.element.name):(t.startsWith("on")&&(t=t.substr(2)),this.element.addEventListener(t,e),this.eventsAttached.add(t))}getMappedElement(){return this.element}getFullName(){return this.element.tagName}getTop(){return this.element.getBoundingClientRect().top}getBottom(){return this.element.getBoundingClientRect().bottom}getLeft(){return this.element.getBoundingClientRect().left}getRight(){return this.element.getBoundingClientRect().right}getWidth(){return this.element.offsetWidth}getHeight(){return this.element.offsetHeight}getAttributes(){return this.loadAttributes(),this.attributeMap}setAttributeValue(t,e){this.element.setAttribute(t,e)}getAttributeValue(t){return this.element.getAttribute(t)}containsAttribute(t){return this.element.hasAttribute(t)}removeAttribute(t){this.element.removeAttribute(t)}setStyle(t,e){this.element.style[t]=e}getStyle(t){return this.element.style[t]}removeStyle(t){this.element.style[t]=null}set(t){return null===this.element.parentNode?void console.error("The element has no parent, can not swap it for value"):t.getMappedElement?void this.element.parentNode.replaceChild(t.getMappedElement(),this.element):t&&"function"==typeof t.getRootElement?(this.element.parentNode.replaceChild(t.getRootElement().getMappedElement(),this.element),void(this.element=t.getRootElement().getMappedElement())):"string"==typeof t?void this.element.parentNode.replaceChild(ContainerBridge.createTextNode(t),this.element):t instanceof Text?void this.element.parentNode.replaceChild(t,this.element):t instanceof Element?void this.element.parentNode.replaceChild(t,this.element):void 0}isMounted(){return!!this.element.parentNode}remove(){this.element.parentNode.removeChild(this.element)}clear(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}setChild(t){this.clear(),this.addChild(t)}addChild(t){return t.getMappedElement?void this.element.appendChild(t.getMappedElement()):t&&"function"==typeof t.getRootElement?void this.element.appendChild(t.getRootElement().getMappedElement()):"string"==typeof t?void this.element.appendChild(ContainerBridge.createTextNode(t)):t instanceof Text?void this.element.appendChild(t):t instanceof Element?void this.element.appendChild(t):void 0}prependChild(t){return null===this.element.firstChild&&this.addChild(t),t.getMappedElement?void this.element.insertBefore(t.getMappedElement(),this.element.firstChild):t&&"function"==typeof t.getRootElement?void this.element.insertBefore(t.getRootElement().getMappedElement(),this.element.firstChild):"string"==typeof t?void this.element.insertBefore(ContainerBridge.createTextNode(t),this.element.firstChild):t instanceof Text?void this.element.insertBefore(t,this.element.firstChild):t instanceof Element?void this.element.insertBefore(t,this.element.firstChild):void 0}}class CanvasRoot{static replaceComponent(t,e){var n=ContainerBridge.getElementById(t);n.parentNode.replaceChild(e.getRootElement().getMappedElement(),n)}static setComponent(t,e){var n=ContainerBridge.getElementById(t);n.innerHTML="",n.appendChild(e.getRootElement().getMappedElement(),n)}static addChildComponent(t,e){ContainerBridge.getElementById(t).appendChild(e.getRootElement().getMappedElement())}static addChildElement(t,e){ContainerBridge.getElementById(t).appendChild(e.getMappedElement())}static removeElement(t){ContainerBridge.removeElement(t)}static addHeaderElement(t){ContainerBridge.addHeaderElement(t.getMappedElement())}static addBodyElement(t){ContainerBridge.addBodyElement(t.getMappedElement())}}const LOG$2=new coreutil_v1.Logger("AbstractInputElement");class AbstractInputElement extends BaseElement{constructor(t,e){super(t,e)}getName(){return this.element.name}setName(t){this.element.name=t}getValue(){return this.getBackingValue()}getBackingValue(){return this.element.value}setValue(t){this.element.value=t}focus(){this.element.focus()}selectAll(){this.element.select()}}class RadioInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}setChecked(t){this.element.checked=t}isChecked(){return this.element.checked}getValue(){return this.isChecked()?super.getValue():null}}class CheckboxInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}setChecked(t){this.element.checked=t}isChecked(){return this.element.checked}getValue(){return this.isChecked()?super.getValue():null}}class TextInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}}class TextareaInputElement extends AbstractInputElement{constructor(t,e){super(t,e)}getInnerHTML(){return this.element.innerHTML}setInnerHTML(t){this.element.innerHTML=t}addChild(t){super.addChild(t),this.setValue(this.getInnerHTML())}prependChild(t){super.prependChild(t),this.setValue(this.getInnerHTML())}}class TextnodeElement{constructor(t,e){t instanceof xmlparser_v1.XmlCdata&&(this.element=this.createFromXmlCdata(t,e)),"string"==typeof t&&(this.element=ContainerBridge.createTextNode(t))}createFromXmlCdata(t,e){let n=document.createTextNode(t.getValue());return null!==e&&null!==e.getMappedElement()&&e.getMappedElement().appendChild(n),n}setValue(t){this.element=t}getValue(){return this.element}getMappedElement(){return this.element}}class SimpleElement extends BaseElement{constructor(t,e){super(t,e)}getInnerHTML(){return this.element.innerHTML}setInnerHTML(t){this.element.innerHTML=t}}class ElementMapper{static map(t,e){return ElementMapper.mapsToRadio(t)?new RadioInputElement(t,e):ElementMapper.mapsToCheckbox(t)?new CheckboxInputElement(t,e):ElementMapper.mapsToSubmit(t)?new TextInputElement(t,e):ElementMapper.mapsToTextarea(t)?new TextareaInputElement(t,e):ElementMapper.mapsToText(t)?new TextInputElement(t,e):ElementMapper.mapsToTextnode(t)?new TextnodeElement(t,e):ElementMapper.mapsToSimple(t)?new SimpleElement(t,e):(console.log("Mapping to simple by default "+t),new SimpleElement(t,e))}static mapsToRadio(t){return t instanceof HTMLInputElement&&"radio"===t.type||t instanceof xmlparser_v1.XmlElement&&"input"===t.getName()&&"radio"===t.getAttribute("type").getValue()}static mapsToCheckbox(t){return t instanceof HTMLInputElement&&"checkbox"===t.type||t instanceof xmlparser_v1.XmlElement&&"input"===t.getName()&&"checkbox"===t.getAttribute("type").getValue()}static mapsToSubmit(t){return t instanceof HTMLInputElement&&"submit"===t.type||t instanceof xmlparser_v1.XmlElement&&"input"===t.getName()&&"submit"===t.getAttribute("type").getValue()}static mapsToText(t){if(t instanceof HTMLInputElement){if("text"===t.type)return!0;if("password"===t.type)return!0;if("email"===t.type)return!0;if("date"===t.type)return!0;if("time"===t.type)return!0}if(t instanceof xmlparser_v1.XmlElement&&"input"===t.getName()){if("text"===t.getAttribute("type").getValue())return!0;if("password"===t.getAttribute("type").getValue())return!0;if("email"===t.getAttribute("type").getValue())return!0;if("date"===t.getAttribute("type").getValue())return!0;if("time"===t.getAttribute("type").getValue())return!0}return!1}static mapsToTextnode(t){return t instanceof Node&&"TEXT_NODE"===t.nodeType||t instanceof xmlparser_v1.XmlCdata}static mapsToTextarea(t){return t instanceof HTMLTextAreaElement||t instanceof xmlparser_v1.XmlElement&&"textarea"===t.getName()}static mapsToSimple(t){return t instanceof HTMLElement||t instanceof xmlparser_v1.XmlElement}}class HTML{static custom(t){var e=new xmlparser_v1.XmlElement(t);return ElementMapper.map(e)}static applyStyles(t,e,n){null!==e&&t.setAttributeValue("class",e),null!==n&&t.setAttributeValue("style",n)}static a(t,e,n,i){var r=HTML.custom("a");return r.addChild(t),r.setAttributeValue("href",e),HTML.applyStyles(r,n,i),r}}const LOG$3=new coreutil_v1.Logger("CanvasStyles"),styles=new coreutil_v1.Map,enabledStyles=new coreutil_v1.List;class CanvasStyles{static setStyle(t,e){if(styles.contains(t))styles.get(t).setChild(new TextnodeElement(e.getStylesSource()));else{let n=HTML.custom("style");n.setAttributeValue("id",t),n.setChild(new TextnodeElement(e.getStylesSource())),styles.set(t,n)}}static removeStyle(t){enabledStyles.contains(t)&&CanvasStyles.disableStyle(t),styles.remove(t)}static disableStyle(t){if(!styles.contains(t))return void LOG$3.error("Style does not exist: "+t);enabledStyles.contains(t)&&(enabledStyles.remove(t),CanvasRoot.removeElement(t))}static enableStyle(t){if(!styles.contains(t))return void LOG$3.error("Style does not exist: "+t);enabledStyles.contains(t)||(enabledStyles.add(t),CanvasRoot.addHeaderElement(styles.get(t)))}}class Client{static get(t){var e={method:"GET",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),e)}static post(t,e){var n={body:JSON.stringify(e),headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"},method:"POST",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),n)}static put(t,e){var n={body:JSON.stringify(e),method:"PUT",mode:"cors",redirect:"follow",headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"}};return ContainerBridge.fetch(t.toString(),n)}static patch(t,e){var n={body:JSON.stringify(e),method:"PATCH",mode:"cors",redirect:"follow",headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"}};return ContainerBridge.fetch(t.toString(),n)}static delete(t){var e={method:"DELETE",mode:"cors",redirect:"follow"};return ContainerBridge.fetch(t.toString(),e)}}class Component{constructor(t,e,n){this.componentIndex=t,this.elementMap=n,this.rootElement=e}remove(){this.rootElement.remove()}getRootElement(){return this.rootElement}getComponentIndex(){return this.componentIndex}get(t){return this.elementMap.get(t)}set(t,e){this.elementMap.get(t).set(e)}clearChildren(t){this.elementMap.get(t).clear()}setChild(t,e){this.elementMap.get(t).setChild(e)}addChild(t,e){this.elementMap.get(t).addChild(e)}prependChild(t,e){this.elementMap.get(t).prependChild(e)}}class Url{constructor(t){if(this.protocol=null,this.host=null,this.port=null,this.pathList=new coreutil_v1.List,this.parameterMap=new coreutil_v1.Map,this.bookmark=null,null!==t){var e=this.determineProtocol(t);null!==e&&(null!==this.protocol&&(e=this.determineHost(e)),null!==e&&(null!==this.host&&(e=this.determinePort(e)),null!==e&&null!==(e=this.determinePath(e))&&null!==(e=this.determineParameters(e))&&this.determineBookmark(e)))}}getProtocol(){return this.protocol}getHost(){return this.host}getPort(){return this.port}getPathList(){return this.pathList}getPath(t){return this.pathList.get(t)}clearPathList(){this.pathList=new coreutil_v1.List}getParameterMap(){return this.parameterMap}clearParameterMAp(){this.parameterMap=new coreutil_v1.Map}getParameter(t){return this.parameterMap.get(t)}setParameter(t,e){this.parameterMap.set(t,e)}setBookmark(t){this.bookmark=t}setPath(t){this.determinePath(t)}setQueryString(t){this.parameterMap=this.determineParameters(t)}getBookmark(){return this.bookmark}determineProtocol(t){if(-1===t.indexOf("//"))return t;var e=t.split("//");return-1!==e[0].indexOf("/")?t:(this.protocol=e[0],1==e.length?null:t.replace(e[0]+"//",""))}determineHost(t){var e=t.split("/"),n=e[0];return-1!==n.indexOf(":")&&(n=n.split(":")[0]),this.host=n,e.length>1?t.replace(n,""):null}determinePort(t){if(!t.startsWith(":"))return t;var e=t.split("/")[0].substring(1);return this.port=e,t.replace(":"+e,"")}determinePath(t){var e=t;if(-1!==t.indexOf("?"))(n=t.split("?")).length>1&&(e=t.substring(t.indexOf("?"))),t=n[0];else if(-1!==t.indexOf("#")){var n=t.split("#");n.length>1&&(e=t.substring(t.indexOf("#"))),t=n[0]}t.startsWith("/")&&(t=t.substring(1));var i=new coreutil_v1.List(t.split("/"));return this.pathList=new coreutil_v1.List,i.forEach(function(t,e){return e.pathList.add(decodeURI(t)),!0},this),e}determineParameters(t){var e=t;if(-1===t.indexOf("?"))return t;-1!==(t=t.substring(t.indexOf("?")+1)).indexOf("#")&&(e=t.substring(t.indexOf("#")),t=t.substring(0,t.indexOf("#")));var n=new coreutil_v1.List(t.split("&")),i=new coreutil_v1.Map;return n.forEach(function(t,e){var n=t.split("=");return n.length>=2&&i.set(decodeURI(n[0]),decodeURI(n[1])),!0},this),this.parameterMap=i,e}determineBookmark(t){-1!==t.indexOf("#")&&(this.bookmark=t.substring(t.indexOf("#")+1))}toString(){var t="";null!==this.protocol&&(t=t+this.protocol+"//"),null!==this.host&&(t+=this.host),null!==this.port&&(t=t+":"+this.port),this.pathList.forEach(function(e,n){return t=t+"/"+e,!0},this);var e=!0;return this.parameterMap.forEach(function(n,i,r){e?(e=!1,t+="?"):t+="&",t=t+encodeURI(n)+"="+encodeURI(i)},this),null!==this.bookmark&&(t=t+"#"+this.bookmark),t}}class Styles{constructor(t){this.stylesSource=t}getStylesSource(){return this.stylesSource}}const LOG$4=new coreutil_v1.Logger("StylesRegistry");class StylesRegistry{constructor(){this.stylesMap=new coreutil_v1.Map,this.stylesUrlMap=new coreutil_v1.Map,this.stylesQueueSize=0,this.callback=null}set(t,e,n){void 0!==n&&null!==n&&this.stylesUrlMap.set(t,n),this.stylesMap.set(t,e)}get(t){return this.stylesMap.get(t)}contains(t){return this.stylesMap.contains(t)}done(t){this.callback=t,this.doCallback(this)}doCallback(t){if(null!==tmo.callback&&void 0!==t.callback&&t.stylesQueueSize===t.stylesMap.size()){var e=t.callback;t.callback=null,e.call()}}load(t,e){return this.stylesQueueSize++,new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load styles for "+t+" at "+e;i.text().then(i=>{this.set(t,new Styles(i),e);this.doCallback(this);n()})})})}getStylesLoadedPromise(t){return new Promise((e,n)=>{var i=0;if(!t||0==t.size())return void e();t.forEach((r,o,s)=>{if(this.contains(r))return++i!=t.size()||(e(),!1);this.privateLoad(r,new Url(o)).then(()=>{i++;if(i==t.size())return e(),!1}).catch(t=>{n(t);return!1});return!0},this)})}privateLoad(t,e){return LOG$4.info("Loading styles "+t+" at "+e.toString()),new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load styles for "+t+" at "+e;i.text().then(i=>{this.set(t,new Styles(i),e);n()})})})}}class Template{constructor(t){this.templateSource=t}getTemplateSource(){return this.templateSource}}const LOG$5=new coreutil_v1.Logger("TemplateRegistry");class TemplateRegistry{constructor(){this.templateMap=new coreutil_v1.Map,this.templateUrlMap=new coreutil_v1.Map,this.templateQueueSize=0,this.callback=null,this.languagePrefix=null}setLanguagePrefix(t){this.languagePrefix=t}set(t,e,n){void 0!==n&&null!==n&&this.templateUrlMap.set(t,n),this.templateMap.set(t,e)}get(t){return this.templateMap.get(t)}contains(t){return this.templateMap.contains(t)}done(t){this.callback=t,this.doCallback(this)}doCallback(t){if(null!==tmo.callback&&void 0!==t.callback&&t.templateQueueSize===t.templateMap.size()){var e=t.callback;t.callback=null,e.call()}}load(t,e){return null!==this.languagePrefix&&e.getPathList().setLast(this.languagePrefix+"."+e.getPathList().getLast()),this.templateQueueSize++,new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load template for "+t+" at "+e;i.text().then(i=>{this.set(t,new Template(i),e);this.doCallback(this);n()})})})}getTemplatesLoadedPromise(t){return new Promise((e,n)=>{var i=0;if(!t||0==t.size())return void e();t.forEach((r,o,s)=>{if(this.contains(r))return++i!=t.size()||(e(),!1);this.privateLoad(r,new Url(o)).then(()=>{i++;if(i==t.size())return e(),!1}).catch(t=>{n(t);return!1});return!0},this)})}privateLoad(t,e){return null!==this.languagePrefix&&e.getPathList().setLast(this.languagePrefix+"."+e.getPathList().getLast()),LOG$5.info("Loading template "+t+" at "+e.toString()),new Promise(n=>{Client.get(e).then(i=>{if(!i.ok)throw"Unable to load template for "+t+" at "+e;i.text().then(i=>{this.set(t,new Template(i),e);n()})})})}}const LOG$6=new coreutil_v1.Logger("TemplatePostConfig");class TemplatesLoader{constructor(t){this.templateRegistry=t}load(t){let e=new coreutil_v1.Map;return t.getConfigElements().forEach((t,n,i)=>{n.getClassReference().TEMPLATE_URL&&n.getClassReference().COMPONENT_NAME&&e.set(n.getClassReference().COMPONENT_NAME,n.getClassReference().TEMPLATE_URL);return!0},this),this.templateRegistry.getTemplatesLoadedPromise(e)}}const LOG$7=new coreutil_v1.Logger("StylesLoader");class StylesLoader{constructor(t){this.stylesRegistry=t}load(t){let e=new coreutil_v1.Map;return t.getConfigElements().forEach((t,n,i)=>{n.getClassReference().STYLES_URL&&n.getClassReference().COMPONENT_NAME&&e.set(n.getClassReference().COMPONENT_NAME,n.getClassReference().STYLES_URL);return!0},this),this.stylesRegistry.getStylesLoadedPromise(e)}}const LOG$8=new coreutil_v1.Logger("ComponentConfigProcessor");class ComponentConfigProcessor{constructor(){this.templateRegistry=TemplateRegistry,this.stylesRegistry=StylesRegistry}postInject(t){this.templatesLoader=new TemplatesLoader(this.templateRegistry),this.stylesLoader=new StylesLoader(this.stylesRegistry)}processConfig(t){return Promise.all([this.templatesLoader.load(t),this.stylesLoader.load(t)])}}class UniqueIdRegistry{idAttributeWithSuffix(t){if(idNames.contains(t)){var e=idNames.get(t);return idNames.set(t,e+1),t+"-"+e}return idNames.set(t,1),t}}var idNames=new coreutil_v1.Map;class Event{constructor(t){this.event=t,"dragstart"==this.event.type.toLowerCase()&&this.event.dataTransfer.setData("text/plain",null)}preventDefault(){this.event.preventDefault()}getOffsetX(){return this.event.offsetX}getOffsetY(){return this.event.offsetY}getClientX(){return this.event.clientX}getClientY(){return this.event.clientY}getTarget(){return ElementMapper.map(this.event.target)}getKeyCode(){return this.event.keyCode}}const LOG$9=new coreutil_v1.Logger("EventRegistry");class EventRegistry{constructor(){this.listeners=new coreutil_v1.Map,this.beforeListeners=new coreutil_v1.Map,this.afterListeners=new coreutil_v1.Map}attach(t,e,n,i){var r=n+"_"+i,o=this;t.attachEvent(e,function(t){o.trigger(r,n,t)})}listen(t,e,n){t=t+"_"+n,this.listeners.exists(t)||this.listeners.set(t,new coreutil_v1.List),this.listeners.get(t).add(e)}listenBefore(t,e,n){this.beforeListeners.exists(t)||this.beforeListeners.set(t,new coreutil_v1.List);var i=new coreutil_v1.ObjectFunction(e,n);this.beforeListeners.get(t).add(i)}listenAfter(t,e,n){this.afterListeners.exists(t)||this.afterListeners.set(t,new coreutil_v1.List),this.afterListeners.get(t).add(new coreutil_v1.ObjectFunction(e,n))}trigger(t,e,n){if(this.handleBefore(e,n),this.listeners.exists(t)){var i=new coreutil_v1.List;this.listeners.get(t).forEach(function(t,e){return i.add(t),!0},this),i.forEach(function(t,e){return t.call(new Event(n)),!0},this)}this.handleAfter(e,n)}handleBefore(t,e){this.handleGlobal(this.beforeListeners,t,e)}handleAfter(t,e){this.handleGlobal(this.afterListeners,t,e)}handleGlobal(t,e,n){if(t.exists(e)){var i=new coreutil_v1.List;t.get(e).forEach(function(t,e){return i.add(t),!0},this),i.forEach(function(t,e){return t.call(new Event(n)),!0},this)}}}class ElementRegistrator{constructor(t,e,n){this.componentIndex=n,this.uniqueIdRegistry=e,this.eventRegistry=t,this.rootElement=null,this.elementMap=new coreutil_v1.Map}getRootElement(){return this.rootElement}getElementMap(){return this.elementMap}getComponentIndex(){return this.componentIndex}elementCreated(t,e){var n=ElementMapper.map(t,e);return this.addToElementIdMap(n),this.registerElementEvents(n),null===this.rootElement&&null!==n&&(this.rootElement=n),n}registerElementEvents(t){if(null!==t&&void 0!==t&&t instanceof BaseElement){var e=this.eventRegistry,n=this.componentIndex;t.getAttributes().forEach(function(i,r,o){if(null!==r&&void 0!==r&&r.getValue().startsWith("//event:")){var s=r.getValue(),a=r.getName();e.attach(t,a,s,n)}return!0},this)}}addToElementIdMap(t){if(null!==t&&void 0!==t&&t instanceof BaseElement){var e=null;t.containsAttribute("id")&&(e=t.getAttributeValue("id"),t.setAttributeValue("id",this.uniqueIdRegistry.idAttributeWithSuffix(e))),null!==e&&this.elementMap.set(e,t)}}}const LOG$a=new coreutil_v1.Logger("ComponentFactory");class ComponentFactory{constructor(){this.eventRegistry=EventRegistry,this.stylesRegistry=StylesRegistry,this.templateRegistry=TemplateRegistry,this.uniqueIdRegistry=UniqueIdRegistry}create(t){var e=this.templateRegistry.get(t);if(!e)throw LOG$a.error(this.templateRegistry),"No template was found with name "+t;var n=new ElementRegistrator(this.eventRegistry,this.uniqueIdRegistry,componentCounter++);return new xmlparser_v1.DomTree(e.getTemplateSource(),n).load(),this.mountStyles(t),new Component(n.getComponentIndex(),n.getRootElement(),n.getElementMap())}mountStyles(t){this.stylesRegistry.contains(t)&&CanvasStyles.setStyle(t,this.stylesRegistry.get(t))}}var componentCounter=0;const LOG$b=new coreutil_v1.Logger("ComponentInstanceProcessor");class ComponentInstanceProcessor{processInstance(t){t.createComponent&&t.createComponent()}}class AbstractDataBinding{pull(){}push(){}}class DataBindRegistry{constructor(){this.dataBindingList=new coreutil_v1.List}static getInstance(){return inputs}add(t){this.dataBindingList.add(t)}pullAll(){this.dataBindingList.forEach(t=>{t.pull();return!0},this)}pushAll(){this.dataBindingList.forEach(t=>{t.push();return!0},this)}}var inputs=new DataBindRegistry;class InputElementDataBinding{constructor(t,e){this.model=t,this.validator=e,this.pullers=new coreutil_v1.List,this.pushers=new coreutil_v1.List}static link(t,e){return new InputElementDataBinding(t,e)}and(t){return this.to(t)}to(t){var e=()=>{t.getValue&&coreutil_v1.PropertyAccessor.setValue(this.model,t.getName(),t.getValue());this.validator&&this.validator.validate&&this.validator.validate(t.getValue())};t.attachEvent("onchange",e),t.attachEvent("onkeyup",e),e.call();var n=()=>{var e=coreutil_v1.PropertyAccessor.getValue(this.model,t.getName());t.setChecked?t.setChecked(e==t.getValue()):t.setValue&&t.setValue(e)};return this.model.__changed||(this.model.__changed=(()=>{this.push()})),this.pullers.add(e),this.pushers.add(n),this}pull(){this.pullers.forEach((t,e)=>{t.call(e);return!0},this)}push(){this.pushers.forEach((t,e)=>{t.call(e);return!0},this)}}class ProxyObjectFactory{static createProxyObject(t){return new Proxy(t,{set:(t,e,n)=>{let i=t[e]=n;t.__changed&&t.__changed();return i===n}})}}class History{static pushUrl(t,e,n){window.history.pushState(n,e,t.toString())}static getUrl(){return new Url(window.location.href)}static loadUrl(t){window.location=t.toString()}}class State{constructor(){this.stateListenerMap=new coreutil_v1.Map}recordState(t){var e=History.getUrl();e.getPath(0)!==t&&this.setUrl(e)}setUrl(t){History.pushUrl(t,"",{})}}class JustrightConfig{static getInstance(){return null===justrightConfig&&(justrightConfig=new JustrightConfig),justrightConfig}constructor(){this.config=(new mindi_v1.Config).addSingleton(TemplateRegistry).addSingleton(StylesRegistry).addSingleton(EventRegistry).addSingleton(UniqueIdRegistry).addSingleton(ComponentFactory).addSingleton(DataBindRegistry).addSingleton(State)}getConfig(){return this.config}}var justrightConfig=null;class ApplicationStorage{static setLocalAttribute(t,e){ContainerBridge.setLocalAttribute(t,e)}static getLocalAttribute(t){return ContainerBridge.getLocalAttribute(t)}static hasLocalAttribute(t){return ContainerBridge.hasLocalAttribute(t)}static removeLocalAttribute(t){return ContainerBridge.removeLocalAttribute(t)}}class SessionStorage{static setSessionAttribute(t,e){ContainerBridge.setSessionAttribute(t,e)}static hasSessionAttribute(t){return ContainerBridge.hasSessionAttribute(t)}static getSessionAttribute(t){return ContainerBridge.getSessionAttribute(t)}static removeSessionAttribute(t){return ContainerBridge.removeSessionAttribute(t)}}class HttpResponseHandler{constructor(t,e,n){this.code=t,this.objectFunction=e,this.mapperFunction=n}getCode(){return this.code}getObjectFunction(){return this.objectFunction}getMapperFunction(){return this.mapperFunction}}const LOG$c=new coreutil_v1.Logger("HttpCallBuilder");class HttpCallBuilder{constructor(t,e){this.url=t,this.paramter=e,this.httpCallbackMap=new coreutil_v1.Map,this.errorCallback=null}static newInstance(t,e,n){return new HttpCallBuilder(t,e,n)}responseMapping(t,e,n,i){return this.httpCallbackMap.set(t,new HttpResponseHandler(t,new coreutil_v1.ObjectFunction(e,n),i)),this}errorMapping(t,e){return t&&e&&(this.errorCallback=new coreutil_v1.ObjectFunction(t,e)),this}get(){Client.get(this.url).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}post(){Client.post(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}put(){Client.put(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}patch(){Client.patch(this.url,this.paramter).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}delete(){Client.delete(this.url).then(t=>{this.processResponse(t)},t=>{this.processError(t)})}processError(t){LOG$c.error(t),this.errorCallback&&this.errorCallback.call(t)}processResponse(t){var e=this.httpCallbackMap.get(t.status);e&&t.json().then(t=>{var n=e.getMapperFunction();n?e.getObjectFunction().call(n(t)):e.getObjectFunction().call(t)},t=>{})}}const LOG$d=new coreutil_v1.Logger("AbstractValidator");class AbstractValidator{constructor(t=!1){this.validListenerList=new coreutil_v1.List,this.invalidListenerList=new coreutil_v1.List,this.currentlyValid=t}isValid(){return this.iscurrentlyValid}valid(){this.iscurrentlyValid=!0,this.validListenerList.forEach((t,e)=>{t.call();return!0},this)}invalid(){this.iscurrentlyValid=!1,this.invalidListenerList.forEach((t,e)=>{t.call();return!0},this)}withValidListener(t){return this.validListenerList.add(t),this}withInvalidListener(t){return this.invalidListenerList.add(t),this}}class AndValidatorSet extends AbstractValidator{constructor(t=!1){super(t),this.validatorList=new coreutil_v1.List}withValidator(t){return t.withValidListener(new coreutil_v1.ObjectFunction(this,this.oneValid)),t.withInvalidListener(new coreutil_v1.ObjectFunction(this,this.oneInvalid)),this.validatorList.add(t),this}oneValid(){let t=!1;this.validatorList.forEach((e,n)=>{if(!e.isValid())return t=!0,!1;return!0},this),t?super.invalid():super.valid()}oneInvalid(){super.invalid()}}const EMAIL_FORMAT=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;class EmailValidator extends AbstractValidator{validate(t){t&&"string"==typeof t&&t.match(EMAIL_FORMAT)?this.valid():this.invalid()}}class OrValidatorSet extends AbstractValidator{constructor(t=!1){super(t),this.validatorList=new coreutil_v1.List}withValidator(t){return t.withValidListener(new coreutil_v1.ObjectFunction(this,this.oneValid)),t.withInvalidListener(new coreutil_v1.ObjectFunction(this,this.oneInvalid)),this.validatorList.add(t),this}oneValid(){super.valid()}oneInvalid(){let t=!1;this.validatorList.forEach((e,n)=>{if(e.isValid())return t=!0,!1;return!0},this),t?super.valid():super.invalid()}}class PasswordValidator extends AbstractValidator{validate(t){""===t?this.invalid():this.valid()}}class RequiredValidator extends AbstractValidator{validate(t){""===t?this.invalid():this.valid()}}exports.AbstractDataBinding=AbstractDataBinding,exports.AbstractInputElement=AbstractInputElement,exports.AbstractValidator=AbstractValidator,exports.AndValidatorSet=AndValidatorSet,exports.ApplicationStorage=ApplicationStorage,exports.Attribute=Attribute,exports.BaseElement=BaseElement,exports.CanvasRoot=CanvasRoot,exports.CanvasStyles=CanvasStyles,exports.CheckboxInputElement=CheckboxInputElement,exports.Client=Client,exports.Component=Component,exports.ComponentConfigProcessor=ComponentConfigProcessor,exports.ComponentFactory=ComponentFactory,exports.ComponentInstanceProcessor=ComponentInstanceProcessor,exports.ContainerBridge=ContainerBridge,exports.DataBindRegistry=DataBindRegistry,exports.ElementMapper=ElementMapper,exports.ElementRegistrator=ElementRegistrator,exports.EmailValidator=EmailValidator,exports.Event=Event,exports.EventRegistry=EventRegistry,exports.HTML=HTML,exports.History=History,exports.HttpCallBuilder=HttpCallBuilder,exports.HttpResponseHandler=HttpResponseHandler,exports.InputElementDataBinding=InputElementDataBinding,exports.JustrightConfig=JustrightConfig,exports.OrValidatorSet=OrValidatorSet,exports.PasswordValidator=PasswordValidator,exports.ProxyObjectFactory=ProxyObjectFactory,exports.RadioInputElement=RadioInputElement,exports.RequiredValidator=RequiredValidator,exports.SessionStorage=SessionStorage,exports.SimpleElement=SimpleElement,exports.State=State,exports.Styles=Styles,exports.StylesLoader=StylesLoader,exports.StylesRegistry=StylesRegistry,exports.Template=Template,exports.TemplateRegistry=TemplateRegistry,exports.TemplatesLoader=TemplatesLoader,exports.TextInputElement=TextInputElement,exports.TextareaInputElement=TextareaInputElement,exports.TextnodeElement=TextnodeElement,exports.UniqueIdRegistry=UniqueIdRegistry,exports.Url=Url;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianVzdHJpZ2h0X2NvcmVfdjEuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qdXN0cmlnaHQvYnJpZGdlL2NvbnRhaW5lckJyaWRnZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvZWxlbWVudC9hdHRyaWJ1dGUuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvYmFzZUVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NhbnZhcy9jYW52YXNSb290LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L2Fic3RyYWN0SW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3JhZGlvSW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L2NoZWNrYm94SW5wdXRFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3RleHRJbnB1dEVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvdGV4dGFyZWFJbnB1dEVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvdGV4dG5vZGVFbGVtZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9lbGVtZW50L3NpbXBsZUVsZW1lbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2VsZW1lbnQvZWxlbWVudE1hcHBlci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvaHRtbC9odG1sLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jYW52YXMvY2FudmFzU3R5bGVzLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jbGllbnQvY2xpZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvY29tcG9uZW50LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC91dGlsL3VybC5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3R5bGVzL3N0eWxlcy5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3R5bGVzL3N0eWxlc1JlZ2lzdHJ5LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC90ZW1wbGF0ZS90ZW1wbGF0ZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdGVtcGxhdGUvdGVtcGxhdGVSZWdpc3RyeS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdGVtcGxhdGUvdGVtcGxhdGVzTG9hZGVyLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9zdHlsZXMvc3R5bGVzTG9hZGVyLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvY29tcG9uZW50Q29uZmlnUHJvY2Vzc29yLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvdW5pcXVlSWRSZWdpc3RyeS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvZXZlbnQvZXZlbnQuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2V2ZW50L2V2ZW50UmVnaXN0cnkuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NvbXBvbmVudC9lbGVtZW50UmVnaXN0cmF0b3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2NvbXBvbmVudC9jb21wb25lbnRGYWN0b3J5LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9jb21wb25lbnQvY29tcG9uZW50SW5zdGFuY2VQcm9jZXNzb3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2RhdGFCaW5kL2Fic3RyYWN0RGF0YUJpbmRpbmcuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2RhdGFCaW5kL2RhdGFCaW5kUmVnaXN0cnkuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L2RhdGFCaW5kL2lucHV0RWxlbWVudERhdGFCaW5kaW5nLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9kYXRhQmluZC9wcm94eU9iamVjdEZhY3RvcnkuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L25hdmlnYXRpb24vaGlzdG9yeS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvbmF2aWdhdGlvbi9zdGF0ZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvanVzdHJpZ2h0Q29uZmlnLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC9zdG9yYWdlL2FwcGxpY2F0aW9uU3RvcmFnZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvc3RvcmFnZS9zZXNzaW9uU3RvcmFnZS5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdXRpbC9odHRwUmVzcG9uc2VIYW5kbGVyLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC91dGlsL2h0dHBDYWxsQnVpbGRlci5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdmFsaWRhdG9yL2Fic3RyYWN0VmFsaWRhdG9yLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC92YWxpZGF0b3IvYW5kVmFsaWRhdG9yU2V0LmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC92YWxpZGF0b3IvZW1haWxWYWxpZGF0b3IuanMiLCIuLi8uLi9zcmMvanVzdHJpZ2h0L3ZhbGlkYXRvci9vclZhbGlkYXRvclNldC5qcyIsIi4uLy4uL3NyYy9qdXN0cmlnaHQvdmFsaWRhdG9yL3Bhc3N3b3JkVmFsaWRhdG9yLmpzIiwiLi4vLi4vc3JjL2p1c3RyaWdodC92YWxpZGF0b3IvcmVxdWlyZWRWYWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQ29udGFpbmVyQnJpZGdlXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRhaW5lckJyaWRnZSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEVsZW1lbnRCeUlkKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbGV1IFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlVGV4dE5vZGUodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWUpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlRWxlbWVudChuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVTcGFjZSBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlRWxlbWVudE5TKG5hbWVTcGFjZSwgbmFtZSkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZVNwYWNlLCBuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmZXRjaCh1cmwsIHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuZmV0Y2godXJsLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN0b3JhZ2UgYnJpZGdlXHJcblxyXG4gICAgc3RhdGljIHNldFNlc3Npb25BdHRyaWJ1dGUoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZVNlc3Npb25BdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0U2Vzc2lvbkF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGFzU2Vzc2lvbkF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KSAhPT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0TG9jYWxBdHRyaWJ1dGUoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW1vdmVMb2NhbEF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGFzTG9jYWxBdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpICE9PSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRMb2NhbEF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZUVsZW1lbnQoaWQpIHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZEhlYWRlckVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbiAgICAgICAgaGVhZGVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYWRkQm9keUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIGxldCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdO1xyXG4gICAgICAgIGJvZHkuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBjbGFzcyBBdHRyaWJ1dGUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmlidXRlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZS52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZS5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE5hbWVzcGFjZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGUubmFtZTtcclxuICAgIH1cclxufSIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHsgWG1sRWxlbWVudCB9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7IE1hcCwgTG9nZ2VyLCBMaXN0IH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XG5pbXBvcnQgeyBBdHRyaWJ1dGUgfSBmcm9tIFwiLi9hdHRyaWJ1dGUuanNcIjtcbmltcG9ydCB7IENvbnRhaW5lckJyaWRnZSB9IGZyb20gXCIuLi9icmlkZ2UvY29udGFpbmVyQnJpZGdlLmpzXCI7XG5cbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJCYXNlRWxlbWVudFwiKTtcblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgZm9yIGVuY2xvc2luZyBhbiBIVE1MRWxlbWVudFxuICovXG5leHBvcnQgY2xhc3MgQmFzZUVsZW1lbnQge1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudHxzdHJpbmd8SFRNTEVsZW1lbnR9IHZhbHVlXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmFsdWUsIHBhcmVudCkge1xuICAgICAgICBcbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi9cbiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVNYXAgPSBudWxsO1xuICAgICAgICB0aGlzLmV2ZW50c0F0dGFjaGVkID0gbmV3IExpc3QoKTtcbiAgICAgICAgXG4gICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgWG1sRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jcmVhdGVGcm9tWG1sRWxlbWVudCh2YWx1ZSwgcGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmNyZWF0ZUVsZW1lbnQodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdmFsdWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgTE9HLmVycm9yKFwiVW5yZWNvZ25pemVkIHZhbHVlIGZvciBFbGVtZW50XCIpO1xuICAgICAgICBMT0cuZXJyb3IodmFsdWUpO1xuICAgIH1cblxuICAgIGxvYWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQuYXR0cmlidXRlcyA9PT0gbnVsbCB8fCB0aGlzLmVsZW1lbnQuYXR0cmlidXRlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmF0dHJpYnV0ZU1hcCA9PT0gbnVsbCB8fCB0aGlzLmF0dHJpYnV0ZU1hcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZU1hcC5zZXQodGhpcy5lbGVtZW50LmF0dHJpYnV0ZXNbaV0ubmFtZSxuZXcgQXR0cmlidXRlKHRoaXMuZWxlbWVudC5hdHRyaWJ1dGVzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYnJvd3NlciBFbGVtZW50IGZyb20gdGhlIFhtbEVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0geG1sRWxlbWVudFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudEVsZW1lbnRcbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICBjcmVhdGVGcm9tWG1sRWxlbWVudCh4bWxFbGVtZW50LCBwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgaWYoeG1sRWxlbWVudC5nZXROYW1lc3BhY2UoKSl7XG4gICAgICAgICAgICBlbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmNyZWF0ZUVsZW1lbnROUyh4bWxFbGVtZW50LmdldE5hbWVzcGFjZVVyaSgpLHhtbEVsZW1lbnQuZ2V0RnVsbE5hbWUoKSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgZWxlbWVudCA9IENvbnRhaW5lckJyaWRnZS5jcmVhdGVFbGVtZW50KHhtbEVsZW1lbnQuZ2V0TmFtZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZihwYXJlbnRFbGVtZW50ICYmIHBhcmVudEVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50LmdldE1hcHBlZEVsZW1lbnQoKS5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB4bWxFbGVtZW50LmdldEF0dHJpYnV0ZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSx2YWx1ZSl7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksdmFsdWUuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBhIGZ1bmN0aW9uIHRvIGFuIGV2ZW50IGluIHRoZSBlbmNsb3NlZCBlbGVtZW50IGlmIG5vbmUgYWxscmVhZHkgZXhpc3RzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY3Rpb25QYXJhbVxuICAgICAqL1xuICAgIGF0dGFjaEV2ZW50KGV2ZW50VHlwZSwgZnVuY3Rpb25QYXJhbSkge1xuICAgICAgICBpZighdGhpcy5ldmVudHNBdHRhY2hlZC5jb250YWlucyhldmVudFR5cGUpKSB7XG4gICAgICAgICAgICBpZihldmVudFR5cGUuc3RhcnRzV2l0aChcIm9uXCIpKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gZXZlbnRUeXBlLnN1YnN0cigyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZnVuY3Rpb25QYXJhbSk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50c0F0dGFjaGVkLmFkZChldmVudFR5cGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgTE9HLndhcm4oXCJFdmVudCAnXCIgKyBldmVudFR5cGUgKyBcIicgYWxscmVhZHkgYXR0YWNoZWQgZm9yIFwiICsgdGhpcy5lbGVtZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbmNsb3NlZCBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICBnZXRNYXBwZWRFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxuICAgIGdldEZ1bGxOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnRhZ05hbWU7XG4gICAgfVxuXG4gICAgZ2V0VG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICB9XG5cbiAgICBnZXRCb3R0b20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tO1xuICAgIH1cblxuICAgIGdldExlZnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICB9XG5cbiAgICBnZXRSaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodDtcbiAgICB9XG5cbiAgICBnZXRXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB9XG5cbiAgICBnZXRIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIH1cblxuICAgIGdldEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHRoaXMubG9hZEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlTWFwO1xuICAgIH1cblxuICAgIHNldEF0dHJpYnV0ZVZhbHVlKGtleSx2YWx1ZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSx2YWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0QXR0cmlidXRlVmFsdWUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgfVxuXG4gICAgY29udGFpbnNBdHRyaWJ1dGUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKGtleSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlQXR0cmlidXRlKGtleSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgfVxuXG4gICAgc2V0U3R5bGUoa2V5LHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZVtrZXldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0U3R5bGUoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuc3R5bGVba2V5XTtcbiAgICB9XG5cbiAgICByZW1vdmVTdHlsZShrZXkpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlW2tleV0gPSBudWxsO1xuICAgIH1cblxuICAgIHNldChpbnB1dCkge1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCl7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVGhlIGVsZW1lbnQgaGFzIG5vIHBhcmVudCwgY2FuIG5vdCBzd2FwIGl0IGZvciB2YWx1ZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihpbnB1dC5nZXRNYXBwZWRFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoaW5wdXQuZ2V0TWFwcGVkRWxlbWVudCgpLHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYoaW5wdXQgJiYgdHlwZW9mIGlucHV0LmdldFJvb3RFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChpbnB1dC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKSx0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gaW5wdXQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYodHlwZW9mIGlucHV0ID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChDb250YWluZXJCcmlkZ2UuY3JlYXRlVGV4dE5vZGUoaW5wdXQpLHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYoaW5wdXQgaW5zdGFuY2VvZiBUZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoaW5wdXQsdGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihpbnB1dCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChpbnB1dCx0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNNb3VudGVkKCkge1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0Q2hpbGQoaW5wdXQpIHtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB0aGlzLmFkZENoaWxkKGlucHV0KTtcbiAgICB9XG5cbiAgICBhZGRDaGlsZChpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZ2V0TWFwcGVkRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGlucHV0LmdldE1hcHBlZEVsZW1lbnQoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0ICYmIHR5cGVvZiBpbnB1dC5nZXRSb290RWxlbWVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5wdXQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKENvbnRhaW5lckJyaWRnZS5jcmVhdGVUZXh0Tm9kZShpbnB1dCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByZXBlbmRDaGlsZChpbnB1dCkge1xuICAgICAgICBpZih0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0LmdldE1hcHBlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXQuZ2V0TWFwcGVkRWxlbWVudCgpLHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgJiYgdHlwZW9mIGlucHV0LmdldFJvb3RFbGVtZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoaW5wdXQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCksdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZShDb250YWluZXJCcmlkZ2UuY3JlYXRlVGV4dE5vZGUoaW5wdXQpLHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBUZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGlucHV0LHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKGlucHV0LHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRhaW5lckJyaWRnZSB9IGZyb20gXCIuLi9icmlkZ2UvY29udGFpbmVyQnJpZGdlXCI7XHJcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvYmFzZUVsZW1lbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYW52YXNSb290IHtcclxuXHJcbiAgICBzdGF0aWMgcmVwbGFjZUNvbXBvbmVudChpZCwgY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIGJvZHlFbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICBib2R5RWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjb21wb25lbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCksIGJvZHlFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgc2V0Q29tcG9uZW50KGlkLCBjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgYm9keUVsZW1lbnQgPSBDb250YWluZXJCcmlkZ2UuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIGJvZHlFbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGJvZHlFbGVtZW50LmFwcGVuZENoaWxkKGNvbXBvbmVudC5nZXRSb290RWxlbWVudCgpLmdldE1hcHBlZEVsZW1lbnQoKSwgYm9keUVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRDaGlsZENvbXBvbmVudChpZCwgY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIGJvZHlFbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICBib2R5RWxlbWVudC5hcHBlbmRDaGlsZChjb21wb25lbnQuZ2V0Um9vdEVsZW1lbnQoKS5nZXRNYXBwZWRFbGVtZW50KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRDaGlsZEVsZW1lbnQoaWQsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgYm9keUVsZW1lbnQgPSBDb250YWluZXJCcmlkZ2UuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIGJvZHlFbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlRWxlbWVudChpZCkge1xyXG4gICAgICAgIENvbnRhaW5lckJyaWRnZS5yZW1vdmVFbGVtZW50KGlkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhZGRIZWFkZXJFbGVtZW50KGVsZW1lbnQpIHtcclxuICAgICAgICBDb250YWluZXJCcmlkZ2UuYWRkSGVhZGVyRWxlbWVudChlbGVtZW50LmdldE1hcHBlZEVsZW1lbnQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYWRkQm9keUVsZW1lbnQoZWxlbWVudCkge1xyXG4gICAgICAgIENvbnRhaW5lckJyaWRnZS5hZGRCb2R5RWxlbWVudChlbGVtZW50LmdldE1hcHBlZEVsZW1lbnQoKSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcbmltcG9ydCB7IFhtbEVsZW1lbnQgfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5cblxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIkFic3RyYWN0SW5wdXRFbGVtZW50XCIpO1xuXG4vKipcbiAqIFNoYXJlZCBwcm9wZXJ0aWVzIG9mIGlucHV0IGVsZW1lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBBYnN0cmFjdElucHV0RWxlbWVudCBleHRlbmRzIEJhc2VFbGVtZW50e1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBwYXJlbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgcGFyZW50KSB7XG4gICAgICAgIHN1cGVyKHZhbHVlLCBwYXJlbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsdWUgb2YgdGhlIGlucHV0cyBuYW1lXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5uYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsdWUgb2YgaW5wdXRzIG5hbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHNldE5hbWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm5hbWUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBnaXZlbiBhbnkgcHJvY2Vzc2luZyBydWxlc1xuICAgICAqL1xuICAgIGdldFZhbHVlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEJhY2tpbmdWYWx1ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNvdXJjZSB2YWx1ZVxuICAgICAqL1xuICAgIGdldEJhY2tpbmdWYWx1ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LnZhbHVlO1xuICAgIH1cblxuICAgIHNldFZhbHVlKHZhbHVlKXtcbiAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgIH1cblxuICAgIHNlbGVjdEFsbCgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNlbGVjdCgpO1xuICAgIH1cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtYbWxFbGVtZW50fSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQge0Fic3RyYWN0SW5wdXRFbGVtZW50fSBmcm9tIFwiLi9hYnN0cmFjdElucHV0RWxlbWVudC5qc1wiO1xuaW1wb3J0IHsgQmFzZUVsZW1lbnQgfSBmcm9tIFwiLi9iYXNlRWxlbWVudC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUmFkaW9JbnB1dEVsZW1lbnQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RWxlbWVudHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbEVsZW1lbnR9IGVsZW1lbnQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHBhcmVudCkge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBwYXJlbnQpO1xuICAgIH1cblxuICAgIHNldENoZWNrZWQodmFsdWUpe1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2hlY2tlZCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGlzQ2hlY2tlZCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmNoZWNrZWQ7XG4gICAgfVxuXG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIGlmKHRoaXMuaXNDaGVja2VkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHsgWG1sRWxlbWVudCB9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7IEFic3RyYWN0SW5wdXRFbGVtZW50IH0gZnJvbSBcIi4vYWJzdHJhY3RJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIENoZWNrYm94SW5wdXRFbGVtZW50IGV4dGVuZHMgQWJzdHJhY3RJbnB1dEVsZW1lbnR7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtYbWxFbGVtZW50fSBlbGVtZW50IFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudCBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBwYXJlbnQpIHtcbiAgICAgICAgc3VwZXIoZWxlbWVudCwgcGFyZW50KTtcbiAgICB9XG5cbiAgICBzZXRDaGVja2VkKHZhbHVlKXtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNoZWNrZWQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBpc0NoZWNrZWQoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jaGVja2VkO1xuICAgIH1cblxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICBpZih0aGlzLmlzQ2hlY2tlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7WG1sRWxlbWVudH0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHtBYnN0cmFjdElucHV0RWxlbWVudH0gZnJvbSBcIi4vYWJzdHJhY3RJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIFRleHRJbnB1dEVsZW1lbnQgZXh0ZW5kcyBBYnN0cmFjdElucHV0RWxlbWVudHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbEVsZW1lbnR9IGVsZW1lbnQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHBhcmVudCkge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBwYXJlbnQpO1xuICAgIH1cblxufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge1htbEVsZW1lbnR9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7QWJzdHJhY3RJbnB1dEVsZW1lbnR9IGZyb20gXCIuL2Fic3RyYWN0SW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBUZXh0YXJlYUlucHV0RWxlbWVudCBleHRlbmRzIEFic3RyYWN0SW5wdXRFbGVtZW50e1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0gZWxlbWVudCBcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBwYXJlbnQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgcGFyZW50KSB7XG4gICAgICAgIHN1cGVyKGVsZW1lbnQsIHBhcmVudCk7XG4gICAgfVxuXG4gICAgZ2V0SW5uZXJIVE1MKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MO1xuICAgIH1cblxuICAgIHNldElubmVySFRNTCh2YWx1ZSl7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBhZGRDaGlsZChpbnB1dCkge1xuICAgICAgICBzdXBlci5hZGRDaGlsZChpbnB1dCk7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRJbm5lckhUTUwoKSk7XG4gICAgfVxuXG4gICAgcHJlcGVuZENoaWxkKGlucHV0KSB7XG4gICAgICAgIHN1cGVyLnByZXBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5nZXRJbm5lckhUTUwoKSk7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQge1htbENkYXRhfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuL2Jhc2VFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBDb250YWluZXJCcmlkZ2UgfSBmcm9tIFwiLi4vYnJpZGdlL2NvbnRhaW5lckJyaWRnZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgVGV4dG5vZGVFbGVtZW50IHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbENkYXRhfSB2YWx1ZSBcbiAgICAgKiBAcGFyYW0ge0Jhc2VFbGVtZW50fSBwYXJlbnQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodmFsdWUsIHBhcmVudCkge1xuICAgICAgICBpZih2YWx1ZSBpbnN0YW5jZW9mIFhtbENkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmNyZWF0ZUZyb21YbWxDZGF0YSh2YWx1ZSwgcGFyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gQ29udGFpbmVyQnJpZGdlLmNyZWF0ZVRleHROb2RlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNyZWF0ZUZyb21YbWxDZGF0YShjZGF0YUVsZW1lbnQsIHBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjZGF0YUVsZW1lbnQuZ2V0VmFsdWUoKSk7XG4gICAgICAgIGlmKHBhcmVudEVsZW1lbnQgIT09IG51bGwgJiYgcGFyZW50RWxlbWVudC5nZXRNYXBwZWRFbGVtZW50KCkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuZ2V0TWFwcGVkRWxlbWVudCgpLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIHNldFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICAgIH1cblxuICAgIGdldE1hcHBlZEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gICAgfVxuXG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7WG1sRWxlbWVudH0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHtBYnN0cmFjdElucHV0RWxlbWVudH0gZnJvbSBcIi4vYWJzdHJhY3RJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIFNpbXBsZUVsZW1lbnQgZXh0ZW5kcyBCYXNlRWxlbWVudHtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1htbEVsZW1lbnR9IGVsZW1lbnQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIHBhcmVudCkge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBwYXJlbnQpO1xuICAgIH1cblxuICAgIGdldElubmVySFRNTCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmlubmVySFRNTDtcbiAgICB9XG5cbiAgICBzZXRJbm5lckhUTUwodmFsdWUpe1xuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgfVxuXG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbmltcG9ydCB7WG1sQ2RhdGEsWG1sRWxlbWVudH0gZnJvbSBcInhtbHBhcnNlcl92MVwiO1xuaW1wb3J0IHtSYWRpb0lucHV0RWxlbWVudH0gZnJvbSBcIi4vcmFkaW9JbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7Q2hlY2tib3hJbnB1dEVsZW1lbnR9IGZyb20gXCIuL2NoZWNrYm94SW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQge1RleHRJbnB1dEVsZW1lbnR9IGZyb20gXCIuL3RleHRJbnB1dEVsZW1lbnQuanNcIjtcbmltcG9ydCB7VGV4dGFyZWFJbnB1dEVsZW1lbnR9IGZyb20gXCIuL3RleHRhcmVhSW5wdXRFbGVtZW50LmpzXCI7XG5pbXBvcnQge1RleHRub2RlRWxlbWVudH0gZnJvbSBcIi4vdGV4dG5vZGVFbGVtZW50LmpzXCI7XG5pbXBvcnQge1NpbXBsZUVsZW1lbnR9IGZyb20gXCIuL3NpbXBsZUVsZW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4vYmFzZUVsZW1lbnQuanNcIjtcblxuZXhwb3J0IGNsYXNzIEVsZW1lbnRNYXBwZXIge1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3JcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2FueX0gaW5wdXQgXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcGFyZW50IFxuICAgICAqL1xuICAgIHN0YXRpYyBtYXAoaW5wdXQsIHBhcmVudCkge1xuICAgICAgICBpZiAoRWxlbWVudE1hcHBlci5tYXBzVG9SYWRpbyhpbnB1dCkpeyByZXR1cm4gbmV3IFJhZGlvSW5wdXRFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb0NoZWNrYm94KGlucHV0KSl7IHJldHVybiBuZXcgQ2hlY2tib3hJbnB1dEVsZW1lbnQoaW5wdXQsIHBhcmVudCk7IH1cbiAgICAgICAgaWYgKEVsZW1lbnRNYXBwZXIubWFwc1RvU3VibWl0KGlucHV0KSl7IHJldHVybiBuZXcgVGV4dElucHV0RWxlbWVudChpbnB1dCwgcGFyZW50KTsgfVxuICAgICAgICBpZiAoRWxlbWVudE1hcHBlci5tYXBzVG9UZXh0YXJlYShpbnB1dCkpeyByZXR1cm4gbmV3IFRleHRhcmVhSW5wdXRFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb1RleHQoaW5wdXQpKXsgcmV0dXJuIG5ldyBUZXh0SW5wdXRFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb1RleHRub2RlKGlucHV0KSl7IHJldHVybiBuZXcgVGV4dG5vZGVFbGVtZW50KGlucHV0LCBwYXJlbnQpOyB9XG4gICAgICAgIGlmIChFbGVtZW50TWFwcGVyLm1hcHNUb1NpbXBsZShpbnB1dCkpeyByZXR1cm4gbmV3IFNpbXBsZUVsZW1lbnQoaW5wdXQsIHBhcmVudCk7IH1cbiAgICAgICAgY29uc29sZS5sb2coXCJNYXBwaW5nIHRvIHNpbXBsZSBieSBkZWZhdWx0IFwiICsgaW5wdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFNpbXBsZUVsZW1lbnQoaW5wdXQsIHBhcmVudCk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1JhZGlvKGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgaW5wdXQudHlwZSA9PT0gXCJyYWRpb1wiKSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCAmJiBpbnB1dC5nZXROYW1lKCkgPT09IFwiaW5wdXRcIiAmJiBpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwicmFkaW9cIik7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb0NoZWNrYm94KGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgJiYgaW5wdXQudHlwZSA9PT0gXCJjaGVja2JveFwiKSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCAmJiBpbnB1dC5nZXROYW1lKCkgPT09IFwiaW5wdXRcIiAmJiBpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwiY2hlY2tib3hcIik7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1N1Ym1pdChpbnB1dCl7XG4gICAgICAgIHJldHVybiAoaW5wdXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50ICYmIGlucHV0LnR5cGUgPT09IFwic3VibWl0XCIpIHx8XG4gICAgICAgICAgICAoaW5wdXQgaW5zdGFuY2VvZiBYbWxFbGVtZW50ICYmIGlucHV0LmdldE5hbWUoKSA9PT0gXCJpbnB1dFwiICYmIGlucHV0LmdldEF0dHJpYnV0ZShcInR5cGVcIikuZ2V0VmFsdWUoKSA9PT0gXCJzdWJtaXRcIik7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1RleHQoaW5wdXQpe1xuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoaW5wdXQudHlwZSA9PT0gXCJ0ZXh0XCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSBcInBhc3N3b3JkXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSBcImVtYWlsXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmIChpbnB1dC50eXBlID09PSBcImRhdGVcIikgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT09IFwidGltZVwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoaW5wdXQgaW5zdGFuY2VvZiBYbWxFbGVtZW50ICYmIGlucHV0LmdldE5hbWUoKSA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwidGV4dFwiKSB7IHJldHVybiB0cnVlOyB9XG4gICAgICAgICAgICBpZihpbnB1dC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLmdldFZhbHVlKCkgPT09IFwicGFzc3dvcmRcIikgeyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgICAgICAgaWYoaW5wdXQuZ2V0QXR0cmlidXRlKFwidHlwZVwiKS5nZXRWYWx1ZSgpID09PSBcImVtYWlsXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmKGlucHV0LmdldEF0dHJpYnV0ZShcInR5cGVcIikuZ2V0VmFsdWUoKSA9PT0gXCJkYXRlXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgICAgIGlmKGlucHV0LmdldEF0dHJpYnV0ZShcInR5cGVcIikuZ2V0VmFsdWUoKSA9PT0gXCJ0aW1lXCIpIHsgcmV0dXJuIHRydWU7IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1RleHRub2RlKGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIE5vZGUgJiYgaW5wdXQubm9kZVR5cGUgPT09IFwiVEVYVF9OT0RFXCIpIHx8XG4gICAgICAgICAgICAoaW5wdXQgaW5zdGFuY2VvZiBYbWxDZGF0YSk7XG4gICAgfVxuXG4gICAgc3RhdGljIG1hcHNUb1RleHRhcmVhKGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQpIHx8XG4gICAgICAgICAgICAoaW5wdXQgaW5zdGFuY2VvZiBYbWxFbGVtZW50ICYmIGlucHV0LmdldE5hbWUoKSA9PT0gXCJ0ZXh0YXJlYVwiKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgbWFwc1RvU2ltcGxlKGlucHV0KXtcbiAgICAgICAgcmV0dXJuIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB8fFxuICAgICAgICAgICAgKGlucHV0IGluc3RhbmNlb2YgWG1sRWxlbWVudCk7XG4gICAgfVxufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge1htbEVsZW1lbnR9IGZyb20gXCJ4bWxwYXJzZXJfdjFcIjtcbmltcG9ydCB7RWxlbWVudE1hcHBlcn0gZnJvbSBcIi4uL2VsZW1lbnQvZWxlbWVudE1hcHBlci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgSFRNTHtcblxuICAgIHN0YXRpYyBjdXN0b20oZWxlbWVudE5hbWUpe1xuICAgICAgICB2YXIgeG1sRWxlbWVudCA9IG5ldyBYbWxFbGVtZW50KGVsZW1lbnROYW1lKTtcbiAgICAgICAgcmV0dXJuIEVsZW1lbnRNYXBwZXIubWFwKHhtbEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHN0YXRpYyBhcHBseVN0eWxlcyhlbGVtZW50LGNsYXNzVmFsdWUsc3R5bGVWYWx1ZSl7XG4gICAgICAgIGlmKGNsYXNzVmFsdWUgIT09IG51bGwpe1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVWYWx1ZShcImNsYXNzXCIsY2xhc3NWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoc3R5bGVWYWx1ZSAhPT0gbnVsbCl7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZVZhbHVlKFwic3R5bGVcIixzdHlsZVZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBhKG5hbWUsaHJlZixjbGFzc1ZhbHVlLHN0eWxlVmFsdWUpe1xuICAgICAgICB2YXIgZWxlbWVudCA9IEhUTUwuY3VzdG9tKFwiYVwiKTtcbiAgICAgICAgZWxlbWVudC5hZGRDaGlsZChuYW1lKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGVWYWx1ZShcImhyZWZcIixocmVmKTtcbiAgICAgICAgSFRNTC5hcHBseVN0eWxlcyhlbGVtZW50LGNsYXNzVmFsdWUsc3R5bGVWYWx1ZSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1hcCwgTGlzdCwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IENhbnZhc1Jvb3QgfSBmcm9tIFwiLi9jYW52YXNSb290XCI7XHJcbmltcG9ydCB7IEhUTUwgfSBmcm9tIFwiLi4vaHRtbC9odG1sXCI7XHJcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvYmFzZUVsZW1lbnRcIjtcclxuaW1wb3J0IHsgVGV4dG5vZGVFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvdGV4dG5vZGVFbGVtZW50XCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiQ2FudmFzU3R5bGVzXCIpO1xyXG5cclxuY29uc3Qgc3R5bGVzID0gbmV3IE1hcCgpO1xyXG5jb25zdCBlbmFibGVkU3R5bGVzID0gbmV3IExpc3QoKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYW52YXNTdHlsZXMge1xyXG5cclxuICAgIHN0YXRpYyBzZXRTdHlsZShuYW1lLCBzb3VyY2UpIHtcclxuICAgICAgICBpZihzdHlsZXMuY29udGFpbnMobmFtZSkpIHtcclxuICAgICAgICAgICAgc3R5bGVzLmdldChuYW1lKS5zZXRDaGlsZChuZXcgVGV4dG5vZGVFbGVtZW50KHNvdXJjZS5nZXRTdHlsZXNTb3VyY2UoKSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QmFzZUVsZW1lbnR9ICovXHJcbiAgICAgICAgICAgIGxldCBzdHlsZUVsZW1lbnQgPSBIVE1MLmN1c3RvbShcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICBzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlVmFsdWUoXCJpZFwiLG5hbWUpO1xyXG4gICAgICAgICAgICBzdHlsZUVsZW1lbnQuc2V0Q2hpbGQobmV3IFRleHRub2RlRWxlbWVudChzb3VyY2UuZ2V0U3R5bGVzU291cmNlKCkpKTtcclxuICAgICAgICAgICAgc3R5bGVzLnNldChuYW1lLCBzdHlsZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlU3R5bGUobmFtZSkge1xyXG4gICAgICAgIGlmKGVuYWJsZWRTdHlsZXMuY29udGFpbnMobmFtZSkpIHtcclxuICAgICAgICAgICAgQ2FudmFzU3R5bGVzLmRpc2FibGVTdHlsZShuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3R5bGVzLnJlbW92ZShuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGlzYWJsZVN0eWxlKG5hbWUpIHtcclxuICAgICAgICBpZighc3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcihcIlN0eWxlIGRvZXMgbm90IGV4aXN0OiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGVuYWJsZWRTdHlsZXMuY29udGFpbnMobmFtZSkpIHtcclxuICAgICAgICAgICAgZW5hYmxlZFN0eWxlcy5yZW1vdmUobmFtZSk7XHJcbiAgICAgICAgICAgIENhbnZhc1Jvb3QucmVtb3ZlRWxlbWVudChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGVuYWJsZVN0eWxlKG5hbWUpIHtcclxuICAgICAgICBpZighc3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcihcIlN0eWxlIGRvZXMgbm90IGV4aXN0OiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFlbmFibGVkU3R5bGVzLmNvbnRhaW5zKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIGVuYWJsZWRTdHlsZXMuYWRkKG5hbWUpO1xyXG4gICAgICAgICAgICBDYW52YXNSb290LmFkZEhlYWRlckVsZW1lbnQoc3R5bGVzLmdldChuYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29udGFpbmVyQnJpZGdlIH0gZnJvbSBcIi4uL2JyaWRnZS9jb250YWluZXJCcmlkZ2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDbGllbnQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0KHVybCl7XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9ICB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJywgLy8gbm8tY29ycywgY29ycywgKnNhbWUtb3JpZ2luXHJcbiAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JyAvLyBtYW51YWwsICpmb2xsb3csIGVycm9yXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UuZmV0Y2godXJsLnRvU3RyaW5nKCkscGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwb3N0KHVybCwgZGF0YSl7XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9ICB7XHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLCAvLyBtdXN0IG1hdGNoICdDb250ZW50LVR5cGUnIGhlYWRlclxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcInVzZXItYWdlbnRcIjogXCJNb3ppbGxhLzQuMCBNRE4gRXhhbXBsZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgbW9kZTogXCJjb3JzXCIsIC8vIG5vLWNvcnMsIGNvcnMsICpzYW1lLW9yaWdpblxyXG4gICAgICAgICAgICByZWRpcmVjdDogXCJmb2xsb3dcIiwgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvclxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmZldGNoKHVybC50b1N0cmluZygpLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHB1dCh1cmwsIGRhdGEpe1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSAge1xyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSwgLy8gbXVzdCBtYXRjaCAnQ29udGVudC1UeXBlJyBoZWFkZXJcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJywgXHJcbiAgICAgICAgICAgIG1vZGU6ICdjb3JzJywgLy8gbm8tY29ycywgY29ycywgKnNhbWUtb3JpZ2luXHJcbiAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JywgLy8gbWFudWFsLCAqZm9sbG93LCBlcnJvclxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzQuMCBNRE4gRXhhbXBsZScsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5mZXRjaCh1cmwudG9TdHJpbmcoKSwgcGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwYXRjaCh1cmwsIGRhdGEpe1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSAge1xyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSwgLy8gbXVzdCBtYXRjaCAnQ29udGVudC1UeXBlJyBoZWFkZXJcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLCBcclxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLCAvLyBuby1jb3JzLCBjb3JzLCAqc2FtZS1vcmlnaW5cclxuICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnLCAvLyBtYW51YWwsICpmb2xsb3csIGVycm9yXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNC4wIE1ETiBFeGFtcGxlJyxcclxuICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmZldGNoKHVybC50b1N0cmluZygpLCBwYXJhbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBkZWxldGUodXJsKXtcclxuICAgICAgICB2YXIgcGFyYW1zID0gIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgbW9kZTogJ2NvcnMnLCAvLyBuby1jb3JzLCBjb3JzLCAqc2FtZS1vcmlnaW5cclxuICAgICAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnIC8vIG1hbnVhbCwgKmZvbGxvdywgZXJyb3JcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5mZXRjaCh1cmwudG9TdHJpbmcoKSwgcGFyYW1zKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IE1hcCB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50L2Jhc2VFbGVtZW50XCI7XHJcblxyXG4vKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXHJcblxyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvbXBvbmVudEluZGV4IFxyXG4gICAgICogQHBhcmFtIHtCYXNlRWxlbWVudH0gcm9vdEVsZW1lbnQgXHJcbiAgICAgKiBAcGFyYW0ge01hcH0gZWxlbWVudE1hcCBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50SW5kZXgsIHJvb3RFbGVtZW50LCBlbGVtZW50TWFwKSB7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRJbmRleCA9IGNvbXBvbmVudEluZGV4O1xyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcCA9IGVsZW1lbnRNYXA7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudCA9IHJvb3RFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZSgpIHtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge0Jhc2VFbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBnZXRSb290RWxlbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb21wb25lbnRJbmRleCgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMge0Jhc2VFbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBnZXQoaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50TWFwLmdldChpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IChpZCwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRNYXAuZ2V0KGlkKS5zZXQodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyQ2hpbGRyZW4oaWQpe1xyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcC5nZXQoaWQpLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2hpbGQgKGlkLCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcC5nZXQoaWQpLnNldENoaWxkKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDaGlsZCAoaWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50TWFwLmdldChpZCkuYWRkQ2hpbGQodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXBlbmRDaGlsZCAoaWQsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50TWFwLmdldChpZCkucHJlcGVuZENoaWxkKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQge0xpc3QsTWFwfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcblxuZXhwb3J0IGNsYXNzIFVybHtcblxuICAgIGNvbnN0cnVjdG9yKHZhbHVlKXtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IG51bGw7XG4gICAgICAgIHRoaXMuaG9zdCA9IG51bGw7XG4gICAgICAgIHRoaXMucG9ydCA9IG51bGw7XG4gICAgICAgIHRoaXMucGF0aExpc3QgPSBuZXcgTGlzdCgpO1xuICAgICAgICB0aGlzLnBhcmFtZXRlck1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5ib29rbWFyayA9IG51bGw7XG4gICAgICAgIGlmKHZhbHVlID09PSBudWxsKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVtYWluaW5nID0gdGhpcy5kZXRlcm1pbmVQcm90b2NvbCh2YWx1ZSk7XG4gICAgICAgIGlmKHJlbWFpbmluZyA9PT0gbnVsbCl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5wcm90b2NvbCAhPT0gbnVsbCl7XG4gICAgICAgICAgICByZW1haW5pbmcgPSB0aGlzLmRldGVybWluZUhvc3QocmVtYWluaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuaG9zdCAhPT0gbnVsbCl7XG4gICAgICAgICAgICByZW1haW5pbmcgPSB0aGlzLmRldGVybWluZVBvcnQocmVtYWluaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlbWFpbmluZyA9IHRoaXMuZGV0ZXJtaW5lUGF0aChyZW1haW5pbmcpO1xuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpe1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlbWFpbmluZyA9IHRoaXMuZGV0ZXJtaW5lUGFyYW1ldGVycyhyZW1haW5pbmcpO1xuICAgICAgICBpZihyZW1haW5pbmcgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGV0ZXJtaW5lQm9va21hcmsocmVtYWluaW5nKTtcbiAgICB9XG5cbiAgICBnZXRQcm90b2NvbCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wcm90b2NvbDtcbiAgICB9XG5cbiAgICBnZXRIb3N0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3Q7XG4gICAgfVxuXG4gICAgZ2V0UG9ydCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wb3J0O1xuICAgIH1cblxuICAgIGdldFBhdGhMaXN0KCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGhMaXN0O1xuICAgIH1cblxuICAgIGdldFBhdGgoaW5kZXgpe1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoTGlzdC5nZXQoaW5kZXgpO1xuICAgIH1cblxuICAgIGNsZWFyUGF0aExpc3QoKXtcbiAgICAgICAgdGhpcy5wYXRoTGlzdCA9IG5ldyBMaXN0KCk7XG4gICAgfVxuXG4gICAgZ2V0UGFyYW1ldGVyTWFwKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlck1hcDtcbiAgICB9XG5cbiAgICBjbGVhclBhcmFtZXRlck1BcCgpe1xuICAgICAgICB0aGlzLnBhcmFtZXRlck1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICBnZXRQYXJhbWV0ZXIoa2V5KXtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVyTWFwLmdldChrZXkpO1xuICAgIH1cblxuICAgIHNldFBhcmFtZXRlcihrZXksdmFsdWUpe1xuICAgICAgICB0aGlzLnBhcmFtZXRlck1hcC5zZXQoa2V5LHZhbHVlKTtcbiAgICB9XG5cbiAgICBzZXRCb29rbWFyayhib29rbWFyayl7XG4gICAgICAgIHRoaXMuYm9va21hcmsgPSBib29rbWFyaztcbiAgICB9XG5cbiAgICBzZXRQYXRoKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGV0ZXJtaW5lUGF0aCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgc2V0UXVlcnlTdHJpbmcodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAgPSB0aGlzLmRldGVybWluZVBhcmFtZXRlcnModmFsdWUpO1xuICAgIH1cblxuICAgIGdldEJvb2ttYXJrKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmJvb2ttYXJrO1xuICAgIH1cblxuICAgIGRldGVybWluZVByb3RvY29sKHZhbHVlKXtcbiAgICAgICAgaWYodmFsdWUuaW5kZXhPZihcIi8vXCIpID09PSAtMSl7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoXCIvL1wiKTtcbiAgICAgICAgaWYocGFydHNbMF0uaW5kZXhPZihcIi9cIikgIT09IC0xKXtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3RvY29sID0gcGFydHNbMF07XG4gICAgICAgIGlmKHBhcnRzLmxlbmd0aD09MSl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShwYXJ0c1swXSArIFwiLy9cIixcIlwiKTtcbiAgICB9XG5cbiAgICBkZXRlcm1pbmVIb3N0KHZhbHVlKXtcbiAgICAgICAgdmFyIHBhcnRzID0gdmFsdWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICB2YXIgaG9zdFBhcnQgPSBwYXJ0c1swXTtcbiAgICAgICAgaWYoaG9zdFBhcnQuaW5kZXhPZihcIjpcIikgIT09IC0xKXtcbiAgICAgICAgICAgIGhvc3RQYXJ0ID0gaG9zdFBhcnQuc3BsaXQoXCI6XCIpWzBdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3RQYXJ0O1xuICAgICAgICBpZihwYXJ0cy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKGhvc3RQYXJ0LFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGRldGVybWluZVBvcnQodmFsdWUpe1xuICAgICAgICBpZighdmFsdWUuc3RhcnRzV2l0aChcIjpcIikpe1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwb3J0UGFydCA9IHZhbHVlLnNwbGl0KFwiL1wiKVswXS5zdWJzdHJpbmcoMSk7XG4gICAgICAgIHRoaXMucG9ydCA9IHBvcnRQYXJ0O1xuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShcIjpcIiArIHBvcnRQYXJ0LFwiXCIpO1xuICAgIH1cblxuICAgIGRldGVybWluZVBhdGgodmFsdWUpe1xuICAgICAgICB2YXIgcmVtYWluaW5nID0gdmFsdWU7XG4gICAgICAgIGlmKHZhbHVlLmluZGV4T2YoXCI/XCIpICE9PSAtMSl7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSB2YWx1ZS5zcGxpdChcIj9cIik7XG4gICAgICAgICAgICBpZihwYXJ0cy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgICAgICByZW1haW5pbmcgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZihcIj9cIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBwYXJ0c1swXTtcbiAgICAgICAgfSBlbHNlIGlmKHZhbHVlLmluZGV4T2YoXCIjXCIpICE9PSAtMSl7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSB2YWx1ZS5zcGxpdChcIiNcIik7XG4gICAgICAgICAgICBpZihwYXJ0cy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgICAgICByZW1haW5pbmcgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZihcIiNcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBwYXJ0c1swXTtcbiAgICAgICAgfVxuICAgICAgICBpZih2YWx1ZS5zdGFydHNXaXRoKFwiL1wiKSl7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF0aFBhcnRzID0gbmV3IExpc3QodmFsdWUuc3BsaXQoXCIvXCIpKTtcbiAgICAgICAgdGhpcy5wYXRoTGlzdCA9IG5ldyBMaXN0KCk7XG4gICAgICAgIHBhdGhQYXJ0cy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLHBhcmVudCl7XG4gICAgICAgICAgICBwYXJlbnQucGF0aExpc3QuYWRkKGRlY29kZVVSSSh2YWx1ZSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sdGhpcyk7XG4gICAgICAgIHJldHVybiByZW1haW5pbmc7XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5lUGFyYW1ldGVycyh2YWx1ZSl7XG4gICAgICAgIHZhciByZW1haW5pbmcgPSB2YWx1ZTtcbiAgICAgICAgaWYodmFsdWUuaW5kZXhPZihcIj9cIikgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZihcIj9cIikrMSk7XG4gICAgICAgIGlmKHZhbHVlLmluZGV4T2YoXCIjXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgcmVtYWluaW5nID0gdmFsdWUuc3Vic3RyaW5nKHZhbHVlLmluZGV4T2YoXCIjXCIpKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDAsdmFsdWUuaW5kZXhPZihcIiNcIikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJ0TGlzdCA9IG5ldyBMaXN0KHZhbHVlLnNwbGl0KFwiJlwiKSk7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHBhcnRMaXN0LmZvckVhY2goZnVuY3Rpb24odmFsdWUscGFyZW50KXtcbiAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IHZhbHVlLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgIGlmKGtleVZhbHVlLmxlbmd0aCA+PSAyKXtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJNYXAuc2V0KGRlY29kZVVSSShrZXlWYWx1ZVswXSksZGVjb2RlVVJJKGtleVZhbHVlWzFdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAgPSBwYXJhbWV0ZXJNYXA7XG4gICAgICAgIHJldHVybiByZW1haW5pbmc7XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5lQm9va21hcmsodmFsdWUpe1xuICAgICAgICBpZih2YWx1ZS5pbmRleE9mKFwiI1wiKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuYm9va21hcmsgPSB2YWx1ZS5zdWJzdHJpbmcodmFsdWUuaW5kZXhPZihcIiNcIikrMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b1N0cmluZygpe1xuICAgICAgICB2YXIgdmFsdWUgPSBcIlwiO1xuICAgICAgICBpZih0aGlzLnByb3RvY29sICE9PSBudWxsKXtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyB0aGlzLnByb3RvY29sICsgXCIvL1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuaG9zdCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgdGhpcy5ob3N0O1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMucG9ydCAhPT0gbnVsbCl7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgXCI6XCIgKyB0aGlzLnBvcnQ7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBhdGhMaXN0LmZvckVhY2goZnVuY3Rpb24ocGF0aFBhcnQscGFyZW50KXtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBcIi9cIiArIHBhdGhQYXJ0O1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sdGhpcyk7XG5cbiAgICAgICAgdmFyIGZpcnN0UGFyYW1ldGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJNYXAuZm9yRWFjaChmdW5jdGlvbihwYXJhbWV0ZXJLZXkscGFyYW1ldGVyVmFsdWUscGFyZW50KXtcbiAgICAgICAgICAgIGlmKGZpcnN0UGFyYW1ldGVyKXtcbiAgICAgICAgICAgICAgICBmaXJzdFBhcmFtZXRlcj1mYWxzZTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgXCI/XCI7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgXCImXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgZW5jb2RlVVJJKHBhcmFtZXRlcktleSkgKyBcIj1cIiArIGVuY29kZVVSSShwYXJhbWV0ZXJWYWx1ZSk7XG4gICAgICAgIH0sdGhpcyk7XG4gICAgICAgIGlmKHRoaXMuYm9va21hcmsgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBcIiNcIiArIHRoaXMuYm9va21hcms7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxufVxuIiwiZXhwb3J0IGNsYXNzIFN0eWxlc3tcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlc1NvdXJjZSBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVzU291cmNlKXtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcbiAgICAgICAgdGhpcy5zdHlsZXNTb3VyY2UgPSBzdHlsZXNTb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBnZXRTdHlsZXNTb3VyY2UoKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZXNTb3VyY2U7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cclxuXHJcbmltcG9ydCB7TWFwLCBMb2dnZXIsIE9iamVjdEZ1bmN0aW9ufSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQ2xpZW50IH0gZnJvbSBcIi4uL2NsaWVudC9jbGllbnQuanNcIjtcclxuaW1wb3J0IHsgVXJsIH0gZnJvbSBcIi4uL3V0aWwvdXJsLmpzXCI7XHJcbmltcG9ydCB7IFN0eWxlcyB9IGZyb20gXCIuL3N0eWxlcy5qc1wiO1xyXG5cclxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIlN0eWxlc1JlZ2lzdHJ5XCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0eWxlc1JlZ2lzdHJ5IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIC8qKiBAdHlwZSB7TWFwfSAqL1xyXG4gICAgICAgIHRoaXMuc3R5bGVzTWFwID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge01hcH0gKi9cclxuICAgICAgICB0aGlzLnN0eWxlc1VybE1hcCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtpbnRlZ2VyfSAqL1xyXG4gICAgICAgIHRoaXMuc3R5bGVzUXVldWVTaXplID0gMDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3RGdW5jdGlvbn0gKi9cclxuICAgICAgICB0aGlzLmNhbGxiYWNrID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKiBAcGFyYW0ge1N0eWxlc30gc3R5bGVzIFxyXG4gICAgICogQHBhcmFtIHtVcmx9IHVybCBcclxuICAgICAqL1xyXG4gICAgc2V0KG5hbWUsc3R5bGVzLHVybCl7XHJcbiAgICAgICAgaWYodXJsICE9PSB1bmRlZmluZWQgJiYgdXJsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzVXJsTWFwLnNldChuYW1lLCB1cmwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0eWxlc01hcC5zZXQobmFtZSwgc3R5bGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKi9cclxuICAgIGdldChuYW1lKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZXNNYXAuZ2V0KG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcclxuICAgICAqL1xyXG4gICAgY29udGFpbnMobmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzTWFwLmNvbnRhaW5zKG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdEZ1bmN0aW9ufSBjYWxsYmFjayBcclxuICAgICAqL1xyXG4gICAgZG9uZShjYWxsYmFjayl7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHRoaXMuZG9DYWxsYmFjayh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtTdHlsZXNSZWdpc3RyeX0gcmVnaXN0cnkgXHJcbiAgICAgKi9cclxuICAgIGRvQ2FsbGJhY2socmVnaXN0cnkpe1xyXG4gICAgICAgIGlmKHRtby5jYWxsYmFjayAhPT0gbnVsbCAmJiByZWdpc3RyeS5jYWxsYmFjayAhPT0gdW5kZWZpbmVkICAmJiByZWdpc3RyeS5zdHlsZXNRdWV1ZVNpemUgPT09IHJlZ2lzdHJ5LnN0eWxlc01hcC5zaXplKCkpe1xyXG4gICAgICAgICAgICB2YXIgdGVtcENhbGxiYWNrID0gcmVnaXN0cnkuY2FsbGJhY2s7XHJcbiAgICAgICAgICAgIHJlZ2lzdHJ5LmNhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgdGVtcENhbGxiYWNrLmNhbGwoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxyXG4gICAgICogQHBhcmFtIHtVcmx9IHVybCBcclxuICAgICAqL1xyXG4gICAgIGxvYWQobmFtZSwgdXJsKSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZXNRdWV1ZVNpemUgKys7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIENsaWVudC5nZXQodXJsKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoIXJlc3BvbnNlLm9rKXtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2FkIHN0eWxlcyBmb3IgXCIgKyBuYW1lICsgXCIgYXQgXCIgKyB1cmw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS50ZXh0KCkudGhlbigodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KG5hbWUsbmV3IFN0eWxlcyh0ZXh0KSx1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9DYWxsYmFjayh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge01hcH0gbmFtZVVybE1hcCBcclxuICAgICAqL1xyXG4gICAgZ2V0U3R5bGVzTG9hZGVkUHJvbWlzZShuYW1lVXJsTWFwKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgbG9hZGVkID0gMDtcclxuICAgICAgICAgICAgaWYoIW5hbWVVcmxNYXAgfHwgbmFtZVVybE1hcC5zaXplKCkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5hbWVVcmxNYXAuZm9yRWFjaCgoa2V5LCB2YWx1ZSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNvbnRhaW5zKGtleSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZCArKztcclxuICAgICAgICAgICAgICAgICAgICBpZihsb2FkZWQgPT0gbmFtZVVybE1hcC5zaXplKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJyZWFrIGxvb3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucHJpdmF0ZUxvYWQoa2V5LCBuZXcgVXJsKHZhbHVlKSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxvYWRlZCA9PSBuYW1lVXJsTWFwLnNpemUoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmVhayBsb29wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnJlYWsgbG9vcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSx0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXHJcbiAgICAgKiBAcGFyYW0ge1VybH0gdXJsIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlTG9hZChuYW1lLCB1cmwpIHtcclxuICAgICAgICBMT0cuaW5mbyhcIkxvYWRpbmcgc3R5bGVzIFwiICsgbmFtZSArIFwiIGF0IFwiICsgdXJsLnRvU3RyaW5nKCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgQ2xpZW50LmdldCh1cmwpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZighcmVzcG9uc2Uub2spe1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFwiVW5hYmxlIHRvIGxvYWQgc3R5bGVzIGZvciBcIiArIG5hbWUgKyBcIiBhdCBcIiArIHVybDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnRleHQoKS50aGVuKCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQobmFtZSxuZXcgU3R5bGVzKHRleHQpLHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5leHBvcnQgY2xhc3MgVGVtcGxhdGV7XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGVTb3VyY2UgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGVTb3VyY2Upe1xuXG4gICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgICAgICB0aGlzLnRlbXBsYXRlU291cmNlID0gdGVtcGxhdGVTb3VyY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRUZW1wbGF0ZVNvdXJjZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVNvdXJjZTtcbiAgICB9XG5cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtNYXAsIExvZ2dlciwgT2JqZWN0RnVuY3Rpb259IGZyb20gXCJjb3JldXRpbF92MVwiO1xuaW1wb3J0IHtUZW1wbGF0ZX0gZnJvbSBcIi4vdGVtcGxhdGUuanNcIjtcbmltcG9ydCB7IENsaWVudCB9IGZyb20gXCIuLi9jbGllbnQvY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBVcmwgfSBmcm9tIFwiLi4vdXRpbC91cmwuanNcIjtcblxuY29uc3QgTE9HID0gbmV3IExvZ2dlcihcIlRlbXBsYXRlUmVnaXN0cnlcIik7XG5cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZVJlZ2lzdHJ5IHtcblxuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIC8qKiBAdHlwZSB7TWFwfSAqL1xuICAgICAgICB0aGlzLnRlbXBsYXRlTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7TWFwfSAqL1xuICAgICAgICB0aGlzLnRlbXBsYXRlVXJsTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7aW50ZWdlcn0gKi9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZVF1ZXVlU2l6ZSA9IDA7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3RGdW5jdGlvbn0gKi9cbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IG51bGw7XG5cbiAgICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgICAgIHRoaXMubGFuZ3VhZ2VQcmVmaXggPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZVByZWZpeCBcbiAgICAgKi9cbiAgICBzZXRMYW5ndWFnZVByZWZpeChsYW5ndWFnZVByZWZpeCkge1xuICAgICAgICB0aGlzLmxhbmd1YWdlUHJlZml4ID0gbGFuZ3VhZ2VQcmVmaXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZX0gdGVtcGxhdGUgXG4gICAgICogQHBhcmFtIHtVcmx9IHVybCBcbiAgICAgKi9cbiAgICBzZXQobmFtZSx0ZW1wbGF0ZSx1cmwpe1xuICAgICAgICBpZih1cmwgIT09IHVuZGVmaW5lZCAmJiB1cmwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVVcmxNYXAuc2V0KG5hbWUsIHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZW1wbGF0ZU1hcC5zZXQobmFtZSwgdGVtcGxhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICAgICAqL1xuICAgIGdldChuYW1lKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVNYXAuZ2V0KG5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICAgICAqL1xuICAgIGNvbnRhaW5zKG5hbWUpe1xuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZU1hcC5jb250YWlucyhuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge09iamVjdEZ1bmN0aW9ufSBjYWxsYmFjayBcbiAgICAgKi9cbiAgICBkb25lKGNhbGxiYWNrKXtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLmRvQ2FsbGJhY2sodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZVJlZ2lzdHJ5fSByZWdpc3RyeSBcbiAgICAgKi9cbiAgICBkb0NhbGxiYWNrKHJlZ2lzdHJ5KXtcbiAgICAgICAgaWYodG1vLmNhbGxiYWNrICE9PSBudWxsICYmIHJlZ2lzdHJ5LmNhbGxiYWNrICE9PSB1bmRlZmluZWQgICYmIHJlZ2lzdHJ5LnRlbXBsYXRlUXVldWVTaXplID09PSByZWdpc3RyeS50ZW1wbGF0ZU1hcC5zaXplKCkpe1xuICAgICAgICAgICAgdmFyIHRlbXBDYWxsYmFjayA9IHJlZ2lzdHJ5LmNhbGxiYWNrO1xuICAgICAgICAgICAgcmVnaXN0cnkuY2FsbGJhY2sgPSBudWxsO1xuICAgICAgICAgICAgdGVtcENhbGxiYWNrLmNhbGwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICAgICAqIEBwYXJhbSB7VXJsfSB1cmwgXG4gICAgICovXG4gICAgbG9hZChuYW1lLCB1cmwpIHtcbiAgICAgICAgaWYodGhpcy5sYW5ndWFnZVByZWZpeCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdXJsLmdldFBhdGhMaXN0KCkuc2V0TGFzdChcbiAgICAgICAgICAgICAgICB0aGlzLmxhbmd1YWdlUHJlZml4ICsgXCIuXCIgK1xuICAgICAgICAgICAgICAgIHVybC5nZXRQYXRoTGlzdCgpLmdldExhc3QoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRlbXBsYXRlUXVldWVTaXplICsrO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIENsaWVudC5nZXQodXJsKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKCFyZXNwb25zZS5vayl7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IFwiVW5hYmxlIHRvIGxvYWQgdGVtcGxhdGUgZm9yIFwiICsgbmFtZSArIFwiIGF0IFwiICsgdXJsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNwb25zZS50ZXh0KCkudGhlbigodGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldChuYW1lLG5ldyBUZW1wbGF0ZSh0ZXh0KSx1cmwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvQ2FsbGJhY2sodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge01hcH0gbmFtZVVybE1hcCBcbiAgICAgKi9cbiAgICBnZXRUZW1wbGF0ZXNMb2FkZWRQcm9taXNlKG5hbWVVcmxNYXApIHtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB2YXIgbG9hZGVkID0gMDtcbiAgICAgICAgICAgIGlmKCFuYW1lVXJsTWFwIHx8IG5hbWVVcmxNYXAuc2l6ZSgpID09IDApIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmFtZVVybE1hcC5mb3JFYWNoKChrZXksIHZhbHVlLCBwYXJlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNvbnRhaW5zKGtleSkpe1xuICAgICAgICAgICAgICAgICAgICBsb2FkZWQgKys7XG4gICAgICAgICAgICAgICAgICAgIGlmKGxvYWRlZCA9PSBuYW1lVXJsTWFwLnNpemUoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmVhayBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJpdmF0ZUxvYWQoa2V5LCBuZXcgVXJsKHZhbHVlKSlcblxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsb2FkZWQgPT0gbmFtZVVybE1hcC5zaXplKCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmVhayBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJyZWFrIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBcbiAgICAgKiBAcGFyYW0ge1VybH0gdXJsIFxuICAgICAqL1xuICAgIHByaXZhdGVMb2FkKG5hbWUsIHVybCkge1xuICAgICAgICBpZih0aGlzLmxhbmd1YWdlUHJlZml4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB1cmwuZ2V0UGF0aExpc3QoKS5zZXRMYXN0KFxuICAgICAgICAgICAgICAgIHRoaXMubGFuZ3VhZ2VQcmVmaXggKyBcIi5cIiArXG4gICAgICAgICAgICAgICAgdXJsLmdldFBhdGhMaXN0KCkuZ2V0TGFzdCgpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIExPRy5pbmZvKFwiTG9hZGluZyB0ZW1wbGF0ZSBcIiArIG5hbWUgKyBcIiBhdCBcIiArIHVybC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHNlKSA9PiB7XG4gICAgICAgICAgICBDbGllbnQuZ2V0KHVybCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZighcmVzcG9uc2Uub2spe1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIlVuYWJsZSB0byBsb2FkIHRlbXBsYXRlIGZvciBcIiArIG5hbWUgKyBcIiBhdCBcIiArIHVybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQobmFtZSxuZXcgVGVtcGxhdGUodGV4dCksdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2xzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBMb2dnZXIsIE1hcCB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBDb25maWcgfSBmcm9tIFwibWluZGlfdjFcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVSZWdpc3RyeSB9IGZyb20gXCIuL3RlbXBsYXRlUmVnaXN0cnkuanNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJUZW1wbGF0ZVBvc3RDb25maWdcIik7XHJcblxyXG4vKipcclxuICogVG8gYmUgYWRkZWQgdG8gbWluZGkgYXMgYSBzaW5nbGV0b24uIFdpbGwgc2NhbiB0aHJvdWdoIGFsbCBjb25maWd1cmVkIGNsYXNzZXMgdGhhdCBoYXZlIGEgVEVNUExBVEVfVVJMIGFuZCBDT01QT05FTlRfTkFNRVxyXG4gKiBzdGF0aWMgZ2V0dGVyIGFuZCB3aWxsIGFzeW5jcm9ub3VzbHkgbG9hZCB0aGVtLiBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB3aGVuIGFsbCB0ZW1wbGF0ZXMgYXJlIGxvYWRlZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlc0xvYWRlciB7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge1RlbXBsYXRlUmVnaXN0cnl9IHRlbXBsYXRlUmVnaXN0cnkgXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVnaXN0cnkpIHtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlUmVnaXN0cnkgPSB0ZW1wbGF0ZVJlZ2lzdHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge0NvbmZpZ30gY29uZmlnIFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgKi9cclxuICAgIGxvYWQoY29uZmlnKSB7XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlTWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGNvbmZpZy5nZXRDb25maWdFbGVtZW50cygpLmZvckVhY2goKGtleSwgZW50cnksIHBhcmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZihlbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLlRFTVBMQVRFX1VSTCAmJiBlbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLkNPTVBPTkVOVF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZU1hcC5zZXQoZW50cnkuZ2V0Q2xhc3NSZWZlcmVuY2UoKS5DT01QT05FTlRfTkFNRSwgZW50cnkuZ2V0Q2xhc3NSZWZlcmVuY2UoKS5URU1QTEFURV9VUkwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sIHRoaXMpOyBcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5LmdldFRlbXBsYXRlc0xvYWRlZFByb21pc2UodGVtcGxhdGVNYXApO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IExvZ2dlciwgTWFwIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IENvbmZpZyB9IGZyb20gXCJtaW5kaV92MVwiO1xyXG5pbXBvcnQgeyBTdHlsZXNSZWdpc3RyeSB9IGZyb20gXCIuL3N0eWxlc1JlZ2lzdHJ5LmpzXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiU3R5bGVzTG9hZGVyXCIpO1xyXG5cclxuLyoqXHJcbiAqIFRvIGJlIGFkZGVkIHRvIG1pbmRpIGFzIGEgc2luZ2xldG9uLiBXaWxsIHNjYW4gdGhyb3VnaCBhbGwgY29uZmlndXJlZCBjbGFzc2VzIHRoYXQgaGF2ZSBhIFNUWUxFU19VUkwgYW5kIENPTVBPTkVOVF9OQU1FXHJcbiAqIHN0YXRpYyBnZXR0ZXIgYW5kIHdpbGwgYXN5bmNyb25vdXNseSBsb2FkIHRoZW0uIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIHN0eWxlcyBhcmUgbG9hZGVkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3R5bGVzTG9hZGVyIHtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7U3R5bGVzUmVnaXN0cnl9IHN0eWxlc1JlZ2lzdHJ5IFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZXNSZWdpc3RyeSkge1xyXG4gICAgICAgIHRoaXMuc3R5bGVzUmVnaXN0cnkgPSBzdHlsZXNSZWdpc3RyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtDb25maWd9IGNvbmZpZyBcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAgICovXHJcbiAgICBsb2FkKGNvbmZpZykge1xyXG4gICAgICAgIGxldCBzdHlsZXNNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgY29uZmlnLmdldENvbmZpZ0VsZW1lbnRzKCkuZm9yRWFjaCgoa2V5LCBlbnRyeSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGVudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuU1RZTEVTX1VSTCAmJiBlbnRyeS5nZXRDbGFzc1JlZmVyZW5jZSgpLkNPTVBPTkVOVF9OQU1FKSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZXNNYXAuc2V0KGVudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuQ09NUE9ORU5UX05BTUUsIGVudHJ5LmdldENsYXNzUmVmZXJlbmNlKCkuU1RZTEVTX1VSTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7IFxyXG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlc1JlZ2lzdHJ5LmdldFN0eWxlc0xvYWRlZFByb21pc2Uoc3R5bGVzTWFwKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBDb25maWcsIEluamVjdG9yIH0gZnJvbSBcIm1pbmRpX3YxXCI7XHJcbmltcG9ydCB7IFN0eWxlc1JlZ2lzdHJ5IH0gZnJvbSBcIi4uL3N0eWxlcy9zdHlsZXNSZWdpc3RyeS5qc1wiO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVJlZ2lzdHJ5IH0gZnJvbSBcIi4uL3RlbXBsYXRlL3RlbXBsYXRlUmVnaXN0cnkuanNcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVzTG9hZGVyIH0gZnJvbSBcIi4uL3RlbXBsYXRlL3RlbXBsYXRlc0xvYWRlci5qc1wiO1xyXG5pbXBvcnQgeyBTdHlsZXNMb2FkZXIgfSBmcm9tIFwiLi4vc3R5bGVzL3N0eWxlc0xvYWRlci5qc1wiO1xyXG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJDb21wb25lbnRDb25maWdQcm9jZXNzb3JcIilcclxuXHJcbi8qKlxyXG4gKiBNaW5kaSBjb25maWcgcHJvY2Vzc29yIHdoaWNoIGxvYWRzIGFsbCB0ZW1wbGF0ZXMgYW5kIHN0eWxlcyBmb3IgYWxsIGNvbmZpZ3VyZWQgY29tcG9uZW50c1xyXG4gKiBhbmQgdGhlbiBjYWxscyBhbnkgZXhpc3RpbmcgY29tcG9uZW50TG9hZGVkIGZ1bmN0aW9uIG9uIGVhY2ggY29tcG9uZW50XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50Q29uZmlnUHJvY2Vzc29yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1RlbXBsYXRlUmVnaXN0cnl9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5ID0gVGVtcGxhdGVSZWdpc3RyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0eWxlc1JlZ2lzdHJ5fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc3R5bGVzUmVnaXN0cnkgPSBTdHlsZXNSZWdpc3RyeTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7aW5qZWN0b3J9IGluamVjdG9yIFxyXG4gICAgICovXHJcbiAgICBwb3N0SW5qZWN0KGluamVjdG9yKXtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlc0xvYWRlciA9IG5ldyBUZW1wbGF0ZXNMb2FkZXIodGhpcy50ZW1wbGF0ZVJlZ2lzdHJ5KTtcclxuICAgICAgICB0aGlzLnN0eWxlc0xvYWRlciA9IG5ldyBTdHlsZXNMb2FkZXIodGhpcy5zdHlsZXNSZWdpc3RyeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Q29uZmlnfSBjb25maWcgXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAqL1xyXG4gICAgcHJvY2Vzc0NvbmZpZyhjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICAgIFsgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlc0xvYWRlci5sb2FkKGNvbmZpZyksIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXNMb2FkZXIubG9hZChjb25maWcpIFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBNYXAgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBVbmlxdWVJZFJlZ2lzdHJ5IHtcclxuXHJcbiAgICBpZEF0dHJpYnV0ZVdpdGhTdWZmaXggKGlkKSB7XHJcbiAgICAgICAgaWYoaWROYW1lcy5jb250YWlucyhpZCkpIHtcclxuICAgICAgICAgICAgdmFyIG51bWJlciA9IGlkTmFtZXMuZ2V0KGlkKTtcclxuICAgICAgICAgICAgaWROYW1lcy5zZXQoaWQsbnVtYmVyKzEpO1xyXG4gICAgICAgICAgICByZXR1cm4gaWQgKyBcIi1cIiArIG51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWROYW1lcy5zZXQoaWQsMSk7XHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxudmFyIGlkTmFtZXMgPSBuZXcgTWFwKCk7IiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXG5pbXBvcnQgeyBFbGVtZW50TWFwcGVyIH0gZnJvbSBcIi4uL2VsZW1lbnQvZWxlbWVudE1hcHBlci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgRXZlbnR7XG5cbiAgICBjb25zdHJ1Y3RvcihldmVudCl7XG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgICAgICAgaWYodGhpcy5ldmVudC50eXBlLnRvTG93ZXJDYXNlKCkgPT0gXCJkcmFnc3RhcnRcIil7XG4gICAgICAgICAgICB0aGlzLmV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmV2ZW50RGVmYXVsdCgpe1xuICAgICAgICB0aGlzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGV2ZW50IGFuZCB0aGUgZWRnZSB4IGNvb3JkaW5hdGUgb2YgdGhlIGNvbnRhaW5pbmcgb2JqZWN0XG4gICAgICovXG4gICAgZ2V0T2Zmc2V0WCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudC5vZmZzZXRYO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBldmVudCBhbmQgdGhlIGVkZ2UgeSBjb29yZGluYXRlIG9mIHRoZSBjb250YWluaW5nIG9iamVjdFxuICAgICAqL1xuICAgIGdldE9mZnNldFkoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQub2Zmc2V0WTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbW91c2UgeCBjb29yZGluYXRlIG9mIHRoZSBldmVudCByZWxhdGl2ZSB0byB0aGUgY2xpZW50IHdpbmRvdyB2aWV3XG4gICAgICovXG4gICAgZ2V0Q2xpZW50WCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudC5jbGllbnRYO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBtb3VzZSB5IGNvb3JkaW5hdGUgb2YgdGhlIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSBjbGllbnQgd2luZG93IHZpZXdcbiAgICAgKi9cbiAgICBnZXRDbGllbnRZKCl7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50LmNsaWVudFk7XG4gICAgfVxuXG4gICAgZ2V0VGFyZ2V0KCl7XG4gICAgICAgIHJldHVybiBFbGVtZW50TWFwcGVyLm1hcCh0aGlzLmV2ZW50LnRhcmdldCk7XG4gICAgfVxuXG4gICAgZ2V0S2V5Q29kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQua2V5Q29kZTtcbiAgICB9XG5cbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuaW1wb3J0IHtMaXN0LE1hcCxPYmplY3RGdW5jdGlvbiwgTG9nZ2VyfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcbmltcG9ydCB7RXZlbnR9IGZyb20gXCIuL2V2ZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlRWxlbWVudCB9IGZyb20gXCIuLi9lbGVtZW50L2Jhc2VFbGVtZW50LmpzXCI7XG5cbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJFdmVudFJlZ2lzdHJ5XCIpO1xuXG5leHBvcnQgY2xhc3MgRXZlbnRSZWdpc3RyeSB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuYmVmb3JlTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmFmdGVyTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggaXMgdGhlIHNvdXJjZSBvZiB0aGUgZXZlbnQgYW5kIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0b1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgdGhlIGV2ZW50IHR5cGUgYXMgaXQgaXMgZGVmaW5lZCBieSB0aGUgY29udGFpbmluZyB0cmlnZ2VyIChleGFtcGxlIFwib25jbGlja1wiKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUgYXMgaXQgd2lsbCBiZSByZWZlcnJlZCB0byBpbiB0aGUgRXZlbnRSZWdpc3RyeSAoZXhhbXBsZSBcIi8vZXZlbnQ6Y2xpY2tlZFwiKVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRJbmRleCB1bmlxdWUgaWQgb2YgdGhlIGNvbXBvbmVudCB3aGljaCBvd25zIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgYXR0YWNoKGVsZW1lbnQsIGV2ZW50VHlwZSwgZXZlbnROYW1lLCBjb21wb25lbnRJbmRleCkge1xuICAgICAgICB2YXIgdW5pcXVlRXZlbnROYW1lID0gZXZlbnROYW1lICsgXCJfXCIgKyBjb21wb25lbnRJbmRleDtcbiAgICAgICAgdmFyIHRoZUV2ZW50UmVnaXN0cnkgPSB0aGlzO1xuICAgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KGV2ZW50VHlwZSwgZnVuY3Rpb24oZXZlbnQpIHsgdGhlRXZlbnRSZWdpc3RyeS50cmlnZ2VyKHVuaXF1ZUV2ZW50TmFtZSwgZXZlbnROYW1lLCBldmVudCk7IH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgdGhlIGV2ZW50IG5hbWUgYXMgaXQgd2lsbCBiZSByZWZlcnJlZCB0byBpbiB0aGUgRXZlbnRSZWdpc3RyeSAoZXhhbXBsZSBcIi8vZXZlbnQ6Y2xpY2tlZFwiKVxuICAgICAqIEBwYXJhbSB7T2JqZWN0RnVuY3Rpb259IGxpc3RlbmVyIHRoZSBvYmplY3Qgd2hpY2ggb3ducyB0aGUgaGFuZGxlciBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bmlxdWVJbmRleCBhIHVuaXF1ZSBpbmRleCBmb3IgdGhlIGV2ZW50XG4gICAgICovXG4gICAgbGlzdGVuKGV2ZW50TmFtZSwgb2JqZWN0RnVuY3Rpb24sIHVuaXF1ZUluZGV4KSB7XG4gICAgICAgIGV2ZW50TmFtZSA9IGV2ZW50TmFtZSArIFwiX1wiICsgdW5pcXVlSW5kZXg7XG4gICAgICAgIGlmKCF0aGlzLmxpc3RlbmVycy5leGlzdHMoZXZlbnROYW1lKSl7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5zZXQoZXZlbnROYW1lLG5ldyBMaXN0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmdldChldmVudE5hbWUpLmFkZChvYmplY3RGdW5jdGlvbik7XG4gICAgfVxuXG4gICAgbGlzdGVuQmVmb3JlKGV2ZW50TmFtZSxoYW5kbGVyT2JqZWN0LGhhbmRsZXJGdW5jdGlvbikge1xuICAgICAgICBpZighdGhpcy5iZWZvcmVMaXN0ZW5lcnMuZXhpc3RzKGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlTGlzdGVuZXJzLnNldChldmVudE5hbWUsbmV3IExpc3QoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9iamVjdEZ1bmN0aW9uID0gbmV3IE9iamVjdEZ1bmN0aW9uKGhhbmRsZXJPYmplY3QsaGFuZGxlckZ1bmN0aW9uKTtcbiAgICAgICAgdGhpcy5iZWZvcmVMaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSkuYWRkKG9iamVjdEZ1bmN0aW9uKTtcbiAgICB9XG5cbiAgICBsaXN0ZW5BZnRlcihldmVudE5hbWUsaGFuZGxlck9iamVjdCxoYW5kbGVyRnVuY3Rpb24pIHtcbiAgICAgICAgaWYoIXRoaXMuYWZ0ZXJMaXN0ZW5lcnMuZXhpc3RzKGV2ZW50TmFtZSkpe1xuICAgICAgICAgICAgdGhpcy5hZnRlckxpc3RlbmVycy5zZXQoZXZlbnROYW1lLG5ldyBMaXN0KCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWZ0ZXJMaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSkuYWRkKG5ldyBPYmplY3RGdW5jdGlvbihoYW5kbGVyT2JqZWN0LGhhbmRsZXJGdW5jdGlvbikpO1xuICAgIH1cblxuICAgIHRyaWdnZXIoc3VmZml4ZWRFdmVudE5hbWUsIGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVCZWZvcmUoZXZlbnROYW1lLCBldmVudCk7XG4gICAgICAgIGlmKHRoaXMubGlzdGVuZXJzLmV4aXN0cyhzdWZmaXhlZEV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50TGlzdGVuZXJzID0gbmV3IExpc3QoKTtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLmdldChzdWZmaXhlZEV2ZW50TmFtZSkuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgcGFyZW50KXtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LHRoaXMpO1xuICAgICAgICAgICAgY3VycmVudExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBwYXJlbnQpe1xuICAgICAgICAgICAgICAgIHZhbHVlLmNhbGwobmV3IEV2ZW50KGV2ZW50KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9LHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlQWZ0ZXIoZXZlbnROYW1lLCBldmVudCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQmVmb3JlKGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVHbG9iYWwodGhpcy5iZWZvcmVMaXN0ZW5lcnMsZXZlbnROYW1lLCBldmVudCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQWZ0ZXIoZXZlbnROYW1lLCBldmVudCkge1xuICAgICAgICB0aGlzLmhhbmRsZUdsb2JhbCh0aGlzLmFmdGVyTGlzdGVuZXJzLGV2ZW50TmFtZSwgZXZlbnQpO1xuICAgIH1cblxuICAgIGhhbmRsZUdsb2JhbChsaXN0ZW5lcnMsIGV2ZW50TmFtZSwgZXZlbnQpIHtcbiAgICAgICAgaWYobGlzdGVuZXJzLmV4aXN0cyhldmVudE5hbWUpKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudExpc3RlbmVycyA9IG5ldyBMaXN0KCk7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuZ2V0KGV2ZW50TmFtZSkuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSxwYXJlbnQpe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMaXN0ZW5lcnMuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sdGhpcyk7XG4gICAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUscGFyZW50KXtcbiAgICAgICAgICAgICAgICB2YWx1ZS5jYWxsKG5ldyBFdmVudChldmVudCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSx0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IE1hcCwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IFhtbEVsZW1lbnQgfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XHJcbmltcG9ydCB7IEVsZW1lbnRNYXBwZXIgfSBmcm9tIFwiLi4vZWxlbWVudC9lbGVtZW50TWFwcGVyXCI7XHJcbmltcG9ydCB7IEJhc2VFbGVtZW50IH0gZnJvbSBcIi4uL2VsZW1lbnQvYmFzZUVsZW1lbnRcIjtcclxuaW1wb3J0IHsgRXZlbnRSZWdpc3RyeSB9IGZyb20gXCIuLi9ldmVudC9ldmVudFJlZ2lzdHJ5XCI7XHJcblxyXG4vKipcclxuICogQ29sbGVjdHMgaW5mb3JtYXRpb24gd2hlbiBlbGVtZW50cyBhcmUgY3JlYXRlZCBhbmQgZmluZHMgdGhlIHJvb3QgZWxlbWVudCwgY3JlYXRlcyBtYXAgb2YgZWxlbWVudHMgXHJcbiAqIGFuZCByZWdpc3RlcnMgZXZlbnRzIGluIHRoZSBldmVudFJlZ2lzdHJ5XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRWxlbWVudFJlZ2lzdHJhdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihldmVudFJlZ2lzdHJ5LCB1bmlxdWVJZFJlZ2lzdHJ5LCBjb21wb25lbnRJbmRleCkge1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50SW5kZXggPSBjb21wb25lbnRJbmRleDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtNYXB9ICovXHJcbiAgICAgICAgdGhpcy51bmlxdWVJZFJlZ2lzdHJ5ID0gdW5pcXVlSWRSZWdpc3RyeTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtFdmVudFJlZ2lzdHJ5fSAqL1xyXG4gICAgICAgIHRoaXMuZXZlbnRSZWdpc3RyeSA9IGV2ZW50UmVnaXN0cnk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7QmFzZUVsZW1lbnR9ICovXHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudE1hcCA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSb290RWxlbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFbGVtZW50TWFwKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRNYXA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29tcG9uZW50SW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50SW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMaXN0ZW5zIHRvIGVsZW1lbnRzIGJlaW5nIGNyZWF0ZWQsIGFuZCB0YWtlcyBpbm4gdGhlIGNyZWF0ZWQgWG1sRWxlbWVudCBhbmQgaXRzIHBhcmVudCBYbWxFbGVtZW50XHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7WG1sRWxlbWVudH0geG1sRWxlbWVudCBcclxuICAgICAqIEBwYXJhbSB7QmFzZUVsZW1lbnR9IHBhcmVudFdyYXBwZXIgXHJcbiAgICAgKi9cclxuICAgIGVsZW1lbnRDcmVhdGVkICh4bWxFbGVtZW50LCBwYXJlbnRXcmFwcGVyKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBFbGVtZW50TWFwcGVyLm1hcCh4bWxFbGVtZW50LCBwYXJlbnRXcmFwcGVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRUb0VsZW1lbnRJZE1hcChlbGVtZW50KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRWxlbWVudEV2ZW50cyhlbGVtZW50KTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5yb290RWxlbWVudCA9PT0gbnVsbCAmJiBlbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm9vdEVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJFbGVtZW50RXZlbnRzKGVsZW1lbnQpe1xyXG4gICAgICAgIGlmKGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8ICEoZWxlbWVudCBpbnN0YW5jZW9mIEJhc2VFbGVtZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBldmVudFJlZ2lzdHJ5ID0gdGhpcy5ldmVudFJlZ2lzdHJ5O1xyXG4gICAgICAgIHZhciBjb21wb25lbnRJbmRleCA9IHRoaXMuY29tcG9uZW50SW5kZXg7XHJcbiAgICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGVzKCkuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlS2V5LGF0dHJpYnV0ZSxwYXJlbnQpe1xyXG4gICAgICAgICAgICBpZihhdHRyaWJ1dGUgIT09IG51bGwgJiYgYXR0cmlidXRlICE9PSB1bmRlZmluZWQgJiYgYXR0cmlidXRlLmdldFZhbHVlKCkuc3RhcnRzV2l0aChcIi8vZXZlbnQ6XCIpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gYXR0cmlidXRlLmdldFZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRUeXBlID0gYXR0cmlidXRlLmdldE5hbWUoKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50UmVnaXN0cnkuYXR0YWNoKGVsZW1lbnQsZXZlbnRUeXBlLGV2ZW50TmFtZSxjb21wb25lbnRJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7ICAgICAgICAgXHJcbiAgICAgICAgfSx0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRUb0VsZW1lbnRJZE1hcChlbGVtZW50KSB7XHJcbiAgICAgICAgaWYoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSB1bmRlZmluZWQgfHwgIShlbGVtZW50IGluc3RhbmNlb2YgQmFzZUVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlkID0gbnVsbDtcclxuICAgICAgICBpZihlbGVtZW50LmNvbnRhaW5zQXR0cmlidXRlKFwiaWRcIikpIHtcclxuICAgICAgICAgICAgaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZVZhbHVlKFwiaWRcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlVmFsdWUoXCJpZFwiLHRoaXMudW5pcXVlSWRSZWdpc3RyeS5pZEF0dHJpYnV0ZVdpdGhTdWZmaXgoaWQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGlkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudE1hcC5zZXQoaWQsZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50XCI7XHJcbmltcG9ydCB7IFVuaXF1ZUlkUmVnaXN0cnkgfSBmcm9tIFwiLi91bmlxdWVJZFJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7IEVsZW1lbnRSZWdpc3RyYXRvciB9IGZyb20gXCIuL2VsZW1lbnRSZWdpc3RyYXRvclwiO1xyXG5pbXBvcnQgeyBFdmVudFJlZ2lzdHJ5IH0gZnJvbSBcIi4uL2V2ZW50L2V2ZW50UmVnaXN0cnlcIjtcclxuaW1wb3J0IHsgVGVtcGxhdGVSZWdpc3RyeSB9IGZyb20gXCIuLi90ZW1wbGF0ZS90ZW1wbGF0ZVJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7IERvbVRyZWUgfSBmcm9tIFwieG1scGFyc2VyX3YxXCI7XHJcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBTdHlsZXNSZWdpc3RyeSB9IGZyb20gXCIuLi9zdHlsZXMvc3R5bGVzUmVnaXN0cnlcIjtcclxuaW1wb3J0IHsgQ2FudmFzU3R5bGVzIH0gZnJvbSBcIi4uL2NhbnZhcy9jYW52YXNTdHlsZXNcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJDb21wb25lbnRGYWN0b3J5XCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbXBvbmVudEZhY3Rvcnkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge0V2ZW50UmVnaXN0cnl9ICovXHJcbiAgICAgICAgdGhpcy5ldmVudFJlZ2lzdHJ5ID0gRXZlbnRSZWdpc3RyeTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtTdHlsZXNSZWdpc3RyeX0gKi9cclxuICAgICAgICB0aGlzLnN0eWxlc1JlZ2lzdHJ5ID0gU3R5bGVzUmVnaXN0cnk7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7VGVtcGxhdGVSZWdpc3RyeX0gKi9cclxuICAgICAgICB0aGlzLnRlbXBsYXRlUmVnaXN0cnkgPSBUZW1wbGF0ZVJlZ2lzdHJ5O1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge1VuaXF1ZUlkUmVnaXN0cnl9ICovXHJcbiAgICAgICAgdGhpcy51bmlxdWVJZFJlZ2lzdHJ5ID0gVW5pcXVlSWRSZWdpc3RyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgcmVwcmVzZW50cyB0aGUgdGVtcGxhdGUgYW5kIHRoZSBzdHlsZXMgbmFtZSBpZiB0aGUgc3R5bGUgZm9yIHRoYXQgbmFtZSBpcyBhdmFpbGFibGVcclxuICAgICAqL1xyXG4gICAgY3JlYXRlKG5hbWUpe1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVSZWdpc3RyeS5nZXQobmFtZSk7XHJcbiAgICAgICAgaWYoIXRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIExPRy5lcnJvcih0aGlzLnRlbXBsYXRlUmVnaXN0cnkpO1xyXG4gICAgICAgICAgICB0aHJvdyBcIk5vIHRlbXBsYXRlIHdhcyBmb3VuZCB3aXRoIG5hbWUgXCIgKyBuYW1lO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVsZW1lbnRSZWdpc3RyYXRvciA9IG5ldyBFbGVtZW50UmVnaXN0cmF0b3IodGhpcy5ldmVudFJlZ2lzdHJ5LCB0aGlzLnVuaXF1ZUlkUmVnaXN0cnksIGNvbXBvbmVudENvdW50ZXIrKyk7XHJcbiAgICAgICAgbmV3IERvbVRyZWUodGVtcGxhdGUuZ2V0VGVtcGxhdGVTb3VyY2UoKSxlbGVtZW50UmVnaXN0cmF0b3IpLmxvYWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VudFN0eWxlcyhuYW1lKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb25lbnQoZWxlbWVudFJlZ2lzdHJhdG9yLmdldENvbXBvbmVudEluZGV4KCksIGVsZW1lbnRSZWdpc3RyYXRvci5nZXRSb290RWxlbWVudCgpLCBlbGVtZW50UmVnaXN0cmF0b3IuZ2V0RWxlbWVudE1hcCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3VudFN0eWxlcyhuYW1lKSB7XHJcbiAgICAgICAgaWYodGhpcy5zdHlsZXNSZWdpc3RyeS5jb250YWlucyhuYW1lKSkge1xyXG4gICAgICAgICAgICBDYW52YXNTdHlsZXMuc2V0U3R5bGUobmFtZSwgdGhpcy5zdHlsZXNSZWdpc3RyeS5nZXQobmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbnZhciBjb21wb25lbnRDb3VudGVyID0gMDsiLCJpbXBvcnQgeyBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJDb21wb25lbnRJbnN0YW5jZVByb2Nlc3NvclwiKTtcclxuXHJcbi8qKlxyXG4gKiBJbnN0YW5jZSB3aGljaCBjYWxscyBjcmVhdGVDb21wb25lbnQgb24gY29tcG9uZW50cyBhZnRlciBjb25maWdQcm9jZXNzb3IgaXMgZmluaXNoZWRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21wb25lbnRJbnN0YW5jZVByb2Nlc3NvciB7XHJcblxyXG4gICAgcHJvY2Vzc0luc3RhbmNlKGluc3RhbmNlKSB7XHJcbiAgICAgICAgaWYoaW5zdGFuY2UuY3JlYXRlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmNyZWF0ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgQWJzdHJhY3REYXRhQmluZGluZyB7XHJcblxyXG4gICAgcHVsbCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVzaCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgTGlzdCB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xuaW1wb3J0IHsgQWJzdHJhY3REYXRhQmluZGluZyB9IGZyb20gXCIuL2Fic3RyYWN0RGF0YUJpbmRpbmcuanNcIjtcblxuZXhwb3J0IGNsYXNzIERhdGFCaW5kUmVnaXN0cnkge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZGF0YUJpbmRpbmdMaXN0ID0gbmV3IExpc3QoKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiBpbnB1dHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtBYnN0cmFjdERhdGFCaW5kaW5nfSBkYXRhQmluZGluZyBcbiAgICAgKi9cbiAgICBhZGQoZGF0YUJpbmRpbmcpIHtcbiAgICAgICAgdGhpcy5kYXRhQmluZGluZ0xpc3QuYWRkKGRhdGFCaW5kaW5nKTtcbiAgICB9XG5cbiAgICBwdWxsQWxsKCkge1xuICAgICAgICB0aGlzLmRhdGFCaW5kaW5nTGlzdC5mb3JFYWNoKChtYXBwaW5nKSA9PiB7XG4gICAgICAgICAgICBtYXBwaW5nLnB1bGwoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG5cbiAgICBwdXNoQWxsKCkge1xuICAgICAgICB0aGlzLmRhdGFCaW5kaW5nTGlzdC5mb3JFYWNoKChtYXBwaW5nKSA9PiB7XG4gICAgICAgICAgICBtYXBwaW5nLnB1c2goKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9XG59XG5cbnZhciBpbnB1dHMgPSBuZXcgRGF0YUJpbmRSZWdpc3RyeSgpO1xuIiwiaW1wb3J0IHsgUHJvcGVydHlBY2Nlc3NvciwgTGlzdCB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xuaW1wb3J0IHsgQWJzdHJhY3RJbnB1dEVsZW1lbnQgfSBmcm9tIFwiLi4vZWxlbWVudC9hYnN0cmFjdElucHV0RWxlbWVudFwiO1xuXG5leHBvcnQgY2xhc3MgSW5wdXRFbGVtZW50RGF0YUJpbmRpbmcge1xuXG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZhbGlkYXRvcikge1xuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMudmFsaWRhdG9yID0gdmFsaWRhdG9yO1xuICAgICAgICB0aGlzLnB1bGxlcnMgPSBuZXcgTGlzdCgpO1xuICAgICAgICB0aGlzLnB1c2hlcnMgPSBuZXcgTGlzdCgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBsaW5rKG1vZGVsLCB2YWxpZGF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnB1dEVsZW1lbnREYXRhQmluZGluZyhtb2RlbCwgdmFsaWRhdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0SW5wdXRFbGVtZW50fSBmaWVsZCBcbiAgICAgKi9cbiAgICBhbmQoZmllbGQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG8oZmllbGQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7QWJzdHJhY3RJbnB1dEVsZW1lbnR9IGZpZWxkIFxuICAgICAqL1xuICAgIHRvKGZpZWxkKSB7XG4gICAgICAgIHZhciBwdWxsZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmllbGQuZ2V0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBQcm9wZXJ0eUFjY2Vzc29yLnNldFZhbHVlKHRoaXMubW9kZWwsIGZpZWxkLmdldE5hbWUoKSwgZmllbGQuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0aGlzLnZhbGlkYXRvciAmJiB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZSl7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0b3IudmFsaWRhdGUoZmllbGQuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZpZWxkLmF0dGFjaEV2ZW50KFwib25jaGFuZ2VcIiwgcHVsbGVyKTtcbiAgICAgICAgZmllbGQuYXR0YWNoRXZlbnQoXCJvbmtleXVwXCIsIHB1bGxlcik7XG4gICAgICAgIHB1bGxlci5jYWxsKCk7XG5cbiAgICAgICAgdmFyIHB1c2hlciA9ICgpID0+IHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IFByb3BlcnR5QWNjZXNzb3IuZ2V0VmFsdWUodGhpcy5tb2RlbCwgZmllbGQuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIGlmIChmaWVsZC5zZXRDaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgZmllbGQuc2V0Q2hlY2tlZCh2YWx1ZSA9PSBmaWVsZC5nZXRWYWx1ZSgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGQuc2V0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmaWVsZC5zZXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmKCF0aGlzLm1vZGVsLl9fY2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5tb2RlbC5fX2NoYW5nZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnB1bGxlcnMuYWRkKHB1bGxlcik7XG4gICAgICAgIHRoaXMucHVzaGVycy5hZGQocHVzaGVyKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWxsKCkge1xuICAgICAgICB0aGlzLnB1bGxlcnMuZm9yRWFjaCgodmFsdWUsIHBhcmVudCkgPT4ge1xuICAgICAgICAgICAgdmFsdWUuY2FsbChwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIHB1c2goKSB7XG4gICAgICAgIHRoaXMucHVzaGVycy5mb3JFYWNoKCh2YWx1ZSwgcGFyZW50KSA9PiB7XG4gICAgICAgICAgICB2YWx1ZS5jYWxsKHBhcmVudCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFByb3h5T2JqZWN0RmFjdG9yeSB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcHJveHkgZm9yIGFuIG9iamVjdCB3aGljaCBhbGxvd3MgZGF0YWJpbmRpbmcgZnJvbSB0aGUgb2JqZWN0IHRvIHRoZSBmb3JtIGVsZW1lbnRcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWF0ZVByb3h5T2JqZWN0KG9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkob2JqZWN0LCB7XHJcbiAgICAgICAgICAgIHNldDogKHRhcmdldCwgcHJvcCwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBzdWNjZXNzID0gKHRhcmdldFtwcm9wXSA9IHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmKHRhcmdldC5fX2NoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuX19jaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzcyA9PT0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBVcmwgfSBmcm9tIFwiLi4vdXRpbC91cmxcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIaXN0b3J5IHtcclxuXHJcbiAgICBzdGF0aWMgcHVzaFVybCh1cmwsdGl0bGUsc3RhdGVPYmplY3QpIHtcclxuICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoc3RhdGVPYmplY3QsIHRpdGxlLCB1cmwudG9TdHJpbmcoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFVybCgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFVybCh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGxvYWRVcmwodXJsKSB7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uID0gdXJsLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0hpc3Rvcnl9IGZyb20gXCIuLi9uYXZpZ2F0aW9uL2hpc3RvcnkuanNcIjtcclxuaW1wb3J0IHtNYXB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0YXRlIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZUxpc3RlbmVyTWFwID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlY29yZFN0YXRlKG5ld1BhdGgpIHtcclxuICAgICAgICB2YXIgdXJsID0gSGlzdG9yeS5nZXRVcmwoKTtcclxuICAgICAgICAvLyBQdXNoIGN1cnJlbnQgdXJsIHRvIGJyb3dzZXIgaGlzdG9yeVxyXG4gICAgICAgIGlmKCEodXJsLmdldFBhdGgoMCkgPT09IG5ld1BhdGgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VXJsKHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBhIG5ldyBzdGF0ZVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gdXJsIFxyXG4gICAgICovXHJcbiAgICBzZXRVcmwodXJsKSB7XHJcbiAgICAgICAgSGlzdG9yeS5wdXNoVXJsKHVybCxcIlwiLHt9KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbmZpZyB9IGZyb20gXCJtaW5kaV92MVwiO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVJlZ2lzdHJ5IH0gZnJvbSBcIi4vdGVtcGxhdGUvdGVtcGxhdGVSZWdpc3RyeS5qc1wiO1xyXG5pbXBvcnQgeyBFdmVudFJlZ2lzdHJ5IH0gZnJvbSBcIi4vZXZlbnQvZXZlbnRSZWdpc3RyeS5qc1wiO1xyXG5pbXBvcnQgeyBVbmlxdWVJZFJlZ2lzdHJ5IH0gZnJvbSBcIi4vY29tcG9uZW50L3VuaXF1ZUlkUmVnaXN0cnkuanNcIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50RmFjdG9yeSB9IGZyb20gXCIuL2NvbXBvbmVudC9jb21wb25lbnRGYWN0b3J5LmpzXCI7XHJcbmltcG9ydCB7IERhdGFCaW5kUmVnaXN0cnkgfSBmcm9tIFwiLi9kYXRhQmluZC9kYXRhQmluZFJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSBcIi4vbmF2aWdhdGlvbi9zdGF0ZS5qc1wiO1xyXG5pbXBvcnQgeyBTdHlsZXNSZWdpc3RyeSB9IGZyb20gXCIuL3N0eWxlcy9zdHlsZXNSZWdpc3RyeS5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEp1c3RyaWdodENvbmZpZyB7XHJcblxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xyXG4gICAgICAgIGlmKGp1c3RyaWdodENvbmZpZyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBqdXN0cmlnaHRDb25maWcgPSBuZXcgSnVzdHJpZ2h0Q29uZmlnKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBqdXN0cmlnaHRDb25maWc7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgQ29uZmlnKClcclxuICAgICAgICAgICAgLmFkZFNpbmdsZXRvbihUZW1wbGF0ZVJlZ2lzdHJ5KVxyXG4gICAgICAgICAgICAuYWRkU2luZ2xldG9uKFN0eWxlc1JlZ2lzdHJ5KVxyXG4gICAgICAgICAgICAuYWRkU2luZ2xldG9uKEV2ZW50UmVnaXN0cnkpXHJcbiAgICAgICAgICAgIC5hZGRTaW5nbGV0b24oVW5pcXVlSWRSZWdpc3RyeSlcclxuICAgICAgICAgICAgLmFkZFNpbmdsZXRvbihDb21wb25lbnRGYWN0b3J5KVxyXG4gICAgICAgICAgICAuYWRkU2luZ2xldG9uKERhdGFCaW5kUmVnaXN0cnkpXHJcbiAgICAgICAgICAgIC5hZGRTaW5nbGV0b24oU3RhdGUpXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29uZmlnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbnZhciBqdXN0cmlnaHRDb25maWcgPSBudWxsOyIsImltcG9ydCB7IENvbnRhaW5lckJyaWRnZSB9IGZyb20gXCIuLi9icmlkZ2UvY29udGFpbmVyQnJpZGdlLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwbGljYXRpb25TdG9yYWdlIHtcclxuICAgIFxyXG4gICAgc3RhdGljIHNldExvY2FsQXR0cmlidXRlKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBDb250YWluZXJCcmlkZ2Uuc2V0TG9jYWxBdHRyaWJ1dGUoa2V5LHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0TG9jYWxBdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5nZXRMb2NhbEF0dHJpYnV0ZShrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBoYXNMb2NhbEF0dHJpYnV0ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gQ29udGFpbmVyQnJpZGdlLmhhc0xvY2FsQXR0cmlidXRlKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZUxvY2FsQXR0cmlidXRlKGtleSkge1xyXG4gICAgICAgIHJldHVybiBDb250YWluZXJCcmlkZ2UucmVtb3ZlTG9jYWxBdHRyaWJ1dGUoa2V5KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbnRhaW5lckJyaWRnZSB9IGZyb20gXCIuLi9icmlkZ2UvY29udGFpbmVyQnJpZGdlLmpzXCJcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXNzaW9uU3RvcmFnZSB7XHJcblxyXG4gICAgc3RhdGljIHNldFNlc3Npb25BdHRyaWJ1dGUoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIENvbnRhaW5lckJyaWRnZS5zZXRTZXNzaW9uQXR0cmlidXRlKGtleSx2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGhhc1Nlc3Npb25BdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5oYXNTZXNzaW9uQXR0cmlidXRlKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFNlc3Npb25BdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5nZXRTZXNzaW9uQXR0cmlidXRlKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZVNlc3Npb25BdHRyaWJ1dGUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIENvbnRhaW5lckJyaWRnZS5yZW1vdmVTZXNzaW9uQXR0cmlidXRlKGtleSk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgT2JqZWN0RnVuY3Rpb24gfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIdHRwUmVzcG9uc2VIYW5kbGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvZGUgXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdEZ1bmN0aW9ufSBvYmplY3RGdW5jdGlvbiBcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1hcHBlckZ1bmN0aW9uIFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihjb2RlLCBvYmplY3RGdW5jdGlvbiwgbWFwcGVyRnVuY3Rpb24pIHtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMub2JqZWN0RnVuY3Rpb24gPSBvYmplY3RGdW5jdGlvbjtcclxuICAgICAgICB0aGlzLm1hcHBlckZ1bmN0aW9uID0gbWFwcGVyRnVuY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBnZXRDb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0RnVuY3Rpb259XHJcbiAgICAgKi9cclxuICAgIGdldE9iamVjdEZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdEZ1bmN0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyB7Y2xhc3N9XHJcbiAgICAgKi9cclxuICAgIGdldE1hcHBlckZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcHBlckZ1bmN0aW9uO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IE1hcCwgT2JqZWN0RnVuY3Rpb24sIE9iamVjdE1hcHBlciwgTG9nZ2VyIH0gZnJvbSBcImNvcmV1dGlsX3YxXCI7XHJcbmltcG9ydCB7IEh0dHBSZXNwb25zZUhhbmRsZXIgfSBmcm9tIFwiLi9odHRwUmVzcG9uc2VIYW5kbGVyXCI7XHJcbmltcG9ydCB7IENsaWVudCB9IGZyb20gXCIuLi9jbGllbnQvY2xpZW50LmpzXCI7XHJcblxyXG5jb25zdCBMT0cgPSBuZXcgTG9nZ2VyKFwiSHR0cENhbGxCdWlsZGVyXCIpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEh0dHBDYWxsQnVpbGRlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1ldGVyIFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih1cmwsIHBhcmFtdGVyKSB7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7U3RyaW5nfSAqL1xyXG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge09iamVjdH0gKi9cclxuICAgICAgICB0aGlzLnBhcmFtdGVyID0gcGFyYW10ZXI7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7TWFwfSAqL1xyXG4gICAgICAgIHRoaXMuaHR0cENhbGxiYWNrTWFwID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge09iamVjdEZ1bmN0aW9ufSAqL1xyXG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Q2xpZW50fSBjbGllbnQgXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtZXRlciBcclxuICAgICAqIEByZXR1cm5zIHtIdHRwQ2FsbEJ1aWxkZXJ9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBuZXdJbnN0YW5jZShjbGllbnQsIHVybCwgcGFyYW1ldGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBIdHRwQ2FsbEJ1aWxkZXIoY2xpZW50LCB1cmwsIHBhcmFtZXRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9iamVjdCBcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWFwcGVyRnVuY3Rpb24gbWFwcGVyIGZ1bmN0aW9uIHRvIHBhc3MgdGhlIHJlc3VsdCBvYmplY3QgdG9cclxuICAgICAqL1xyXG4gICAgcmVzcG9uc2VNYXBwaW5nKGNvZGUsIG9iamVjdCwgY2FsbGJhY2ssIG1hcHBlckZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5odHRwQ2FsbGJhY2tNYXAuc2V0KGNvZGUsIG5ldyBIdHRwUmVzcG9uc2VIYW5kbGVyKGNvZGUsIG5ldyBPYmplY3RGdW5jdGlvbihvYmplY3QsIGNhbGxiYWNrKSwgbWFwcGVyRnVuY3Rpb24pKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IG9iamVjdCBcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIFxyXG4gICAgICovXHJcbiAgICBlcnJvck1hcHBpbmcob2JqZWN0LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmKG9iamVjdCAmJiBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2sgPSBuZXcgT2JqZWN0RnVuY3Rpb24ob2JqZWN0LCBjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCgpIHtcclxuICAgICAgICBDbGllbnQuZ2V0KHRoaXMudXJsKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0Vycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwb3N0KCkge1xyXG4gICAgICAgIENsaWVudC5wb3N0KHRoaXMudXJsLCB0aGlzLnBhcmFtdGVyKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0Vycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdXQoKSB7XHJcbiAgICAgICAgQ2xpZW50LnB1dCh0aGlzLnVybCwgdGhpcy5wYXJhbXRlcikudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF0Y2goKSB7XHJcbiAgICAgICAgQ2xpZW50LnBhdGNoKHRoaXMudXJsLCB0aGlzLnBhcmFtdGVyKS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0Vycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgQ2xpZW50LmRlbGV0ZSh0aGlzLnVybCkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2Vzc0Vycm9yKGVycm9yKSB7XHJcbiAgICAgICAgTE9HLmVycm9yKGVycm9yKTtcclxuICAgICAgICBpZih0aGlzLmVycm9yQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrLmNhbGwoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtSZXNwb25zZX0gcmVzcG9uc2UgXHJcbiAgICAgKi9cclxuICAgIHByb2Nlc3NSZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7SHR0cFJlc3BvbnNlSGFuZGxlcn0gKi9cclxuICAgICAgICB2YXIgcmVzcG9uc2VIYW5kbGVyID0gdGhpcy5odHRwQ2FsbGJhY2tNYXAuZ2V0KHJlc3BvbnNlLnN0YXR1cyk7XHJcbiAgICAgICAgaWYocmVzcG9uc2VIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgKG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXBwZXJGdW5jdGlvbiA9IHJlc3BvbnNlSGFuZGxlci5nZXRNYXBwZXJGdW5jdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG1hcHBlckZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlci5nZXRPYmplY3RGdW5jdGlvbigpLmNhbGwobWFwcGVyRnVuY3Rpb24ob2JqZWN0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyLmdldE9iamVjdEZ1bmN0aW9uKCkuY2FsbChvYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAoZmFpbFJlYXNvbikgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBMaXN0LCBMb2dnZXIgfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuXHJcbmNvbnN0IExPRyA9IG5ldyBMb2dnZXIoXCJBYnN0cmFjdFZhbGlkYXRvclwiKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBBYnN0cmFjdFZhbGlkYXRvciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzY3VycmVudGx5VmFsaWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoaXNjdXJyZW50bHlWYWxpZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy52YWxpZExpc3RlbmVyTGlzdCA9IG5ldyBMaXN0KCk7XHJcbiAgICAgICAgdGhpcy5pbnZhbGlkTGlzdGVuZXJMaXN0ID0gbmV3IExpc3QoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRseVZhbGlkID0gaXNjdXJyZW50bHlWYWxpZDtcclxuICAgIH1cclxuXHJcbiAgICBpc1ZhbGlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzY3VycmVudGx5VmFsaWQ7XHJcbiAgICB9XHJcblxyXG5cdHZhbGlkKCkge1xyXG4gICAgICAgIHRoaXMuaXNjdXJyZW50bHlWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy52YWxpZExpc3RlbmVyTGlzdC5mb3JFYWNoKCh2YWx1ZSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHZhbHVlLmNhbGwoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblx0fVxyXG5cclxuXHRpbnZhbGlkKCkge1xyXG4gICAgICAgIHRoaXMuaXNjdXJyZW50bHlWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW52YWxpZExpc3RlbmVyTGlzdC5mb3JFYWNoKCh2YWx1ZSwgcGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHZhbHVlLmNhbGwoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge09iamVjdEZ1bmN0aW9ufSB2YWxpZExpc3RlbmVyIFxyXG5cdCAqL1xyXG5cdHdpdGhWYWxpZExpc3RlbmVyKHZhbGlkTGlzdGVuZXIpIHtcclxuXHRcdHRoaXMudmFsaWRMaXN0ZW5lckxpc3QuYWRkKHZhbGlkTGlzdGVuZXIpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge09iamVjdEZ1bmN0aW9ufSBpbnZhbGlkTGlzdGVuZXIgXHJcblx0ICovXHJcblx0d2l0aEludmFsaWRMaXN0ZW5lcihpbnZhbGlkTGlzdGVuZXIpIHtcclxuXHRcdHRoaXMuaW52YWxpZExpc3RlbmVyTGlzdC5hZGQoaW52YWxpZExpc3RlbmVyKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHsgTGlzdCwgT2JqZWN0RnVuY3Rpb24gfSBmcm9tIFwiY29yZXV0aWxfdjFcIjtcclxuaW1wb3J0IHsgQWJzdHJhY3RWYWxpZGF0b3IgfSBmcm9tICcuL2Fic3RyYWN0VmFsaWRhdG9yLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBbmRWYWxpZGF0b3JTZXQgZXh0ZW5kcyBBYnN0cmFjdFZhbGlkYXRvciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaXNWYWxpZEZyb21TdGFydCA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNWYWxpZEZyb21TdGFydCk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3JMaXN0ID0gbmV3IExpc3QoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7QWJzdHJhY3RWYWxpZGF0b3J9IHZhbGlkYXRvclxyXG4gICAgICovXHJcbiAgICB3aXRoVmFsaWRhdG9yKHZhbGlkYXRvcikge1xyXG4gICAgICAgIHZhbGlkYXRvci53aXRoVmFsaWRMaXN0ZW5lcihuZXcgT2JqZWN0RnVuY3Rpb24odGhpcywgdGhpcy5vbmVWYWxpZCkpO1xyXG4gICAgICAgIHZhbGlkYXRvci53aXRoSW52YWxpZExpc3RlbmVyKG5ldyBPYmplY3RGdW5jdGlvbih0aGlzLCB0aGlzLm9uZUludmFsaWQpKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvckxpc3QuYWRkKHZhbGlkYXRvcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPbmUgdmFsaWRhdG9yIHNhaWQgaXQgd2FzIHZhbGlkXHJcbiAgICAgKi9cclxuICAgIG9uZVZhbGlkKCkge1xyXG4gICAgICAgIGxldCBmb3VuZEludmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvckxpc3QuZm9yRWFjaCgodmFsdWUscGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKCF2YWx1ZS5pc1ZhbGlkKCkpIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kSW52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgaWYoIWZvdW5kSW52YWxpZCkge1xyXG4gICAgICAgICAgICBzdXBlci52YWxpZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmludmFsaWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPbmUgdmFsaWRhdG9yIHNhaWQgaXQgd2FzIGludmFsaWRcclxuICAgICAqL1xyXG4gICAgb25lSW52YWxpZCgpIHtcclxuICAgICAgICBzdXBlci5pbnZhbGlkKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBBYnN0cmFjdFZhbGlkYXRvciB9IGZyb20gXCIuL2Fic3RyYWN0VmFsaWRhdG9yLmpzXCI7XHJcblxyXG5jb25zdCBFTUFJTF9GT1JNQVQgPSAvXlxcdysoW1xcLi1dP1xcdyspKkBcXHcrKFtcXC4tXT9cXHcrKSooXFwuXFx3ezIsM30pKyQvO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVtYWlsVmFsaWRhdG9yIGV4dGVuZHMgQWJzdHJhY3RWYWxpZGF0b3Ige1xyXG5cclxuXHR2YWxpZGF0ZSh2YWx1ZSl7XHJcblx0XHRpZih2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUubWF0Y2goRU1BSUxfRk9STUFUKSl7XHJcblx0ICAgIFx0dGhpcy52YWxpZCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5pbnZhbGlkKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBMaXN0LCBPYmplY3RGdW5jdGlvbiB9IGZyb20gXCJjb3JldXRpbF92MVwiO1xyXG5pbXBvcnQgeyBBYnN0cmFjdFZhbGlkYXRvciB9IGZyb20gJy4vYWJzdHJhY3RWYWxpZGF0b3IuanMnXHJcblxyXG5leHBvcnQgY2xhc3MgT3JWYWxpZGF0b3JTZXQgZXh0ZW5kcyBBYnN0cmFjdFZhbGlkYXRvciB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKGlzVmFsaWRGcm9tU3RhcnQgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGlzVmFsaWRGcm9tU3RhcnQpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdG9yTGlzdCA9IG5ldyBMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0VmFsaWRhdG9yfSB2YWxpZGF0b3JcclxuICAgICAqL1xyXG4gICAgd2l0aFZhbGlkYXRvcih2YWxpZGF0b3IpIHtcclxuICAgICAgICB2YWxpZGF0b3Iud2l0aFZhbGlkTGlzdGVuZXIobmV3IE9iamVjdEZ1bmN0aW9uKHRoaXMsIHRoaXMub25lVmFsaWQpKTtcclxuICAgICAgICB2YWxpZGF0b3Iud2l0aEludmFsaWRMaXN0ZW5lcihuZXcgT2JqZWN0RnVuY3Rpb24odGhpcywgdGhpcy5vbmVJbnZhbGlkKSk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3JMaXN0LmFkZCh2YWxpZGF0b3IpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25lIHZhbGlkYXRvciBzYWlkIGl0IHdhcyB2YWxpZFxyXG4gICAgICovXHJcbiAgICBvbmVWYWxpZCgpIHtcclxuICAgICAgICBzdXBlci52YWxpZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT25lIHZhbGlkYXRvciBzYWlkIGl0IHdhcyBpbnZhbGlkXHJcbiAgICAgKi9cclxuICAgIG9uZUludmFsaWQoKSB7XHJcbiAgICAgICAgbGV0IGZvdW5kVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRvckxpc3QuZm9yRWFjaCgodmFsdWUscGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKHZhbHVlLmlzVmFsaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZm91bmRWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgaWYoZm91bmRWYWxpZCkge1xyXG4gICAgICAgICAgICBzdXBlci52YWxpZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmludmFsaWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgQWJzdHJhY3RWYWxpZGF0b3IgfSBmcm9tIFwiLi9hYnN0cmFjdFZhbGlkYXRvci5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhc3N3b3JkVmFsaWRhdG9yIGV4dGVuZHMgQWJzdHJhY3RWYWxpZGF0b3Ige1xyXG5cclxuXHR2YWxpZGF0ZSh2YWx1ZSl7XHJcblx0XHRpZih2YWx1ZSA9PT0gXCJcIil7XHJcblx0ICAgIFx0dGhpcy5pbnZhbGlkKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnZhbGlkKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBBYnN0cmFjdFZhbGlkYXRvciB9IGZyb20gXCIuL2Fic3RyYWN0VmFsaWRhdG9yLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVxdWlyZWRWYWxpZGF0b3IgZXh0ZW5kcyBBYnN0cmFjdFZhbGlkYXRvciB7XHJcblxyXG5cdHZhbGlkYXRlKHZhbHVlKXtcclxuXHRcdGlmKHZhbHVlID09PSBcIlwiKXtcclxuXHQgICAgXHR0aGlzLmludmFsaWQoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMudmFsaWQoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcbiJdLCJuYW1lcyI6WyJMT0ciLCJMb2dnZXIiLCJDb250YWluZXJCcmlkZ2UiLCJbb2JqZWN0IE9iamVjdF0iLCJpZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsImNyZWF0ZVRleHROb2RlIiwibmFtZSIsImNyZWF0ZUVsZW1lbnQiLCJuYW1lU3BhY2UiLCJjcmVhdGVFbGVtZW50TlMiLCJ1cmwiLCJwYXJhbXMiLCJ3aW5kb3ciLCJmZXRjaCIsImtleSIsInNlc3Npb25TdG9yYWdlIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJnZXRJdGVtIiwibG9jYWxTdG9yYWdlIiwiZWxlbWVudCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kIiwiQXR0cmlidXRlIiwiYXR0cmlidXRlIiwidGhpcyIsIkJhc2VFbGVtZW50IiwicGFyZW50IiwiYXR0cmlidXRlTWFwIiwiZXZlbnRzQXR0YWNoZWQiLCJMaXN0IiwiWG1sRWxlbWVudCIsImNyZWF0ZUZyb21YbWxFbGVtZW50IiwiSFRNTEVsZW1lbnQiLCJlcnJvciIsImF0dHJpYnV0ZXMiLCJ1bmRlZmluZWQiLCJNYXAiLCJpIiwibGVuZ3RoIiwic2V0IiwieG1sRWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJnZXROYW1lc3BhY2UiLCJnZXROYW1lc3BhY2VVcmkiLCJnZXRGdWxsTmFtZSIsImdldE5hbWUiLCJnZXRNYXBwZWRFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJnZXRBdHRyaWJ1dGVzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImdldFZhbHVlIiwiZXZlbnRUeXBlIiwiZnVuY3Rpb25QYXJhbSIsImNvbnRhaW5zIiwid2FybiIsInN0YXJ0c1dpdGgiLCJzdWJzdHIiLCJhZGRFdmVudExpc3RlbmVyIiwiYWRkIiwidGFnTmFtZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwibG9hZEF0dHJpYnV0ZXMiLCJnZXRBdHRyaWJ1dGUiLCJoYXNBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzdHlsZSIsImlucHV0IiwiY29uc29sZSIsInJlcGxhY2VDaGlsZCIsImdldFJvb3RFbGVtZW50IiwiVGV4dCIsIkVsZW1lbnQiLCJmaXJzdENoaWxkIiwiY2xlYXIiLCJhZGRDaGlsZCIsImluc2VydEJlZm9yZSIsIkNhbnZhc1Jvb3QiLCJjb21wb25lbnQiLCJib2R5RWxlbWVudCIsImlubmVySFRNTCIsInJlbW92ZUVsZW1lbnQiLCJhZGRIZWFkZXJFbGVtZW50IiwiYWRkQm9keUVsZW1lbnQiLCJBYnN0cmFjdElucHV0RWxlbWVudCIsInN1cGVyIiwiZ2V0QmFja2luZ1ZhbHVlIiwiZm9jdXMiLCJzZWxlY3QiLCJSYWRpb0lucHV0RWxlbWVudCIsImNoZWNrZWQiLCJpc0NoZWNrZWQiLCJDaGVja2JveElucHV0RWxlbWVudCIsIlRleHRJbnB1dEVsZW1lbnQiLCJUZXh0YXJlYUlucHV0RWxlbWVudCIsInNldFZhbHVlIiwiZ2V0SW5uZXJIVE1MIiwicHJlcGVuZENoaWxkIiwiVGV4dG5vZGVFbGVtZW50IiwiWG1sQ2RhdGEiLCJjcmVhdGVGcm9tWG1sQ2RhdGEiLCJjZGF0YUVsZW1lbnQiLCJTaW1wbGVFbGVtZW50IiwiRWxlbWVudE1hcHBlciIsIm1hcHNUb1JhZGlvIiwibWFwc1RvQ2hlY2tib3giLCJtYXBzVG9TdWJtaXQiLCJtYXBzVG9UZXh0YXJlYSIsIm1hcHNUb1RleHQiLCJtYXBzVG9UZXh0bm9kZSIsIm1hcHNUb1NpbXBsZSIsImxvZyIsIkhUTUxJbnB1dEVsZW1lbnQiLCJ0eXBlIiwiTm9kZSIsIm5vZGVUeXBlIiwiSFRNTFRleHRBcmVhRWxlbWVudCIsIkhUTUwiLCJlbGVtZW50TmFtZSIsIm1hcCIsImNsYXNzVmFsdWUiLCJzdHlsZVZhbHVlIiwic2V0QXR0cmlidXRlVmFsdWUiLCJocmVmIiwiY3VzdG9tIiwiYXBwbHlTdHlsZXMiLCJzdHlsZXMiLCJlbmFibGVkU3R5bGVzIiwiQ2FudmFzU3R5bGVzIiwic291cmNlIiwiZ2V0Iiwic2V0Q2hpbGQiLCJnZXRTdHlsZXNTb3VyY2UiLCJzdHlsZUVsZW1lbnQiLCJkaXNhYmxlU3R5bGUiLCJyZW1vdmUiLCJDbGllbnQiLCJtZXRob2QiLCJtb2RlIiwicmVkaXJlY3QiLCJ0b1N0cmluZyIsImRhdGEiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJ1c2VyLWFnZW50IiwiY29udGVudC10eXBlIiwiQ29tcG9uZW50IiwiY29tcG9uZW50SW5kZXgiLCJyb290RWxlbWVudCIsImVsZW1lbnRNYXAiLCJVcmwiLCJwcm90b2NvbCIsImhvc3QiLCJwb3J0IiwicGF0aExpc3QiLCJwYXJhbWV0ZXJNYXAiLCJib29rbWFyayIsInJlbWFpbmluZyIsImRldGVybWluZVByb3RvY29sIiwiZGV0ZXJtaW5lSG9zdCIsImRldGVybWluZVBvcnQiLCJkZXRlcm1pbmVQYXRoIiwiZGV0ZXJtaW5lUGFyYW1ldGVycyIsImRldGVybWluZUJvb2ttYXJrIiwiaW5kZXgiLCJpbmRleE9mIiwicGFydHMiLCJzcGxpdCIsInJlcGxhY2UiLCJob3N0UGFydCIsInBvcnRQYXJ0Iiwic3Vic3RyaW5nIiwicGF0aFBhcnRzIiwiZGVjb2RlVVJJIiwicGFydExpc3QiLCJrZXlWYWx1ZSIsInBhdGhQYXJ0IiwiZmlyc3RQYXJhbWV0ZXIiLCJwYXJhbWV0ZXJLZXkiLCJwYXJhbWV0ZXJWYWx1ZSIsImVuY29kZVVSSSIsIlN0eWxlcyIsInN0eWxlc1NvdXJjZSIsIlN0eWxlc1JlZ2lzdHJ5Iiwic3R5bGVzTWFwIiwic3R5bGVzVXJsTWFwIiwic3R5bGVzUXVldWVTaXplIiwiY2FsbGJhY2siLCJkb0NhbGxiYWNrIiwicmVnaXN0cnkiLCJ0bW8iLCJzaXplIiwidGVtcENhbGxiYWNrIiwiY2FsbCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsInJlc3BvbnNlIiwib2siLCJ0ZXh0IiwibmFtZVVybE1hcCIsInJlamVjdCIsImxvYWRlZCIsInByaXZhdGVMb2FkIiwiY2F0Y2giLCJyZWFzb24iLCJpbmZvIiwiVGVtcGxhdGUiLCJ0ZW1wbGF0ZVNvdXJjZSIsIlRlbXBsYXRlUmVnaXN0cnkiLCJ0ZW1wbGF0ZU1hcCIsInRlbXBsYXRlVXJsTWFwIiwidGVtcGxhdGVRdWV1ZVNpemUiLCJsYW5ndWFnZVByZWZpeCIsInRlbXBsYXRlIiwiZ2V0UGF0aExpc3QiLCJzZXRMYXN0IiwiZ2V0TGFzdCIsInJlc29sc2UiLCJUZW1wbGF0ZXNMb2FkZXIiLCJ0ZW1wbGF0ZVJlZ2lzdHJ5IiwiY29uZmlnIiwiZ2V0Q29uZmlnRWxlbWVudHMiLCJlbnRyeSIsImdldENsYXNzUmVmZXJlbmNlIiwiVEVNUExBVEVfVVJMIiwiQ09NUE9ORU5UX05BTUUiLCJnZXRUZW1wbGF0ZXNMb2FkZWRQcm9taXNlIiwiU3R5bGVzTG9hZGVyIiwic3R5bGVzUmVnaXN0cnkiLCJTVFlMRVNfVVJMIiwiZ2V0U3R5bGVzTG9hZGVkUHJvbWlzZSIsIkNvbXBvbmVudENvbmZpZ1Byb2Nlc3NvciIsImluamVjdG9yIiwidGVtcGxhdGVzTG9hZGVyIiwic3R5bGVzTG9hZGVyIiwiYWxsIiwibG9hZCIsIlVuaXF1ZUlkUmVnaXN0cnkiLCJpZE5hbWVzIiwibnVtYmVyIiwiRXZlbnQiLCJldmVudCIsInRvTG93ZXJDYXNlIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsInByZXZlbnREZWZhdWx0Iiwib2Zmc2V0WCIsIm9mZnNldFkiLCJjbGllbnRYIiwiY2xpZW50WSIsInRhcmdldCIsImtleUNvZGUiLCJFdmVudFJlZ2lzdHJ5IiwibGlzdGVuZXJzIiwiYmVmb3JlTGlzdGVuZXJzIiwiYWZ0ZXJMaXN0ZW5lcnMiLCJldmVudE5hbWUiLCJ1bmlxdWVFdmVudE5hbWUiLCJ0aGVFdmVudFJlZ2lzdHJ5IiwiYXR0YWNoRXZlbnQiLCJ0cmlnZ2VyIiwib2JqZWN0RnVuY3Rpb24iLCJ1bmlxdWVJbmRleCIsImV4aXN0cyIsImhhbmRsZXJPYmplY3QiLCJoYW5kbGVyRnVuY3Rpb24iLCJPYmplY3RGdW5jdGlvbiIsInN1ZmZpeGVkRXZlbnROYW1lIiwiaGFuZGxlQmVmb3JlIiwiY3VycmVudExpc3RlbmVycyIsImhhbmRsZUFmdGVyIiwiaGFuZGxlR2xvYmFsIiwiRWxlbWVudFJlZ2lzdHJhdG9yIiwiZXZlbnRSZWdpc3RyeSIsInVuaXF1ZUlkUmVnaXN0cnkiLCJwYXJlbnRXcmFwcGVyIiwiYWRkVG9FbGVtZW50SWRNYXAiLCJyZWdpc3RlckVsZW1lbnRFdmVudHMiLCJhdHRyaWJ1dGVLZXkiLCJhdHRhY2giLCJjb250YWluc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZVZhbHVlIiwiaWRBdHRyaWJ1dGVXaXRoU3VmZml4IiwiQ29tcG9uZW50RmFjdG9yeSIsImVsZW1lbnRSZWdpc3RyYXRvciIsImNvbXBvbmVudENvdW50ZXIiLCJEb21UcmVlIiwiZ2V0VGVtcGxhdGVTb3VyY2UiLCJtb3VudFN0eWxlcyIsImdldENvbXBvbmVudEluZGV4IiwiZ2V0RWxlbWVudE1hcCIsInNldFN0eWxlIiwiQ29tcG9uZW50SW5zdGFuY2VQcm9jZXNzb3IiLCJpbnN0YW5jZSIsImNyZWF0ZUNvbXBvbmVudCIsIkFic3RyYWN0RGF0YUJpbmRpbmciLCJEYXRhQmluZFJlZ2lzdHJ5IiwiZGF0YUJpbmRpbmdMaXN0IiwiaW5wdXRzIiwiZGF0YUJpbmRpbmciLCJtYXBwaW5nIiwicHVsbCIsInB1c2giLCJJbnB1dEVsZW1lbnREYXRhQmluZGluZyIsIm1vZGVsIiwidmFsaWRhdG9yIiwicHVsbGVycyIsInB1c2hlcnMiLCJmaWVsZCIsInRvIiwicHVsbGVyIiwiUHJvcGVydHlBY2Nlc3NvciIsInZhbGlkYXRlIiwicHVzaGVyIiwic2V0Q2hlY2tlZCIsIl9fY2hhbmdlZCIsIlByb3h5T2JqZWN0RmFjdG9yeSIsIm9iamVjdCIsIlByb3h5IiwicHJvcCIsInN1Y2Nlc3MiLCJIaXN0b3J5IiwidGl0bGUiLCJzdGF0ZU9iamVjdCIsImhpc3RvcnkiLCJwdXNoU3RhdGUiLCJsb2NhdGlvbiIsIlN0YXRlIiwic3RhdGVMaXN0ZW5lck1hcCIsIm5ld1BhdGgiLCJnZXRVcmwiLCJnZXRQYXRoIiwic2V0VXJsIiwicHVzaFVybCIsIkp1c3RyaWdodENvbmZpZyIsImp1c3RyaWdodENvbmZpZyIsIkNvbmZpZyIsImFkZFNpbmdsZXRvbiIsIkFwcGxpY2F0aW9uU3RvcmFnZSIsInNldExvY2FsQXR0cmlidXRlIiwiZ2V0TG9jYWxBdHRyaWJ1dGUiLCJoYXNMb2NhbEF0dHJpYnV0ZSIsInJlbW92ZUxvY2FsQXR0cmlidXRlIiwiU2Vzc2lvblN0b3JhZ2UiLCJzZXRTZXNzaW9uQXR0cmlidXRlIiwiaGFzU2Vzc2lvbkF0dHJpYnV0ZSIsImdldFNlc3Npb25BdHRyaWJ1dGUiLCJyZW1vdmVTZXNzaW9uQXR0cmlidXRlIiwiSHR0cFJlc3BvbnNlSGFuZGxlciIsImNvZGUiLCJtYXBwZXJGdW5jdGlvbiIsIkh0dHBDYWxsQnVpbGRlciIsInBhcmFtdGVyIiwiaHR0cENhbGxiYWNrTWFwIiwiZXJyb3JDYWxsYmFjayIsImNsaWVudCIsInBhcmFtZXRlciIsInByb2Nlc3NSZXNwb25zZSIsInByb2Nlc3NFcnJvciIsInBvc3QiLCJwdXQiLCJwYXRjaCIsImRlbGV0ZSIsInJlc3BvbnNlSGFuZGxlciIsInN0YXR1cyIsImpzb24iLCJnZXRNYXBwZXJGdW5jdGlvbiIsImdldE9iamVjdEZ1bmN0aW9uIiwiZmFpbFJlYXNvbiIsIkFic3RyYWN0VmFsaWRhdG9yIiwiaXNjdXJyZW50bHlWYWxpZCIsInZhbGlkTGlzdGVuZXJMaXN0IiwiaW52YWxpZExpc3RlbmVyTGlzdCIsImN1cnJlbnRseVZhbGlkIiwidmFsaWRMaXN0ZW5lciIsImludmFsaWRMaXN0ZW5lciIsIkFuZFZhbGlkYXRvclNldCIsImlzVmFsaWRGcm9tU3RhcnQiLCJ2YWxpZGF0b3JMaXN0Iiwid2l0aFZhbGlkTGlzdGVuZXIiLCJvbmVWYWxpZCIsIndpdGhJbnZhbGlkTGlzdGVuZXIiLCJvbmVJbnZhbGlkIiwiZm91bmRJbnZhbGlkIiwiaXNWYWxpZCIsImludmFsaWQiLCJ2YWxpZCIsIkVNQUlMX0ZPUk1BVCIsIkVtYWlsVmFsaWRhdG9yIiwibWF0Y2giLCJPclZhbGlkYXRvclNldCIsImZvdW5kVmFsaWQiLCJQYXNzd29yZFZhbGlkYXRvciIsIlJlcXVpcmVkVmFsaWRhdG9yIl0sIm1hcHBpbmdzIjoiNEtBRUEsTUFBTUEsS0FBTSxHQUFJQyxvQkFBTyx3QkFFVkMsaUJBTVRDLHNCQUFzQkMsR0FDbEIsTUFBT0MsVUFBU0MsZUFBZUYsR0FPbkNELHNCQUFzQkksR0FDbEIsTUFBT0YsVUFBU0csZUFBZUQsR0FPbkNKLHFCQUFxQk0sR0FDakIsTUFBT0osVUFBU0ssY0FBY0QsR0FRbENOLHVCQUF1QlEsRUFBV0YsR0FDOUIsTUFBT0osVUFBU08sZ0JBQWdCRCxFQUFXRixHQVEvQ04sYUFBYVUsRUFBS0MsR0FDZCxNQUFPQyxRQUFPQyxNQUFNSCxFQUFLQyxHQUs3QlgsMkJBQTJCYyxFQUFLVixHQUM1QlEsT0FBT0csZUFBZUMsUUFBUUYsRUFBSVYsR0FHdENKLDhCQUE4QmMsR0FDMUJGLE9BQU9HLGVBQWVFLFdBQVdILEdBR3JDZCwyQkFBMkJjLEdBQ3ZCLE1BQU9GLFFBQU9HLGVBQWVHLFFBQVFKLEdBR3pDZCwyQkFBMkJjLEdBQ3ZCLE1BQThDLFFBQXZDRixPQUFPRyxlQUFlRyxRQUFRSixHQUd6Q2QseUJBQXlCYyxFQUFLVixHQUMxQlEsT0FBT08sYUFBYUgsUUFBUUYsRUFBSVYsR0FHcENKLDRCQUE0QmMsR0FDeEJGLE9BQU9PLGFBQWFGLFdBQVdILEdBR25DZCx5QkFBeUJjLEdBQ3JCLE1BQTRDLFFBQXJDRixPQUFPTyxhQUFhRCxRQUFRSixHQUd2Q2QseUJBQXlCYyxHQUNyQixNQUFPRixRQUFPTyxhQUFhRCxRQUFRSixHQUd2Q2QscUJBQXFCQyxHQUNqQixHQUFJbUIsR0FBVWxCLFNBQVNDLGVBQWVGLEVBQ3RDbUIsR0FBUUMsV0FBV0MsWUFBWUYsR0FHbkNwQix3QkFBd0JvQixHQUNQbEIsU0FBU3FCLHFCQUFxQixRQUFRLEdBQzVDQyxPQUFPSixHQUdsQnBCLHNCQUFzQm9CLEdBQ1BsQixTQUFTcUIscUJBQXFCLFFBQVEsR0FDNUNDLE9BQU9KLFNDOUZQSyxXQUVUekIsWUFBWTBCLEdBQ1JDLEtBQUtELFVBQVlBLEVBR3JCMUIsV0FDSSxNQUFPMkIsTUFBS0QsVUFBVXRCLE1BRzFCSixVQUNJLE1BQU8yQixNQUFLRCxVQUFVcEIsS0FHMUJOLGVBQ0ksTUFBTzJCLE1BQUtELFVBQVVwQixNQ1I5QixLQUFNVCxPQUFNLEdBQUlDLG9CQUFPLG9CQUtWOEIsYUFRVDVCLFlBQVlJLEVBQU95QixHQU9mLE1BSkFGLE1BQUtQLFFBQVUsS0FDZk8sS0FBS0csYUFBZSxLQUNwQkgsS0FBS0ksZUFBaUIsR0FBSUMsa0JBRXZCNUIsWUFBaUI2Qiw4QkFDaEJOLEtBQUtQLFFBQVVPLEtBQUtPLHFCQUFxQjlCLEVBQU95QixJQUdoQyxnQkFBVnpCLFFBQ051QixLQUFLUCxRQUFVckIsZ0JBQWdCUSxjQUFjSCxJQUc5Q0EsWUFBaUIrQixrQkFDaEJSLEtBQUtQLFFBQVVoQixJQUduQlAsTUFBSXVDLE1BQU0sc0NBQ1Z2QyxPQUFJdUMsTUFBTWhDLElBR2RKLGlCQUNJLEdBQStCLE9BQTVCMkIsS0FBS1AsUUFBUWlCLGdCQUFtREMsS0FBNUJYLEtBQUtQLFFBQVFpQixXQUVoRCxZQURBVixLQUFLRyxhQUFlLEdBQUlTLGlCQUc1QixJQUF5QixPQUF0QlosS0FBS0csa0JBQStDUSxLQUF0QlgsS0FBS0csYUFBNEIsQ0FDOURILEtBQUtHLGFBQWUsR0FBSVMsZ0JBQ3hCLEtBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJYixLQUFLUCxRQUFRaUIsV0FBV0ksT0FBUUQsSUFDaERiLEtBQUtHLGFBQWFZLElBQUlmLEtBQUtQLFFBQVFpQixXQUFXRyxHQUFHbEMsS0FBSyxHQUFJbUIsV0FBVUUsS0FBS1AsUUFBUWlCLFdBQVdHLE1BWXhHeEMscUJBQXFCMkMsRUFBWUMsR0FDN0IsR0FBSXhCLEdBQVUsSUFhZCxPQVhJQSxHQUREdUIsRUFBV0UsZUFDQTlDLGdCQUFnQlUsZ0JBQWdCa0MsRUFBV0csa0JBQWtCSCxFQUFXSSxlQUV4RWhELGdCQUFnQlEsY0FBY29DLEVBQVdLLFdBRXBESixHQUFzRCxPQUFyQ0EsRUFBY0ssb0JBQzlCTCxFQUFjSyxtQkFBbUJDLFlBQVk5QixHQUVqRHVCLEVBQVdRLGdCQUFnQkMsUUFBUSxTQUFTdEMsRUFBSVYsR0FFNUMsTUFEQWdCLEdBQVFpQyxhQUFhdkMsRUFBSVYsRUFBTWtELGFBQ3hCLElBRUpsQyxFQVNYcEIsWUFBWXVELEVBQVdDLEdBQ2Y3QixLQUFLSSxlQUFlMEIsU0FBU0YsR0FPN0IxRCxNQUFJNkQsS0FBSyxVQUFZSCxFQUFZLDJCQUE2QjVCLEtBQUtQLFFBQVFkLE9BTnhFaUQsRUFBVUksV0FBVyxRQUNwQkosRUFBWUEsRUFBVUssT0FBTyxJQUVqQ2pDLEtBQUtQLFFBQVF5QyxpQkFBaUJOLEVBQVdDLEdBQ3pDN0IsS0FBS0ksZUFBZStCLElBQUlQLElBV2hDdkQsbUJBQ0ksTUFBTzJCLE1BQUtQLFFBR2hCcEIsY0FDSSxNQUFPMkIsTUFBS1AsUUFBUTJDLFFBR3hCL0QsU0FDSSxNQUFPMkIsTUFBS1AsUUFBUTRDLHdCQUF3QkMsSUFHaERqRSxZQUNJLE1BQU8yQixNQUFLUCxRQUFRNEMsd0JBQXdCRSxPQUdoRGxFLFVBQ0ksTUFBTzJCLE1BQUtQLFFBQVE0Qyx3QkFBd0JHLEtBR2hEbkUsV0FDSSxNQUFPMkIsTUFBS1AsUUFBUTRDLHdCQUF3QkksTUFHaERwRSxXQUNJLE1BQU8yQixNQUFLUCxRQUFRaUQsWUFHeEJyRSxZQUNJLE1BQU8yQixNQUFLUCxRQUFRa0QsYUFHeEJ0RSxnQkFFSSxNQURBMkIsTUFBSzRDLGlCQUNFNUMsS0FBS0csYUFHaEI5QixrQkFBa0JjLEVBQUlWLEdBQ2xCdUIsS0FBS1AsUUFBUWlDLGFBQWF2QyxFQUFJVixHQUdsQ0osa0JBQWtCYyxHQUNkLE1BQU9hLE1BQUtQLFFBQVFvRCxhQUFhMUQsR0FHckNkLGtCQUFrQmMsR0FDZCxNQUFPYSxNQUFLUCxRQUFRcUQsYUFBYTNELEdBR3JDZCxnQkFBZ0JjLEdBQ1phLEtBQUtQLFFBQVFzRCxnQkFBZ0I1RCxHQUdqQ2QsU0FBU2MsRUFBSVYsR0FDVHVCLEtBQUtQLFFBQVF1RCxNQUFNN0QsR0FBT1YsRUFHOUJKLFNBQVNjLEdBQ0wsTUFBT2EsTUFBS1AsUUFBUXVELE1BQU03RCxHQUc5QmQsWUFBWWMsR0FDUmEsS0FBS1AsUUFBUXVELE1BQU03RCxHQUFPLEtBRzlCZCxJQUFJNEUsR0FDQSxNQUErQixRQUE1QmpELEtBQUtQLFFBQVFDLGVBQ1p3RCxTQUFRekMsTUFBTSx3REFHZndDLEVBQU0zQixxQkFDTHRCLE1BQUtQLFFBQVFDLFdBQVd5RCxhQUFhRixFQUFNM0IsbUJBQW1CdEIsS0FBS1AsU0FHcEV3RCxHQUF5QyxrQkFBekJBLEdBQU1HLGdCQUNyQnBELEtBQUtQLFFBQVFDLFdBQVd5RCxhQUFhRixFQUFNRyxpQkFBaUI5QixtQkFBbUJ0QixLQUFLUCxjQUNwRk8sS0FBS1AsUUFBVXdELEVBQU1HLGlCQUFpQjlCLHFCQUd2QixnQkFBVDJCLE9BQ05qRCxNQUFLUCxRQUFRQyxXQUFXeUQsYUFBYS9FLGdCQUFnQk0sZUFBZXVFLEdBQU9qRCxLQUFLUCxTQUdqRndELFlBQWlCSSxVQUNoQnJELE1BQUtQLFFBQVFDLFdBQVd5RCxhQUFhRixFQUFNakQsS0FBS1AsU0FHakR3RCxZQUFpQkssYUFDaEJ0RCxNQUFLUCxRQUFRQyxXQUFXeUQsYUFBYUYsRUFBTWpELEtBQUtQLGFBRHBELEdBTUpwQixZQUNJLFFBQUcyQixLQUFLUCxRQUFRQyxXQU1wQnJCLFNBQ0kyQixLQUFLUCxRQUFRQyxXQUFXQyxZQUFZSyxLQUFLUCxTQUc3Q3BCLFFBQ0ksS0FBTzJCLEtBQUtQLFFBQVE4RCxZQUNoQnZELEtBQUtQLFFBQVFFLFlBQVlLLEtBQUtQLFFBQVE4RCxZQUk5Q2xGLFNBQVM0RSxHQUNMakQsS0FBS3dELFFBQ0x4RCxLQUFLeUQsU0FBU1IsR0FHbEI1RSxTQUFTNEUsR0FDTCxNQUFJQSxHQUFNM0IscUJBQ050QixNQUFLUCxRQUFROEIsWUFBWTBCLEVBQU0zQixvQkFHL0IyQixHQUF5QyxrQkFBekJBLEdBQU1HLG1CQUN0QnBELE1BQUtQLFFBQVE4QixZQUFZMEIsRUFBTUcsaUJBQWlCOUIsb0JBR2hDLGdCQUFUMkIsT0FDUGpELE1BQUtQLFFBQVE4QixZQUFZbkQsZ0JBQWdCTSxlQUFldUUsSUFHeERBLFlBQWlCSSxVQUNqQnJELE1BQUtQLFFBQVE4QixZQUFZMEIsR0FHekJBLFlBQWlCSyxhQUNqQnRELE1BQUtQLFFBQVE4QixZQUFZMEIsT0FEN0IsR0FNSjVFLGFBQWE0RSxHQUlULE1BSCtCLFFBQTVCakQsS0FBS1AsUUFBUThELFlBQ1p2RCxLQUFLeUQsU0FBU1IsR0FFZEEsRUFBTTNCLHFCQUNOdEIsTUFBS1AsUUFBUWlFLGFBQWFULEVBQU0zQixtQkFBbUJ0QixLQUFLUCxRQUFROEQsWUFHaEVOLEdBQXlDLGtCQUF6QkEsR0FBTUcsbUJBQ3RCcEQsTUFBS1AsUUFBUWlFLGFBQWFULEVBQU1HLGlCQUFpQjlCLG1CQUFtQnRCLEtBQUtQLFFBQVE4RCxZQUdqRSxnQkFBVE4sT0FDUGpELE1BQUtQLFFBQVFpRSxhQUFhdEYsZ0JBQWdCTSxlQUFldUUsR0FBT2pELEtBQUtQLFFBQVE4RCxZQUc3RU4sWUFBaUJJLFVBQ2pCckQsTUFBS1AsUUFBUWlFLGFBQWFULEVBQU1qRCxLQUFLUCxRQUFROEQsWUFHN0NOLFlBQWlCSyxhQUNqQnRELE1BQUtQLFFBQVFpRSxhQUFhVCxFQUFNakQsS0FBS1AsUUFBUThELGdCQURqRCxTQ2xRS0ksWUFFVHRGLHdCQUF3QkMsRUFBSXNGLEdBQ3hCLEdBQUlDLEdBQWN6RixnQkFBZ0JJLGVBQWVGLEVBQ2pEdUYsR0FBWW5FLFdBQVd5RCxhQUFhUyxFQUFVUixpQkFBaUI5QixtQkFBb0J1QyxHQUd2RnhGLG9CQUFvQkMsRUFBSXNGLEdBQ3BCLEdBQUlDLEdBQWN6RixnQkFBZ0JJLGVBQWVGLEVBQ2pEdUYsR0FBWUMsVUFBWSxHQUN4QkQsRUFBWXRDLFlBQVlxQyxFQUFVUixpQkFBaUI5QixtQkFBb0J1QyxHQUczRXhGLHlCQUF5QkMsRUFBSXNGLEdBQ1B4RixnQkFBZ0JJLGVBQWVGLEdBQ3JDaUQsWUFBWXFDLEVBQVVSLGlCQUFpQjlCLG9CQUd2RGpELHVCQUF1QkMsRUFBSW1CLEdBQ0xyQixnQkFBZ0JJLGVBQWVGLEdBQ3JDaUQsWUFBWTlCLEVBQVE2QixvQkFHcENqRCxxQkFBcUJDLEdBQ2pCRixnQkFBZ0IyRixjQUFjekYsR0FNbENELHdCQUF3Qm9CLEdBQ3BCckIsZ0JBQWdCNEYsaUJBQWlCdkUsRUFBUTZCLG9CQU03Q2pELHNCQUFzQm9CLEdBQ2xCckIsZ0JBQWdCNkYsZUFBZXhFLEVBQVE2QiwwQkNwQ3pDcEQsT0FBTSxHQUFJQyxvQkFBTyw2QkFLVitGLDZCQUE2QmpFLGFBUXRDNUIsWUFBWUksRUFBT3lCLEdBQ2ZpRSxNQUFNMUYsRUFBT3lCLEdBUWpCN0IsVUFDSSxNQUFPMkIsTUFBS1AsUUFBUWQsS0FReEJOLFFBQVFJLEdBQ0p1QixLQUFLUCxRQUFRZCxLQUFPRixFQU14QkosV0FDSSxNQUFPMkIsTUFBS29FLGtCQU1oQi9GLGtCQUNJLE1BQU8yQixNQUFLUCxRQUFRaEIsTUFHeEJKLFNBQVNJLEdBQ0x1QixLQUFLUCxRQUFRaEIsTUFBUUEsRUFHekJKLFFBQ0kyQixLQUFLUCxRQUFRNEUsUUFHakJoRyxZQUNJMkIsS0FBS1AsUUFBUTZFLGVDekRSQywwQkFBMEJMLHNCQVFuQzdGLFlBQVlvQixFQUFTUyxHQUNqQmlFLE1BQU0xRSxFQUFTUyxHQUduQjdCLFdBQVdJLEdBQ1B1QixLQUFLUCxRQUFRK0UsUUFBVS9GLEVBRzNCSixZQUNJLE1BQU8yQixNQUFLUCxRQUFRK0UsUUFHeEJuRyxXQUNJLE1BQUcyQixNQUFLeUUsWUFDR04sTUFBTXhDLFdBRVYsV0N4QkYrQyw2QkFBNkJSLHNCQVF0QzdGLFlBQVlvQixFQUFTUyxHQUNqQmlFLE1BQU0xRSxFQUFTUyxHQUduQjdCLFdBQVdJLEdBQ1B1QixLQUFLUCxRQUFRK0UsUUFBVS9GLEVBRzNCSixZQUNJLE1BQU8yQixNQUFLUCxRQUFRK0UsUUFHeEJuRyxXQUNJLE1BQUcyQixNQUFLeUUsWUFDR04sTUFBTXhDLFdBRVYsV0N4QkZnRCx5QkFBeUJULHNCQVFsQzdGLFlBQVlvQixFQUFTUyxHQUNqQmlFLE1BQU0xRSxFQUFTUyxTQ1RWMEUsNkJBQTZCVixzQkFRdEM3RixZQUFZb0IsRUFBU1MsR0FDakJpRSxNQUFNMUUsRUFBU1MsR0FHbkI3QixlQUNJLE1BQU8yQixNQUFLUCxRQUFRcUUsVUFHeEJ6RixhQUFhSSxHQUNUdUIsS0FBS1AsUUFBUXFFLFVBQVlyRixFQUc3QkosU0FBUzRFLEdBQ0xrQixNQUFNVixTQUFTUixHQUNmakQsS0FBSzZFLFNBQVM3RSxLQUFLOEUsZ0JBR3ZCekcsYUFBYTRFLEdBQ1RrQixNQUFNWSxhQUFhOUIsR0FDbkJqRCxLQUFLNkUsU0FBUzdFLEtBQUs4RSxzQkM3QmRFLGlCQVFUM0csWUFBWUksRUFBT3lCLEdBQ1p6QixZQUFpQndHLHlCQUNoQmpGLEtBQUtQLFFBQVVPLEtBQUtrRixtQkFBbUJ6RyxFQUFPeUIsSUFFOUIsZ0JBQVZ6QixLQUNOdUIsS0FBS1AsUUFBVXJCLGdCQUFnQk0sZUFBZUQsSUFJdERKLG1CQUFtQjhHLEVBQWNsRSxHQUM3QixHQUFJeEIsR0FBVWxCLFNBQVNHLGVBQWV5RyxFQUFheEQsV0FJbkQsT0FIcUIsUUFBbEJWLEdBQStELE9BQXJDQSxFQUFjSyxvQkFDdkNMLEVBQWNLLG1CQUFtQkMsWUFBWTlCLEdBRTFDQSxFQUdYcEIsU0FBU0ksR0FDTHVCLEtBQUtQLFFBQVVoQixFQUduQkosV0FDSSxNQUFPMkIsTUFBS1AsUUFHaEJwQixtQkFDSSxNQUFPMkIsTUFBS1AsY0NoQ1AyRixzQkFBc0JuRixhQVEvQjVCLFlBQVlvQixFQUFTUyxHQUNqQmlFLE1BQU0xRSxFQUFTUyxHQUduQjdCLGVBQ0ksTUFBTzJCLE1BQUtQLFFBQVFxRSxVQUd4QnpGLGFBQWFJLEdBQ1R1QixLQUFLUCxRQUFRcUUsVUFBWXJGLFFDWnBCNEcsZUFRVGhILFdBQVc0RSxFQUFPL0MsR0FDZCxNQUFJbUYsZUFBY0MsWUFBWXJDLEdBQWdCLEdBQUlzQixtQkFBa0J0QixFQUFPL0MsR0FDdkVtRixjQUFjRSxlQUFldEMsR0FBZ0IsR0FBSXlCLHNCQUFxQnpCLEVBQU8vQyxHQUM3RW1GLGNBQWNHLGFBQWF2QyxHQUFnQixHQUFJMEIsa0JBQWlCMUIsRUFBTy9DLEdBQ3ZFbUYsY0FBY0ksZUFBZXhDLEdBQWdCLEdBQUkyQixzQkFBcUIzQixFQUFPL0MsR0FDN0VtRixjQUFjSyxXQUFXekMsR0FBZ0IsR0FBSTBCLGtCQUFpQjFCLEVBQU8vQyxHQUNyRW1GLGNBQWNNLGVBQWUxQyxHQUFnQixHQUFJK0IsaUJBQWdCL0IsRUFBTy9DLEdBQ3hFbUYsY0FBY08sYUFBYTNDLEdBQWdCLEdBQUltQyxlQUFjbkMsRUFBTy9DLElBQ3hFZ0QsUUFBUTJDLElBQUksZ0NBQWtDNUMsR0FDdkMsR0FBSW1DLGVBQWNuQyxFQUFPL0MsSUFHcEM3QixtQkFBbUI0RSxHQUNmLE1BQVFBLGFBQWlCNkMsbUJBQW1DLFVBQWY3QyxFQUFNOEMsTUFDOUM5QyxZQUFpQjNDLDBCQUFrQyxVQUFwQjJDLEVBQU01QixXQUFtRSxVQUExQzRCLEVBQU1KLGFBQWEsUUFBUWxCLFdBR2xHdEQsc0JBQXNCNEUsR0FDbEIsTUFBUUEsYUFBaUI2QyxtQkFBbUMsYUFBZjdDLEVBQU04QyxNQUM5QzlDLFlBQWlCM0MsMEJBQWtDLFVBQXBCMkMsRUFBTTVCLFdBQW1FLGFBQTFDNEIsRUFBTUosYUFBYSxRQUFRbEIsV0FHbEd0RCxvQkFBb0I0RSxHQUNoQixNQUFRQSxhQUFpQjZDLG1CQUFtQyxXQUFmN0MsRUFBTThDLE1BQzlDOUMsWUFBaUIzQywwQkFBa0MsVUFBcEIyQyxFQUFNNUIsV0FBbUUsV0FBMUM0QixFQUFNSixhQUFhLFFBQVFsQixXQUdsR3RELGtCQUFrQjRFLEdBQ2QsR0FBSUEsWUFBaUI2QyxrQkFBa0IsQ0FDbkMsR0FBbUIsU0FBZjdDLEVBQU04QyxLQUFtQixPQUFPLENBQ3BDLElBQW1CLGFBQWY5QyxFQUFNOEMsS0FBdUIsT0FBTyxDQUN4QyxJQUFtQixVQUFmOUMsRUFBTThDLEtBQW9CLE9BQU8sQ0FDckMsSUFBbUIsU0FBZjlDLEVBQU04QyxLQUFtQixPQUFPLENBQ3BDLElBQW1CLFNBQWY5QyxFQUFNOEMsS0FBbUIsT0FBTyxFQUV4QyxHQUFHOUMsWUFBaUIzQywwQkFBa0MsVUFBcEIyQyxFQUFNNUIsVUFBdUIsQ0FDM0QsR0FBNkMsU0FBMUM0QixFQUFNSixhQUFhLFFBQVFsQixXQUF5QixPQUFPLENBQzlELElBQTZDLGFBQTFDc0IsRUFBTUosYUFBYSxRQUFRbEIsV0FBNkIsT0FBTyxDQUNsRSxJQUE2QyxVQUExQ3NCLEVBQU1KLGFBQWEsUUFBUWxCLFdBQTBCLE9BQU8sQ0FDL0QsSUFBNkMsU0FBMUNzQixFQUFNSixhQUFhLFFBQVFsQixXQUF5QixPQUFPLENBQzlELElBQTZDLFNBQTFDc0IsRUFBTUosYUFBYSxRQUFRbEIsV0FBeUIsT0FBTyxFQUVsRSxPQUFPLEVBR1h0RCxzQkFBc0I0RSxHQUNsQixNQUFRQSxhQUFpQitDLE9BQTJCLGNBQW5CL0MsRUFBTWdELFVBQ2xDaEQsWUFBaUJnQyx1QkFHMUI1RyxzQkFBc0I0RSxHQUNsQixNQUFRQSxhQUFpQmlELHNCQUNwQmpELFlBQWlCM0MsMEJBQWtDLGFBQXBCMkMsRUFBTTVCLFVBRzlDaEQsb0JBQW9CNEUsR0FDaEIsTUFBUUEsYUFBaUJ6QyxjQUNwQnlDLFlBQWlCM0MsK0JDdkVqQjZGLE1BRVQ5SCxjQUFjK0gsR0FDVixHQUFJcEYsR0FBYSxHQUFJVix5QkFBVzhGLEVBQ2hDLE9BQU9mLGVBQWNnQixJQUFJckYsR0FHN0IzQyxtQkFBbUJvQixFQUFRNkcsRUFBV0MsR0FDaEIsT0FBZkQsR0FDQzdHLEVBQVErRyxrQkFBa0IsUUFBUUYsR0FFcEIsT0FBZkMsR0FDQzlHLEVBQVErRyxrQkFBa0IsUUFBUUQsR0FJMUNsSSxTQUFTTSxFQUFLOEgsRUFBS0gsRUFBV0MsR0FDMUIsR0FBSTlHLEdBQVUwRyxLQUFLTyxPQUFPLElBSTFCLE9BSEFqSCxHQUFRZ0UsU0FBUzlFLEdBQ2pCYyxFQUFRK0csa0JBQWtCLE9BQU9DLEdBQ2pDTixLQUFLUSxZQUFZbEgsRUFBUTZHLEVBQVdDLEdBQzdCOUcsR0NwQmYsS0FBTXZCLE9BQU0sR0FBSUMsb0JBQU8sZ0JBRWpCeUksT0FBUyxHQUFJaEcsaUJBQ2JpRyxjQUFnQixHQUFJeEcsdUJBRWJ5RyxjQUVUekksZ0JBQWdCTSxFQUFNb0ksR0FDbEIsR0FBR0gsT0FBTzlFLFNBQVNuRCxHQUNmaUksT0FBT0ksSUFBSXJJLEdBQU1zSSxTQUFTLEdBQUlqQyxpQkFBZ0IrQixFQUFPRyx3QkFDbEQsQ0FFSCxHQUFJQyxHQUFlaEIsS0FBS08sT0FBTyxRQUMvQlMsR0FBYVgsa0JBQWtCLEtBQUs3SCxHQUNwQ3dJLEVBQWFGLFNBQVMsR0FBSWpDLGlCQUFnQitCLEVBQU9HLG9CQUNqRE4sT0FBTzdGLElBQUlwQyxFQUFNd0ksSUFJekI5SSxtQkFBbUJNLEdBQ1prSSxjQUFjL0UsU0FBU25ELElBQ3RCbUksYUFBYU0sYUFBYXpJLEdBRTlCaUksT0FBT1MsT0FBTzFJLEdBR2xCTixvQkFBb0JNLEdBQ2hCLElBQUlpSSxPQUFPOUUsU0FBU25ELEdBRWhCLFdBREFULE9BQUl1QyxNQUFNLHlCQUEyQjlCLEVBR3RDa0ksZUFBYy9FLFNBQVNuRCxLQUN0QmtJLGNBQWNRLE9BQU8xSSxHQUNyQmdGLFdBQVdJLGNBQWNwRixJQUlqQ04sbUJBQW1CTSxHQUNmLElBQUlpSSxPQUFPOUUsU0FBU25ELEdBRWhCLFdBREFULE9BQUl1QyxNQUFNLHlCQUEyQjlCLEVBR3JDa0ksZUFBYy9FLFNBQVNuRCxLQUN2QmtJLGNBQWMxRSxJQUFJeEQsR0FDbEJnRixXQUFXSyxpQkFBaUI0QyxPQUFPSSxJQUFJckksV0NoRHRDMkksUUFPVGpKLFdBQVdVLEdBQ1AsR0FBSUMsSUFDQXVJLE9BQVEsTUFDUkMsS0FBTSxPQUNOQyxTQUFVLFNBRWQsT0FBT3JKLGlCQUFnQmMsTUFBTUgsRUFBSTJJLFdBQVcxSSxHQVNoRFgsWUFBWVUsRUFBSzRJLEdBQ2IsR0FBSTNJLElBQ0E0SSxLQUFNQyxLQUFLQyxVQUFVSCxHQUNyQkksU0FDSUMsYUFBYywwQkFDZEMsZUFBZ0Isb0JBRXBCVixPQUFRLE9BQ1JDLEtBQU0sT0FDTkMsU0FBVSxTQUVkLE9BQU9ySixpQkFBZ0JjLE1BQU1ILEVBQUkySSxXQUFZMUksR0FTakRYLFdBQVdVLEVBQUs0SSxHQUNaLEdBQUkzSSxJQUNBNEksS0FBTUMsS0FBS0MsVUFBVUgsR0FDckJKLE9BQVEsTUFDUkMsS0FBTSxPQUNOQyxTQUFVLFNBQ1ZNLFNBQ0lDLGFBQWMsMEJBQ2RDLGVBQWdCLG9CQUd4QixPQUFPN0osaUJBQWdCYyxNQUFNSCxFQUFJMkksV0FBWTFJLEdBU2pEWCxhQUFhVSxFQUFLNEksR0FDZCxHQUFJM0ksSUFDQTRJLEtBQU1DLEtBQUtDLFVBQVVILEdBQ3JCSixPQUFRLFFBQ1JDLEtBQU0sT0FDTkMsU0FBVSxTQUNWTSxTQUNJQyxhQUFjLDBCQUNkQyxlQUFnQixvQkFHeEIsT0FBTzdKLGlCQUFnQmMsTUFBTUgsRUFBSTJJLFdBQVkxSSxHQVFqRFgsY0FBY1UsR0FDVixHQUFJQyxJQUNBdUksT0FBUSxTQUNSQyxLQUFNLE9BQ05DLFNBQVUsU0FFZCxPQUFPckosaUJBQWdCYyxNQUFNSCxFQUFJMkksV0FBWTFJLFNDcEZ4Q2tKLFdBUVQ3SixZQUFZOEosRUFBZ0JDLEVBQWFDLEdBQ3JDckksS0FBS21JLGVBQWlCQSxFQUN0Qm5JLEtBQUtxSSxXQUFhQSxFQUNsQnJJLEtBQUtvSSxZQUFjQSxFQUd2Qi9KLFNBQ0kyQixLQUFLb0ksWUFBWWYsU0FNckJoSixpQkFDSSxNQUFPMkIsTUFBS29JLFlBR2hCL0osb0JBQ0ksTUFBTzJCLE1BQUttSSxlQU1oQjlKLElBQUlDLEdBQ0EsTUFBTzBCLE1BQUtxSSxXQUFXckIsSUFBSTFJLEdBRy9CRCxJQUFLQyxFQUFJRyxHQUNMdUIsS0FBS3FJLFdBQVdyQixJQUFJMUksR0FBSXlDLElBQUl0QyxHQUdoQ0osY0FBY0MsR0FDVjBCLEtBQUtxSSxXQUFXckIsSUFBSTFJLEdBQUlrRixRQUc1Qm5GLFNBQVVDLEVBQUlHLEdBQ1Z1QixLQUFLcUksV0FBV3JCLElBQUkxSSxHQUFJMkksU0FBU3hJLEdBR3JDSixTQUFVQyxFQUFJRyxHQUNWdUIsS0FBS3FJLFdBQVdyQixJQUFJMUksR0FBSW1GLFNBQVNoRixHQUdyQ0osYUFBY0MsRUFBSUcsR0FDZHVCLEtBQUtxSSxXQUFXckIsSUFBSTFJLEdBQUl5RyxhQUFhdEcsU0N0RGhDNkosS0FFVGpLLFlBQVlJLEdBT1IsR0FOQXVCLEtBQUt1SSxTQUFXLEtBQ2hCdkksS0FBS3dJLEtBQU8sS0FDWnhJLEtBQUt5SSxLQUFPLEtBQ1p6SSxLQUFLMEksU0FBVyxHQUFJckksa0JBQ3BCTCxLQUFLMkksYUFBZSxHQUFJL0gsaUJBQ3hCWixLQUFLNEksU0FBVyxLQUNILE9BQVZuSyxFQUFILENBR0EsR0FBSW9LLEdBQVk3SSxLQUFLOEksa0JBQWtCckssRUFDdEIsUUFBZG9LLElBR2tCLE9BQWxCN0ksS0FBS3VJLFdBQ0pNLEVBQVk3SSxLQUFLK0ksY0FBY0YsSUFFbEIsT0FBZEEsSUFHYyxPQUFkN0ksS0FBS3dJLE9BQ0pLLEVBQVk3SSxLQUFLZ0osY0FBY0gsSUFFbEIsT0FBZEEsR0FJYyxRQURqQkEsRUFBWTdJLEtBQUtpSixjQUFjSixLQUtkLFFBRGpCQSxFQUFZN0ksS0FBS2tKLG9CQUFvQkwsS0FJckM3SSxLQUFLbUosa0JBQWtCTixNQUczQnhLLGNBQ0ksTUFBTzJCLE1BQUt1SSxTQUdoQmxLLFVBQ0ksTUFBTzJCLE1BQUt3SSxLQUdoQm5LLFVBQ0ksTUFBTzJCLE1BQUt5SSxLQUdoQnBLLGNBQ0ksTUFBTzJCLE1BQUswSSxTQUdoQnJLLFFBQVErSyxHQUNKLE1BQU9wSixNQUFLMEksU0FBUzFCLElBQUlvQyxHQUc3Qi9LLGdCQUNJMkIsS0FBSzBJLFNBQVcsR0FBSXJJLGtCQUd4QmhDLGtCQUNJLE1BQU8yQixNQUFLMkksYUFHaEJ0SyxvQkFDSTJCLEtBQUsySSxhQUFlLEdBQUkvSCxpQkFHNUJ2QyxhQUFhYyxHQUNULE1BQU9hLE1BQUsySSxhQUFhM0IsSUFBSTdILEdBR2pDZCxhQUFhYyxFQUFJVixHQUNidUIsS0FBSzJJLGFBQWE1SCxJQUFJNUIsRUFBSVYsR0FHOUJKLFlBQVl1SyxHQUNSNUksS0FBSzRJLFNBQVdBLEVBR3BCdkssUUFBUUksR0FDSnVCLEtBQUtpSixjQUFjeEssR0FHdkJKLGVBQWVJLEdBQ1h1QixLQUFLMkksYUFBZTNJLEtBQUtrSixvQkFBb0J6SyxHQUdqREosY0FDSSxNQUFPMkIsTUFBSzRJLFNBR2hCdkssa0JBQWtCSSxHQUNkLElBQTRCLElBQXpCQSxFQUFNNEssUUFBUSxNQUNiLE1BQU81SyxFQUVYLElBQUk2SyxHQUFRN0ssRUFBTThLLE1BQU0sS0FDeEIsUUFBOEIsSUFBM0JELEVBQU0sR0FBR0QsUUFBUSxLQUNUNUssR0FFWHVCLEtBQUt1SSxTQUFXZSxFQUFNLEdBQ0wsR0FBZEEsRUFBTXhJLE9BQ0UsS0FFSnJDLEVBQU0rSyxRQUFRRixFQUFNLEdBQUssS0FBSyxLQUd6Q2pMLGNBQWNJLEdBQ1YsR0FBSTZLLEdBQVE3SyxFQUFNOEssTUFBTSxLQUNwQkUsRUFBV0gsRUFBTSxFQUtyQixRQUo4QixJQUEzQkcsRUFBU0osUUFBUSxPQUNoQkksRUFBV0EsRUFBU0YsTUFBTSxLQUFLLElBRW5DdkosS0FBS3dJLEtBQU9pQixFQUNUSCxFQUFNeEksT0FBUyxFQUNQckMsRUFBTStLLFFBQVFDLEVBQVMsSUFFM0IsS0FHWHBMLGNBQWNJLEdBQ1YsSUFBSUEsRUFBTXVELFdBQVcsS0FDakIsTUFBT3ZELEVBRVgsSUFBSWlMLEdBQVdqTCxFQUFNOEssTUFBTSxLQUFLLEdBQUdJLFVBQVUsRUFFN0MsT0FEQTNKLE1BQUt5SSxLQUFPaUIsRUFDTGpMLEVBQU0rSyxRQUFRLElBQU1FLEVBQVMsSUFHeENyTCxjQUFjSSxHQUNWLEdBQUlvSyxHQUFZcEssQ0FDaEIsS0FBMkIsSUFBeEJBLEVBQU00SyxRQUFRLE1BQ1RDLEVBQVE3SyxFQUFNOEssTUFBTSxNQUNmekksT0FBUyxJQUNkK0gsRUFBWXBLLEVBQU1rTCxVQUFVbEwsRUFBTTRLLFFBQVEsT0FFOUM1SyxFQUFRNkssRUFBTSxPQUNYLEtBQTJCLElBQXhCN0ssRUFBTTRLLFFBQVEsS0FBWSxDQUNoQyxHQUFJQyxHQUFRN0ssRUFBTThLLE1BQU0sSUFDckJELEdBQU14SSxPQUFTLElBQ2QrSCxFQUFZcEssRUFBTWtMLFVBQVVsTCxFQUFNNEssUUFBUSxPQUU5QzVLLEVBQVE2SyxFQUFNLEdBRWY3SyxFQUFNdUQsV0FBVyxPQUNoQnZELEVBQVFBLEVBQU1rTCxVQUFVLEdBRTVCLElBQUlDLEdBQVksR0FBSXZKLGtCQUFLNUIsRUFBTThLLE1BQU0sS0FNckMsT0FMQXZKLE1BQUswSSxTQUFXLEdBQUlySSxrQkFDcEJ1SixFQUFVbkksUUFBUSxTQUFTaEQsRUFBTXlCLEdBRTdCLE1BREFBLEdBQU93SSxTQUFTdkcsSUFBSTBILFVBQVVwTCxLQUN2QixHQUNUdUIsTUFDSzZJLEVBR1h4SyxvQkFBb0JJLEdBQ2hCLEdBQUlvSyxHQUFZcEssQ0FDaEIsS0FBMkIsSUFBeEJBLEVBQU00SyxRQUFRLEtBQ2IsTUFBTzVLLElBR2dCLEtBRDNCQSxFQUFRQSxFQUFNa0wsVUFBVWxMLEVBQU00SyxRQUFRLEtBQUssSUFDbENBLFFBQVEsT0FDYlIsRUFBWXBLLEVBQU1rTCxVQUFVbEwsRUFBTTRLLFFBQVEsTUFDMUM1SyxFQUFRQSxFQUFNa0wsVUFBVSxFQUFFbEwsRUFBTTRLLFFBQVEsTUFFNUMsSUFBSVMsR0FBVyxHQUFJekosa0JBQUs1QixFQUFNOEssTUFBTSxNQUNoQ1osRUFBZSxHQUFJL0gsZ0JBU3ZCLE9BUkFrSixHQUFTckksUUFBUSxTQUFTaEQsRUFBTXlCLEdBQzVCLEdBQUk2SixHQUFXdEwsRUFBTThLLE1BQU0sSUFJM0IsT0FIR1EsR0FBU2pKLFFBQVUsR0FDbEI2SCxFQUFhNUgsSUFBSThJLFVBQVVFLEVBQVMsSUFBSUYsVUFBVUUsRUFBUyxNQUV4RCxHQUNUL0osTUFDRkEsS0FBSzJJLGFBQWVBLEVBQ2JFLEVBR1h4SyxrQkFBa0JJLElBQ2EsSUFBeEJBLEVBQU00SyxRQUFRLE9BQ2JySixLQUFLNEksU0FBV25LLEVBQU1rTCxVQUFVbEwsRUFBTTRLLFFBQVEsS0FBSyxJQUkzRGhMLFdBQ0ksR0FBSUksR0FBUSxFQUNTLFFBQWxCdUIsS0FBS3VJLFdBQ0o5SixFQUFRQSxFQUFRdUIsS0FBS3VJLFNBQVcsTUFFbkIsT0FBZHZJLEtBQUt3SSxPQUNKL0osR0FBZ0J1QixLQUFLd0ksTUFFUixPQUFkeEksS0FBS3lJLE9BQ0poSyxFQUFRQSxFQUFRLElBQU11QixLQUFLeUksTUFHL0J6SSxLQUFLMEksU0FBU2pILFFBQVEsU0FBU3VJLEVBQVM5SixHQUVwQyxNQURBekIsR0FBUUEsRUFBUSxJQUFNdUwsR0FDZixHQUNUaEssS0FFRixJQUFJaUssSUFBaUIsQ0FhckIsT0FaQWpLLE1BQUsySSxhQUFhbEgsUUFBUSxTQUFTeUksRUFBYUMsRUFBZWpLLEdBQ3hEK0osR0FDQ0EsR0FBZSxFQUNmeEwsR0FBZ0IsS0FFaEJBLEdBQWdCLElBRXBCQSxFQUFRQSxFQUFRMkwsVUFBVUYsR0FBZ0IsSUFBTUUsVUFBVUQsSUFDNURuSyxNQUNtQixPQUFsQkEsS0FBSzRJLFdBQ0puSyxFQUFRQSxFQUFRLElBQU11QixLQUFLNEksVUFFeEJuSyxRQzlORjRMLFFBTVRoTSxZQUFZaU0sR0FHUnRLLEtBQUtzSyxhQUFlQSxFQU14QmpNLGtCQUNJLE1BQU8yQixNQUFLc0ssY0NUcEIsS0FBTXBNLE9BQU0sR0FBSUMsb0JBQU8sdUJBRVZvTSxnQkFFVGxNLGNBRUkyQixLQUFLd0ssVUFBWSxHQUFJNUosaUJBR3JCWixLQUFLeUssYUFBZSxHQUFJN0osaUJBR3hCWixLQUFLMEssZ0JBQWtCLEVBR3ZCMUssS0FBSzJLLFNBQVcsS0FTcEJ0TSxJQUFJTSxFQUFLaUksRUFBTzdILE9BQ0Q0QixLQUFSNUIsR0FBNkIsT0FBUkEsR0FDcEJpQixLQUFLeUssYUFBYTFKLElBQUlwQyxFQUFNSSxHQUVoQ2lCLEtBQUt3SyxVQUFVekosSUFBSXBDLEVBQU1pSSxHQU83QnZJLElBQUlNLEdBQ0EsTUFBT3FCLE1BQUt3SyxVQUFVeEQsSUFBSXJJLEdBTzlCTixTQUFTTSxHQUNMLE1BQU9xQixNQUFLd0ssVUFBVTFJLFNBQVNuRCxHQU9uQ04sS0FBS3NNLEdBQ0QzSyxLQUFLMkssU0FBV0EsRUFDaEIzSyxLQUFLNEssV0FBVzVLLE1BT3BCM0IsV0FBV3dNLEdBQ1AsR0FBb0IsT0FBakJDLElBQUlILGNBQTJDaEssS0FBdEJrSyxFQUFTRixVQUEyQkUsRUFBU0gsa0JBQW9CRyxFQUFTTCxVQUFVTyxPQUFPLENBQ25ILEdBQUlDLEdBQWVILEVBQVNGLFFBQzVCRSxHQUFTRixTQUFXLEtBQ3BCSyxFQUFhQyxRQVNwQjVNLEtBQUtNLEVBQU1JLEdBRVIsTUFEQWlCLE1BQUswSyxrQkFDRSxHQUFJUSxTQUFRLEFBQUNDLElBQ2hCN0QsT0FBT04sSUFBSWpJLEdBQUtxTSxLQUFLLEFBQUNDLElBQ2xCLElBQUlBLEVBQVNDLEdBQ1QsS0FBTSw2QkFBK0IzTSxFQUFPLE9BQVNJLENBRXpEc00sR0FBU0UsT0FBT0gsS0FBSyxBQUFDRyxJQUNsQnZMLEtBQUtlLElBQUlwQyxFQUFLLEdBQUkwTCxRQUFPa0IsR0FBTXhNLEVBQy9CaUIsTUFBSzRLLFdBQVc1SyxLQUNoQm1MLFdBV2hCOU0sdUJBQXVCbU4sR0FFbkIsTUFBTyxJQUFJTixTQUFRLENBQUNDLEVBQVFNLEtBQ3hCLEdBQUlDLEdBQVMsQ0FDYixLQUFJRixHQUFtQyxHQUFyQkEsRUFBV1QsT0FFekIsV0FEQUksSUFHSkssR0FBVy9KLFFBQVEsQ0FBQ3RDLEVBQUtWLEVBQU95QixLQUM1QixHQUFHRixLQUFLOEIsU0FBUzNDLEdBRWIsUUFEQXVNLEdBQ2FGLEVBQVdULFNBQ3BCSSxLQUVPLEVBSWZuTCxNQUFLMkwsWUFBWXhNLEVBQUssR0FBSW1KLEtBQUk3SixJQUV6QjJNLFVBQ0dNLEdBQ0EsSUFBR0EsR0FBVUYsRUFBV1QsT0FHcEIsTUFGQUksTUFFTyxJQUlkUyxNQUFNLEFBQUNDLElBQ0pKLEVBQU9JLEVBRVAsUUFBTyxHQUVmLFFBQU8sR0FDVDdMLFFBU1YzQixZQUFZTSxFQUFNSSxHQUdkLE1BRkFiLE9BQUk0TixLQUFLLGtCQUFvQm5OLEVBQU8sT0FBU0ksRUFBSTJJLFlBRTFDLEdBQUl3RCxTQUFRLEFBQUNDLElBQ2hCN0QsT0FBT04sSUFBSWpJLEdBQUtxTSxLQUFLLEFBQUNDLElBQ2xCLElBQUlBLEVBQVNDLEdBQ1QsS0FBTSw2QkFBK0IzTSxFQUFPLE9BQVNJLENBRXpEc00sR0FBU0UsT0FBT0gsS0FBSyxBQUFDRyxJQUNsQnZMLEtBQUtlLElBQUlwQyxFQUFLLEdBQUkwTCxRQUFPa0IsR0FBTXhNLEVBQy9Cb00saUJDekpQWSxVQU1UMU4sWUFBWTJOLEdBR1JoTSxLQUFLZ00sZUFBaUJBLEVBTTFCM04sb0JBQ0ksTUFBTzJCLE1BQUtnTSxnQkNYcEIsS0FBTTlOLE9BQU0sR0FBSUMsb0JBQU8seUJBRVY4TixrQkFFVDVOLGNBRUkyQixLQUFLa00sWUFBYyxHQUFJdEwsaUJBR3ZCWixLQUFLbU0sZUFBaUIsR0FBSXZMLGlCQUcxQlosS0FBS29NLGtCQUFvQixFQUd6QnBNLEtBQUsySyxTQUFXLEtBR2hCM0ssS0FBS3FNLGVBQWlCLEtBTzFCaE8sa0JBQWtCZ08sR0FDZHJNLEtBQUtxTSxlQUFpQkEsRUFTMUJoTyxJQUFJTSxFQUFLMk4sRUFBU3ZOLE9BQ0g0QixLQUFSNUIsR0FBNkIsT0FBUkEsR0FDcEJpQixLQUFLbU0sZUFBZXBMLElBQUlwQyxFQUFNSSxHQUVsQ2lCLEtBQUtrTSxZQUFZbkwsSUFBSXBDLEVBQU0yTixHQU8vQmpPLElBQUlNLEdBQ0EsTUFBT3FCLE1BQUtrTSxZQUFZbEYsSUFBSXJJLEdBT2hDTixTQUFTTSxHQUNMLE1BQU9xQixNQUFLa00sWUFBWXBLLFNBQVNuRCxHQU9yQ04sS0FBS3NNLEdBQ0QzSyxLQUFLMkssU0FBV0EsRUFDaEIzSyxLQUFLNEssV0FBVzVLLE1BT3BCM0IsV0FBV3dNLEdBQ1AsR0FBb0IsT0FBakJDLElBQUlILGNBQTJDaEssS0FBdEJrSyxFQUFTRixVQUEyQkUsRUFBU3VCLG9CQUFzQnZCLEVBQVNxQixZQUFZbkIsT0FBTyxDQUN2SCxHQUFJQyxHQUFlSCxFQUFTRixRQUM1QkUsR0FBU0YsU0FBVyxLQUNwQkssRUFBYUMsUUFTckI1TSxLQUFLTSxFQUFNSSxHQVFQLE1BUDJCLFFBQXhCaUIsS0FBS3FNLGdCQUNKdE4sRUFBSXdOLGNBQWNDLFFBQ2R4TSxLQUFLcU0sZUFBaUIsSUFDdEJ0TixFQUFJd04sY0FBY0UsV0FHMUJ6TSxLQUFLb00sb0JBQ0UsR0FBSWxCLFNBQVEsQUFBQ0MsSUFDaEI3RCxPQUFPTixJQUFJakksR0FBS3FNLEtBQUssQUFBQ0MsSUFDbEIsSUFBSUEsRUFBU0MsR0FDVCxLQUFNLCtCQUFpQzNNLEVBQU8sT0FBU0ksQ0FFM0RzTSxHQUFTRSxPQUFPSCxLQUFLLEFBQUNHLElBQ2xCdkwsS0FBS2UsSUFBSXBDLEVBQUssR0FBSW9OLFVBQVNSLEdBQU14TSxFQUNqQ2lCLE1BQUs0SyxXQUFXNUssS0FDaEJtTCxXQVVoQjlNLDBCQUEwQm1OLEdBRXRCLE1BQU8sSUFBSU4sU0FBUSxDQUFDQyxFQUFRTSxLQUN4QixHQUFJQyxHQUFTLENBQ2IsS0FBSUYsR0FBbUMsR0FBckJBLEVBQVdULE9BRXpCLFdBREFJLElBR0pLLEdBQVcvSixRQUFRLENBQUN0QyxFQUFLVixFQUFPeUIsS0FDNUIsR0FBR0YsS0FBSzhCLFNBQVMzQyxHQUViLFFBREF1TSxHQUNhRixFQUFXVCxTQUNwQkksS0FFTyxFQUlmbkwsTUFBSzJMLFlBQVl4TSxFQUFLLEdBQUltSixLQUFJN0osSUFFekIyTSxVQUNHTSxHQUNBLElBQUdBLEdBQVVGLEVBQVdULE9BR3BCLE1BRkFJLE1BRU8sSUFJZFMsTUFBTSxBQUFDQyxJQUNKSixFQUFPSSxFQUVQLFFBQU8sR0FFZixRQUFPLEdBQ1Q3TCxRQVNWM0IsWUFBWU0sRUFBTUksR0FRZCxNQVAyQixRQUF4QmlCLEtBQUtxTSxnQkFDSnROLEVBQUl3TixjQUFjQyxRQUNkeE0sS0FBS3FNLGVBQWlCLElBQ3RCdE4sRUFBSXdOLGNBQWNFLFdBRzFCdk8sTUFBSTROLEtBQUssb0JBQXNCbk4sRUFBTyxPQUFTSSxFQUFJMkksWUFDNUMsR0FBSXdELFNBQVEsQUFBQ3dCLElBQ2hCcEYsT0FBT04sSUFBSWpJLEdBQUtxTSxLQUFLLEFBQUNDLElBQ2xCLElBQUlBLEVBQVNDLEdBQ1QsS0FBTSwrQkFBaUMzTSxFQUFPLE9BQVNJLENBRTNEc00sR0FBU0UsT0FBT0gsS0FBSyxBQUFDRyxJQUNsQnZMLEtBQUtlLElBQUlwQyxFQUFLLEdBQUlvTixVQUFTUixHQUFNeE0sRUFDakMyTixpQkM1S2R4TyxPQUFNLEdBQUlDLG9CQUFPLDJCQU1Wd08saUJBT1R0TyxZQUFZdU8sR0FDUjVNLEtBQUs0TSxpQkFBbUJBLEVBUTVCdk8sS0FBS3dPLEdBQ0QsR0FBSVgsR0FBYyxHQUFJdEwsZ0JBT3RCLE9BTkFpTSxHQUFPQyxvQkFBb0JyTCxRQUFRLENBQUN0QyxFQUFLNE4sRUFBTzdNLEtBQ3pDNk0sRUFBTUMsb0JBQW9CQyxjQUFnQkYsRUFBTUMsb0JBQW9CRSxnQkFDbkVoQixFQUFZbkwsSUFBSWdNLEVBQU1DLG9CQUFvQkUsZUFBZ0JILEVBQU1DLG9CQUFvQkMsYUFFeEYsUUFBTyxHQUNSak4sTUFDSUEsS0FBSzRNLGlCQUFpQk8sMEJBQTBCakIsU0M5QnpEaE8sT0FBTSxHQUFJQyxvQkFBTyxxQkFNVmlQLGNBT1QvTyxZQUFZZ1AsR0FDUnJOLEtBQUtxTixlQUFpQkEsRUFRMUJoUCxLQUFLd08sR0FDRCxHQUFJckMsR0FBWSxHQUFJNUosZ0JBT3BCLE9BTkFpTSxHQUFPQyxvQkFBb0JyTCxRQUFRLENBQUN0QyxFQUFLNE4sRUFBTzdNLEtBQ3pDNk0sRUFBTUMsb0JBQW9CTSxZQUFjUCxFQUFNQyxvQkFBb0JFLGdCQUNqRTFDLEVBQVV6SixJQUFJZ00sRUFBTUMsb0JBQW9CRSxlQUFnQkgsRUFBTUMsb0JBQW9CTSxXQUV0RixRQUFPLEdBQ1J0TixNQUNJQSxLQUFLcU4sZUFBZUUsdUJBQXVCL0MsSUMzQjFELEtBQU10TSxPQUFNLEdBQUlDLG9CQUFPLGlDQU1WcVAsMEJBRVRuUCxjQUtJMkIsS0FBSzRNLGlCQUFtQlgsaUJBS3hCak0sS0FBS3FOLGVBQWlCOUMsZUFRMUJsTSxXQUFXb1AsR0FDUHpOLEtBQUswTixnQkFBa0IsR0FBSWYsaUJBQWdCM00sS0FBSzRNLGtCQUNoRDVNLEtBQUsyTixhQUFlLEdBQUlQLGNBQWFwTixLQUFLcU4sZ0JBUTlDaFAsY0FBY3dPLEdBQ1YsTUFBTzNCLFNBQVEwQyxLQUVQNU4sS0FBSzBOLGdCQUFnQkcsS0FBS2hCLEdBQzFCN00sS0FBSzJOLGFBQWFFLEtBQUtoQixXQzdDMUJpQixrQkFFVHpQLHNCQUF1QkMsR0FDbkIsR0FBR3lQLFFBQVFqTSxTQUFTeEQsR0FBSyxDQUNyQixHQUFJMFAsR0FBU0QsUUFBUS9HLElBQUkxSSxFQUV6QixPQURBeVAsU0FBUWhOLElBQUl6QyxFQUFHMFAsRUFBTyxHQUNmMVAsRUFBSyxJQUFNMFAsRUFHdEIsTUFEQUQsU0FBUWhOLElBQUl6QyxFQUFHLEdBQ1JBLEdBS2YsR0FBSXlQLFNBQVUsR0FBSW5OLHNCQ1pMcU4sT0FFVDVQLFlBQVk2UCxHQUNSbE8sS0FBS2tPLE1BQVFBLEVBQ3VCLGFBQWpDbE8sS0FBS2tPLE1BQU1uSSxLQUFLb0ksZUFDZm5PLEtBQUtrTyxNQUFNRSxhQUFhQyxRQUFRLGFBQWMsTUFJdERoUSxpQkFDSTJCLEtBQUtrTyxNQUFNSSxpQkFNZmpRLGFBQ0ksTUFBTzJCLE1BQUtrTyxNQUFNSyxRQU10QmxRLGFBQ0ksTUFBTzJCLE1BQUtrTyxNQUFNTSxRQU10Qm5RLGFBQ0ksTUFBTzJCLE1BQUtrTyxNQUFNTyxRQU10QnBRLGFBQ0ksTUFBTzJCLE1BQUtrTyxNQUFNUSxRQUd0QnJRLFlBQ0ksTUFBT2dILGVBQWNnQixJQUFJckcsS0FBS2tPLE1BQU1TLFFBR3hDdFEsYUFDSSxNQUFPMkIsTUFBS2tPLE1BQU1VLFNDNUMxQixLQUFNMVEsT0FBTSxHQUFJQyxvQkFBTyxzQkFFVjBRLGVBRVR4USxjQUNJMkIsS0FBSzhPLFVBQVksR0FBSWxPLGlCQUNyQlosS0FBSytPLGdCQUFrQixHQUFJbk8saUJBQzNCWixLQUFLZ1AsZUFBaUIsR0FBSXBPLGlCQVU5QnZDLE9BQU9vQixFQUFTbUMsRUFBV3FOLEVBQVc5RyxHQUNsQyxHQUFJK0csR0FBa0JELEVBQVksSUFBTTlHLEVBQ3BDZ0gsRUFBbUJuUCxJQUN2QlAsR0FBUTJQLFlBQVl4TixFQUFXLFNBQVNzTSxHQUFTaUIsRUFBaUJFLFFBQVFILEVBQWlCRCxFQUFXZixLQVMxRzdQLE9BQU80USxFQUFXSyxFQUFnQkMsR0FDOUJOLEVBQVlBLEVBQVksSUFBTU0sRUFDMUJ2UCxLQUFLOE8sVUFBVVUsT0FBT1AsSUFDdEJqUCxLQUFLOE8sVUFBVS9OLElBQUlrTyxFQUFVLEdBQUk1TyxtQkFFckNMLEtBQUs4TyxVQUFVOUgsSUFBSWlJLEdBQVc5TSxJQUFJbU4sR0FHdENqUixhQUFhNFEsRUFBVVEsRUFBY0MsR0FDN0IxUCxLQUFLK08sZ0JBQWdCUyxPQUFPUCxJQUM1QmpQLEtBQUsrTyxnQkFBZ0JoTyxJQUFJa08sRUFBVSxHQUFJNU8sa0JBRTNDLElBQUlpUCxHQUFpQixHQUFJSyw0QkFBZUYsRUFBY0MsRUFDdEQxUCxNQUFLK08sZ0JBQWdCL0gsSUFBSWlJLEdBQVc5TSxJQUFJbU4sR0FHNUNqUixZQUFZNFEsRUFBVVEsRUFBY0MsR0FDNUIxUCxLQUFLZ1AsZUFBZVEsT0FBT1AsSUFDM0JqUCxLQUFLZ1AsZUFBZWpPLElBQUlrTyxFQUFVLEdBQUk1TyxtQkFFMUNMLEtBQUtnUCxlQUFlaEksSUFBSWlJLEdBQVc5TSxJQUFJLEdBQUl3Tiw0QkFBZUYsRUFBY0MsSUFHNUVyUixRQUFRdVIsRUFBbUJYLEVBQVdmLEdBRWxDLEdBREFsTyxLQUFLNlAsYUFBYVosRUFBV2YsR0FDMUJsTyxLQUFLOE8sVUFBVVUsT0FBT0ksR0FBb0IsQ0FDekMsR0FBSUUsR0FBbUIsR0FBSXpQLGlCQUMzQkwsTUFBSzhPLFVBQVU5SCxJQUFJNEksR0FBbUJuTyxRQUFRLFNBQVNoRCxFQUFPeUIsR0FFMUQsTUFEQTRQLEdBQWlCM04sSUFBSTFELElBQ2QsR0FDVHVCLE1BQ0Y4UCxFQUFpQnJPLFFBQVEsU0FBU2hELEVBQU95QixHQUVyQyxNQURBekIsR0FBTXdNLEtBQUssR0FBSWdELE9BQU1DLEtBQ2QsR0FDVGxPLE1BRU5BLEtBQUsrUCxZQUFZZCxFQUFXZixHQUdoQzdQLGFBQWE0USxFQUFXZixHQUNwQmxPLEtBQUtnUSxhQUFhaFEsS0FBSytPLGdCQUFnQkUsRUFBV2YsR0FHdEQ3UCxZQUFZNFEsRUFBV2YsR0FDbkJsTyxLQUFLZ1EsYUFBYWhRLEtBQUtnUCxlQUFlQyxFQUFXZixHQUdyRDdQLGFBQWF5USxFQUFXRyxFQUFXZixHQUMvQixHQUFHWSxFQUFVVSxPQUFPUCxHQUFZLENBQzVCLEdBQUlhLEdBQW1CLEdBQUl6UCxpQkFDM0J5TyxHQUFVOUgsSUFBSWlJLEdBQVd4TixRQUFRLFNBQVNoRCxFQUFNeUIsR0FFNUMsTUFEQTRQLEdBQWlCM04sSUFBSTFELElBQ2QsR0FDVHVCLE1BQ0Y4UCxFQUFpQnJPLFFBQVEsU0FBU2hELEVBQU15QixHQUVwQyxNQURBekIsR0FBTXdNLEtBQUssR0FBSWdELE9BQU1DLEtBQ2QsR0FDVGxPLGFDbEZEaVEsb0JBRVQ1UixZQUFZNlIsRUFBZUMsRUFBa0JoSSxHQUN6Q25JLEtBQUttSSxlQUFpQkEsRUFHdEJuSSxLQUFLbVEsaUJBQW1CQSxFQUd4Qm5RLEtBQUtrUSxjQUFnQkEsRUFHckJsUSxLQUFLb0ksWUFBYyxLQUVuQnBJLEtBQUtxSSxXQUFhLEdBQUl6SCxpQkFHMUJ2QyxpQkFDSSxNQUFPMkIsTUFBS29JLFlBR2hCL0osZ0JBQ0ksTUFBTzJCLE1BQUtxSSxXQUdoQmhLLG9CQUNJLE1BQU8yQixNQUFLbUksZUFTaEI5SixlQUFnQjJDLEVBQVlvUCxHQUN4QixHQUFJM1EsR0FBVTRGLGNBQWNnQixJQUFJckYsRUFBWW9QLEVBUzVDLE9BUEFwUSxNQUFLcVEsa0JBQWtCNVEsR0FDdkJPLEtBQUtzUSxzQkFBc0I3USxHQUVILE9BQXJCTyxLQUFLb0ksYUFBb0MsT0FBWjNJLElBQzVCTyxLQUFLb0ksWUFBYzNJLEdBR2hCQSxFQUdYcEIsc0JBQXNCb0IsR0FDbEIsR0FBZSxPQUFaQSxPQUFnQ2tCLEtBQVpsQixHQUEyQkEsWUFBbUJRLGFBQXJFLENBR0EsR0FBSWlRLEdBQWdCbFEsS0FBS2tRLGNBQ3JCL0gsRUFBaUJuSSxLQUFLbUksY0FDMUIxSSxHQUFRK0IsZ0JBQWdCQyxRQUFRLFNBQVU4TyxFQUFheFEsRUFBVUcsR0FDN0QsR0FBaUIsT0FBZEgsT0FBb0NZLEtBQWRaLEdBQTJCQSxFQUFVNEIsV0FBV0ssV0FBVyxZQUFhLENBQzdGLEdBQUlpTixHQUFZbFAsRUFBVTRCLFdBQ3RCQyxFQUFZN0IsRUFBVXNCLFNBQzFCNk8sR0FBY00sT0FBTy9RLEVBQVFtQyxFQUFVcU4sRUFBVTlHLEdBRXJELE9BQU8sR0FDVG5JLE9BR04zQixrQkFBa0JvQixHQUNkLEdBQWUsT0FBWkEsT0FBZ0NrQixLQUFabEIsR0FBMkJBLFlBQW1CUSxhQUFyRSxDQUdBLEdBQUkzQixHQUFLLElBQ05tQixHQUFRZ1Isa0JBQWtCLFFBQ3pCblMsRUFBS21CLEVBQVFpUixrQkFBa0IsTUFDL0JqUixFQUFRK0csa0JBQWtCLEtBQUt4RyxLQUFLbVEsaUJBQWlCUSxzQkFBc0JyUyxLQUdyRSxPQUFQQSxHQUNDMEIsS0FBS3FJLFdBQVd0SCxJQUFJekMsRUFBR21CLFVDM0U3QnZCLE9BQU0sR0FBSUMsb0JBQU8seUJBRVZ5UyxrQkFFVHZTLGNBR0kyQixLQUFLa1EsY0FBZ0JyQixjQUdyQjdPLEtBQUtxTixlQUFpQjlDLGVBR3RCdkssS0FBSzRNLGlCQUFtQlgsaUJBR3hCak0sS0FBS21RLGlCQUFtQnJDLGlCQU81QnpQLE9BQU9NLEdBQ0gsR0FBSTJOLEdBQVd0TSxLQUFLNE0saUJBQWlCNUYsSUFBSXJJLEVBQ3pDLEtBQUkyTixFQUVBLEtBREFwTyxPQUFJdUMsTUFBTVQsS0FBSzRNLGtCQUNULG1DQUFxQ2pPLENBRy9DLElBQUlrUyxHQUFxQixHQUFJWixvQkFBbUJqUSxLQUFLa1EsY0FBZWxRLEtBQUttUSxpQkFBa0JXLG1CQUszRixPQUpBLElBQUlDLHNCQUFRekUsRUFBUzBFLG9CQUFvQkgsR0FBb0JoRCxPQUU3RDdOLEtBQUtpUixZQUFZdFMsR0FFVixHQUFJdUosV0FBVTJJLEVBQW1CSyxvQkFBcUJMLEVBQW1Cek4saUJBQWtCeU4sRUFBbUJNLGlCQUd6SDlTLFlBQVlNLEdBQ0xxQixLQUFLcU4sZUFBZXZMLFNBQVNuRCxJQUM1Qm1JLGFBQWFzSyxTQUFTelMsRUFBTXFCLEtBQUtxTixlQUFlckcsSUFBSXJJLEtBTWhFLEdBQUltUyxrQkFBbUIsT0N0RGpCNVMsT0FBTSxHQUFJQyxvQkFBTyxtQ0FLVmtULDRCQUVUaFQsZ0JBQWdCaVQsR0FDVEEsRUFBU0MsaUJBQ1JELEVBQVNDLHdCQ1hSQyxxQkFFVG5ULFFBSUFBLGNDSFNvVCxrQkFFVHBULGNBQ0kyQixLQUFLMFIsZ0JBQWtCLEdBQUlyUixrQkFHL0JoQyxxQkFDSSxNQUFPc1QsUUFPWHRULElBQUl1VCxHQUNBNVIsS0FBSzBSLGdCQUFnQnZQLElBQUl5UCxHQUc3QnZULFVBQ0kyQixLQUFLMFIsZ0JBQWdCalEsUUFBUSxBQUFDb1EsSUFDMUJBLEVBQVFDLE1BQ1IsUUFBTyxHQUNSOVIsTUFHUDNCLFVBQ0kyQixLQUFLMFIsZ0JBQWdCalEsUUFBUSxBQUFDb1EsSUFDMUJBLEVBQVFFLE1BQ1IsUUFBTyxHQUNSL1IsT0FJWCxHQUFJMlIsUUFBUyxHQUFJRix1QkNqQ0pPLHlCQUVUM1QsWUFBWTRULEVBQU9DLEdBQ2ZsUyxLQUFLaVMsTUFBUUEsRUFDYmpTLEtBQUtrUyxVQUFZQSxFQUNqQmxTLEtBQUttUyxRQUFVLEdBQUk5UixrQkFDbkJMLEtBQUtvUyxRQUFVLEdBQUkvUixrQkFHdkJoQyxZQUFZNFQsRUFBT0MsR0FDZixNQUFPLElBQUlGLHlCQUF3QkMsRUFBT0MsR0FPOUM3VCxJQUFJZ1UsR0FDQSxNQUFPclMsTUFBS3NTLEdBQUdELEdBT25CaFUsR0FBR2dVLEdBQ0MsR0FBSUUsUUFDSUYsRUFBTTFRLFVBQ042USw2QkFBaUIzTixTQUFTN0UsS0FBS2lTLE1BQU9JLEVBQU1oUixVQUFXZ1IsRUFBTTFRLFdBRTlEM0IsTUFBS2tTLFdBQWFsUyxLQUFLa1MsVUFBVU8sVUFDaEN6UyxLQUFLa1MsVUFBVU8sU0FBU0osRUFBTTFRLFlBR3RDMFEsR0FBTWpELFlBQVksV0FBWW1ELEdBQzlCRixFQUFNakQsWUFBWSxVQUFXbUQsR0FDN0JBLEVBQU90SCxNQUVQLElBQUl5SCxRQUNBLEdBQUlqVSxHQUFRK1QsNkJBQWlCN1EsU0FBUzNCLEtBQUtpUyxNQUFPSSxFQUFNaFIsVUFDcERnUixHQUFNTSxXQUNOTixFQUFNTSxXQUFXbFUsR0FBUzRULEVBQU0xUSxZQUN6QjBRLEVBQU14TixVQUNid04sRUFBTXhOLFNBQVNwRyxHQVl2QixPQVRJdUIsTUFBS2lTLE1BQU1XLFlBQ1g1UyxLQUFLaVMsTUFBTVcsZ0JBQ1A1UyxLQUFLK1IsVUFJYi9SLEtBQUttUyxRQUFRaFEsSUFBSW9RLEdBQ2pCdlMsS0FBS29TLFFBQVFqUSxJQUFJdVEsR0FFVjFTLEtBR1gzQixPQUNJMkIsS0FBS21TLFFBQVExUSxRQUFRLENBQUNoRCxFQUFPeUIsS0FDekJ6QixFQUFNd00sS0FBSy9LLEVBQ1gsUUFBTyxHQUNSRixNQUdQM0IsT0FDSTJCLEtBQUtvUyxRQUFRM1EsUUFBUSxDQUFDaEQsRUFBT3lCLEtBQ3pCekIsRUFBTXdNLEtBQUsvSyxFQUNYLFFBQU8sR0FDUkYsWUN4RUU2UyxvQkFPVHhVLHlCQUF5QnlVLEdBQ3JCLE1BQU8sSUFBSUMsT0FBTUQsR0FDYi9SLElBQUssQ0FBQzROLEVBQVFxRSxFQUFNdlUsS0FDaEIsR0FBSXdVLEdBQVd0RSxFQUFPcUUsR0FBUXZVLENBQzNCa1EsR0FBT2lFLFdBQ05qRSxFQUFPaUUsV0FFWCxPQUFPSyxLQUFZeFUsV0NadEJ5VSxTQUVUN1UsZUFBZVUsRUFBSW9VLEVBQU1DLEdBQ3JCblUsT0FBT29VLFFBQVFDLFVBQVVGLEVBQWFELEVBQU9wVSxFQUFJMkksWUFHckRySixnQkFDSSxNQUFPLElBQUlpSyxLQUFJckosT0FBT3NVLFNBQVM5TSxNQUduQ3BJLGVBQWVVLEdBQ1hFLE9BQU9zVSxTQUFXeFUsRUFBSTJJLGlCQ1ZqQjhMLE9BRVRuVixjQUVJMkIsS0FBS3lULGlCQUFtQixHQUFJN1MsaUJBR2hDdkMsWUFBWXFWLEdBQ1IsR0FBSTNVLEdBQU1tVSxRQUFRUyxRQUViNVUsR0FBSTZVLFFBQVEsS0FBT0YsR0FDcEIxVCxLQUFLNlQsT0FBTzlVLEdBU3BCVixPQUFPVSxHQUNIbVUsUUFBUVksUUFBUS9VLEVBQUksYUNmZmdWLGlCQUVUMVYscUJBSUksTUFIdUIsUUFBcEIyVixrQkFDQ0EsZ0JBQWtCLEdBQUlELGtCQUVuQkMsZ0JBR1gzVixjQUNJMkIsS0FBSzZNLFFBQVMsR0FBSW9ILGtCQUNiQyxhQUFhakksa0JBQ2JpSSxhQUFhM0osZ0JBQ2IySixhQUFhckYsZUFDYnFGLGFBQWFwRyxrQkFDYm9HLGFBQWF0RCxrQkFDYnNELGFBQWF6QyxrQkFDYnlDLGFBQWFWLE9BR3RCblYsWUFDSSxNQUFPMkIsTUFBSzZNLFFBS3BCLEdBQUltSCxpQkFBa0IsVUNqQ1RHLG9CQUVUOVYseUJBQXlCYyxFQUFLVixHQUMxQkwsZ0JBQWdCZ1csa0JBQWtCalYsRUFBSVYsR0FHMUNKLHlCQUF5QmMsR0FDckIsTUFBT2YsaUJBQWdCaVcsa0JBQWtCbFYsR0FHN0NkLHlCQUF5QmMsR0FDckIsTUFBT2YsaUJBQWdCa1csa0JBQWtCblYsR0FHN0NkLDRCQUE0QmMsR0FDeEIsTUFBT2YsaUJBQWdCbVcscUJBQXFCcFYsU0NmdkNxVixnQkFFVG5XLDJCQUEyQmMsRUFBS1YsR0FDNUJMLGdCQUFnQnFXLG9CQUFvQnRWLEVBQUlWLEdBRzVDSiwyQkFBMkJjLEdBQ3ZCLE1BQU9mLGlCQUFnQnNXLG9CQUFvQnZWLEdBRy9DZCwyQkFBMkJjLEdBQ3ZCLE1BQU9mLGlCQUFnQnVXLG9CQUFvQnhWLEdBRy9DZCw4QkFBOEJjLEdBQzFCLE1BQU9mLGlCQUFnQndXLHVCQUF1QnpWLFNDZnpDMFYscUJBUVR4VyxZQUFZeVcsRUFBTXhGLEVBQWdCeUYsR0FDOUIvVSxLQUFLOFUsS0FBT0EsRUFDWjlVLEtBQUtzUCxlQUFpQkEsRUFDdEJ0UCxLQUFLK1UsZUFBaUJBLEVBTTFCMVcsVUFDSSxNQUFPMkIsTUFBSzhVLEtBTWhCelcsb0JBQ0ksTUFBTzJCLE1BQUtzUCxlQU1oQmpSLG9CQUNJLE1BQU8yQixNQUFLK1UscUJDOUJkN1csT0FBTSxHQUFJQyxvQkFBTyx3QkFFVjZXLGlCQU9UM1csWUFBWVUsRUFBS2tXLEdBR2JqVixLQUFLakIsSUFBTUEsRUFHWGlCLEtBQUtpVixTQUFXQSxFQUdoQmpWLEtBQUtrVixnQkFBa0IsR0FBSXRVLGlCQUczQlosS0FBS21WLGNBQWdCLEtBVXpCOVcsbUJBQW1CK1csRUFBUXJXLEVBQUtzVyxHQUM1QixNQUFPLElBQUlMLGlCQUFnQkksRUFBUXJXLEVBQUtzVyxHQVU1Q2hYLGdCQUFnQnlXLEVBQU1oQyxFQUFRbkksRUFBVW9LLEdBRXBDLE1BREEvVSxNQUFLa1YsZ0JBQWdCblUsSUFBSStULEVBQU0sR0FBSUQscUJBQW9CQyxFQUFNLEdBQUluRiw0QkFBZW1ELEVBQVFuSSxHQUFXb0ssSUFDNUYvVSxLQVFYM0IsYUFBYXlVLEVBQVFuSSxHQUlqQixNQUhHbUksSUFBVW5JLElBQ1QzSyxLQUFLbVYsY0FBZ0IsR0FBSXhGLDRCQUFlbUQsRUFBUW5JLElBRTdDM0ssS0FHWDNCLE1BQ0lpSixPQUFPTixJQUFJaEgsS0FBS2pCLEtBQUtxTSxLQUFLLEFBQUNDLElBQ3ZCckwsS0FBS3NWLGdCQUFnQmpLLElBQ3RCLEFBQUM1SyxJQUNBVCxLQUFLdVYsYUFBYTlVLEtBSTFCcEMsT0FDSWlKLE9BQU9rTyxLQUFLeFYsS0FBS2pCLElBQUtpQixLQUFLaVYsVUFBVTdKLEtBQUssQUFBQ0MsSUFDdkNyTCxLQUFLc1YsZ0JBQWdCakssSUFDdEIsQUFBQzVLLElBQ0FULEtBQUt1VixhQUFhOVUsS0FJMUJwQyxNQUNJaUosT0FBT21PLElBQUl6VixLQUFLakIsSUFBS2lCLEtBQUtpVixVQUFVN0osS0FBSyxBQUFDQyxJQUN0Q3JMLEtBQUtzVixnQkFBZ0JqSyxJQUN0QixBQUFDNUssSUFDQVQsS0FBS3VWLGFBQWE5VSxLQUkxQnBDLFFBQ0lpSixPQUFPb08sTUFBTTFWLEtBQUtqQixJQUFLaUIsS0FBS2lWLFVBQVU3SixLQUFLLEFBQUNDLElBQ3hDckwsS0FBS3NWLGdCQUFnQmpLLElBQ3RCLEFBQUM1SyxJQUNBVCxLQUFLdVYsYUFBYTlVLEtBSTFCcEMsU0FDSWlKLE9BQU9xTyxPQUFPM1YsS0FBS2pCLEtBQUtxTSxLQUFLLEFBQUNDLElBQzFCckwsS0FBS3NWLGdCQUFnQmpLLElBQ3RCLEFBQUM1SyxJQUNBVCxLQUFLdVYsYUFBYTlVLEtBSTFCcEMsYUFBYW9DLEdBQ1R2QyxNQUFJdUMsTUFBTUEsR0FDUFQsS0FBS21WLGVBQ0puVixLQUFLbVYsY0FBY2xLLEtBQUt4SyxHQVFoQ3BDLGdCQUFnQmdOLEdBRVosR0FBSXVLLEdBQWtCNVYsS0FBS2tWLGdCQUFnQmxPLElBQUlxRSxFQUFTd0ssT0FDckRELElBQ0N2SyxFQUFTeUssT0FBTzFLLEtBQ1osQUFBQzBILElBQ0csR0FBSWlDLEdBQWlCYSxFQUFnQkcsbUJBQ2xDaEIsR0FDQ2EsRUFBZ0JJLG9CQUFvQi9LLEtBQUs4SixFQUFlakMsSUFFeEQ4QyxFQUFnQkksb0JBQW9CL0ssS0FBSzZILElBR2pELEFBQUNtRCxhQzdIWC9YLE9BQU0sR0FBSUMsb0JBQU8sMEJBRVYrWCxtQkFLVDdYLFlBQVk4WCxHQUFtQixHQUMzQm5XLEtBQUtvVyxrQkFBb0IsR0FBSS9WLGtCQUM3QkwsS0FBS3FXLG9CQUFzQixHQUFJaFcsa0JBQy9CTCxLQUFLc1csZUFBaUJILEVBRzFCOVgsVUFDSSxNQUFPMkIsTUFBS21XLGlCQUduQjlYLFFBQ08yQixLQUFLbVcsa0JBQW1CLEVBQ3hCblcsS0FBS29XLGtCQUFrQjNVLFFBQVEsQ0FBQ2hELEVBQU95QixLQUNuQ3pCLEVBQU13TSxNQUNOLFFBQU8sR0FDUmpMLE1BR1YzQixVQUNPMkIsS0FBS21XLGtCQUFtQixFQUN4Qm5XLEtBQUtxVyxvQkFBb0I1VSxRQUFRLENBQUNoRCxFQUFPeUIsS0FDckN6QixFQUFNd00sTUFDTixRQUFPLEdBQ1JqTCxNQU9WM0Isa0JBQWtCa1ksR0FFakIsTUFEQXZXLE1BQUtvVyxrQkFBa0JqVSxJQUFJb1UsR0FDcEJ2VyxLQU9SM0Isb0JBQW9CbVksR0FFbkIsTUFEQXhXLE1BQUtxVyxvQkFBb0JsVSxJQUFJcVUsR0FDdEJ4VyxXQy9DSXlXLHdCQUF3QlAsbUJBRWpDN1gsWUFBWXFZLEdBQW1CLEdBQzNCdlMsTUFBTXVTLEdBQ04xVyxLQUFLMlcsY0FBZ0IsR0FBSXRXLGtCQU03QmhDLGNBQWM2VCxHQUlWLE1BSEFBLEdBQVUwRSxrQkFBa0IsR0FBSWpILDRCQUFlM1AsS0FBTUEsS0FBSzZXLFdBQzFEM0UsRUFBVTRFLG9CQUFvQixHQUFJbkgsNEJBQWUzUCxLQUFNQSxLQUFLK1csYUFDNUQvVyxLQUFLMlcsY0FBY3hVLElBQUkrUCxHQUNoQmxTLEtBTVgzQixXQUNJLEdBQUkyWSxJQUFlLENBQ25CaFgsTUFBSzJXLGNBQWNsVixRQUFRLENBQUNoRCxFQUFNeUIsS0FDOUIsSUFBSXpCLEVBQU13WSxVQUVOLE1BREFELElBQWUsR0FDUixDQUVYLFFBQU8sR0FDUmhYLE1BQ0NnWCxFQUdBN1MsTUFBTStTLFVBRk4vUyxNQUFNZ1QsUUFTZDlZLGFBQ0k4RixNQUFNK1MsV0N6Q2QsS0FBTUUsY0FBZSxxREFFUkMsdUJBQXVCbkIsbUJBRW5DN1gsU0FBU0ksR0FDTEEsR0FBMEIsZ0JBQVZBLElBQXNCQSxFQUFNNlksTUFBTUYsY0FDakRwWCxLQUFLbVgsUUFFUm5YLEtBQUtrWCxnQkNQS0ssdUJBQXVCckIsbUJBRWhDN1gsWUFBWXFZLEdBQW1CLEdBQzNCdlMsTUFBTXVTLEdBQ04xVyxLQUFLMlcsY0FBZ0IsR0FBSXRXLGtCQU03QmhDLGNBQWM2VCxHQUlWLE1BSEFBLEdBQVUwRSxrQkFBa0IsR0FBSWpILDRCQUFlM1AsS0FBTUEsS0FBSzZXLFdBQzFEM0UsRUFBVTRFLG9CQUFvQixHQUFJbkgsNEJBQWUzUCxLQUFNQSxLQUFLK1csYUFDNUQvVyxLQUFLMlcsY0FBY3hVLElBQUkrUCxHQUNoQmxTLEtBTVgzQixXQUNJOEYsTUFBTWdULFFBTVY5WSxhQUNJLEdBQUltWixJQUFhLENBQ2pCeFgsTUFBSzJXLGNBQWNsVixRQUFRLENBQUNoRCxFQUFNeUIsS0FDOUIsR0FBR3pCLEVBQU13WSxVQUVMLE1BREFPLElBQWEsR0FDTixDQUVYLFFBQU8sR0FDUnhYLE1BQ0F3WCxFQUNDclQsTUFBTWdULFFBRU5oVCxNQUFNK1MsZ0JDeENMTywwQkFBMEJ2QixtQkFFdEM3WCxTQUFTSSxHQUNLLEtBQVZBLEVBQ0N1QixLQUFLa1gsVUFFUmxYLEtBQUttWCxjQ05LTywwQkFBMEJ4QixtQkFFdEM3WCxTQUFTSSxHQUNLLEtBQVZBLEVBQ0N1QixLQUFLa1gsVUFFUmxYLEtBQUttWCJ9
